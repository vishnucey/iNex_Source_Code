in LossRatio
 * Serving Flask app "application" (lazy loading)
 * Environment: production
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: on
 * Running on http://0.0.0.0:8080/ (Press CTRL+C to quit)
 * Restarting with stat
 * Debugger is active!
 * Debugger PIN: 233-463-959
115.160.217.130 - - [06/Aug/2019 09:54:12] "GET / HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 09:54:12] "GET /static/js/framework7.min.js HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 09:54:17] "GET /mobile HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 09:54:21] "GET /static/css/framework7.ios.min.css HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 09:54:21] "GET /static/css/framework7.ios.colors.min.css HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 09:54:21] "GET /static/css/my-app.css HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 09:54:21] "GET /static/js/my-app.js HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 09:54:24] "GET /clear-session HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 09:54:24] "GET /static/img/bots/inex.png HTTP/1.1" 200 -
WARNING: No match found for input: loss ratio for the last 6 months
WARNING: No match found for input: loss ratio for the last 6 months
115.160.217.130 - - [06/Aug/2019 09:54:38] "POST /converse HTTP/1.1" 200 -
in LossRatio
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: loss ratio for the last 6 months
['Hu Harmless Hier Partners', 'Builders Risk brokers', 'ACV Property Insurance', 'Bluto Janckowiz Independent Agent', 'November', 'Premier Insurance', 'No Fault Group', 'Drivers Choice Truckers Insurance', 'Armstrong Los Angeles', 'Lemon Growers', 'Harliquin and Daughter Insurance', 'Armstrong Cayman Captive Srvs', 'Security Group', 'Verity Bonds and Surety', 'Pennsylvania', 'Rubicon Flood Insurance', 'Alabama', 'Zealot and Zaire Insurance Partners', 'Universal Insurance', 'March', 'Personal Umbrella', 'Finalist Insurance Group', 'Armstrong Employer Srvcs', 'Internal Producer Code', 'Package Partners', 'BusinessOwners', 'Personal Auto', 'New York', 'Market Share Managing agency', 'Uninsurable brokers', 'Jillian Losttime Workers Comp', 'Georgia', 'Quick Quote Insurance', 'Garagemen Insurance brokerage', 'Derrick Crane agency', 'Killarney Creek agency', 'Zorba Przmeleski Specialty Lines', 'January', 'June', 'Manufacturers Risk', 'Kennedy Strategic Risks', 'Kennedy Mass Market', 'Hawaii', 'California', 'Dimitrios Xenopolus agency', 'August', 'Independence Insurance', 'Homeowners', 'Kennedy Premier', 'Special Form Property brokers', 'Openhand brokers', 'Armstrong Premier', 'Greatwest Bonds and Surety', 'Commercial insurers', 'Business Auto', 'Allrisk Insurance', 'Quad Cities Insurance', 'Yellowcreek Insurance', 'Effective Insurance', 'Youngblood Insurance', 'Boiler Specialists', 'Security Group Able', 'Occurrence Group', 'Monoline brokers', 'Armstrong San Diego', 'October', 'April', 'December', 'Armstrong Prof Liab Srvcs', 'February', 'May', 'Risk Management Group', 'Massachusetts', 'September', 'Thomson Jones agency', 'Nolocontendere brokers', 'Security Group Baker', 'Kearney and OShaugnessy agency', 'Unknown', 'Kentucky', 'Kennedy Group Services', 'Internal Portal Code', 'Wisconsin', 'Xoria Farm Insurance', 'Exceptional Insurance', 'Claus Workmanuberseer agency', 'July', 'Cid Vicious agency', 'Farmowners Group', 'Whiplash Bros Auto Insurance', 'Johnson and Johnson', 'Carpenters Insurance']
{}
------Invoking entity and intent recognition module----
loss ratio MTD
----------OutDict {'Intent': 'Loss ratio', 'timeperiod': 'MTD', 'Account Date': ['201902', '201908'], 'time_range': ['last'], 'Region': None, 'Agent': None, 'Line of Business': None, 'groupby': None}
Intent
in loop
setFlag----- 1
in acc date
justbn4--- ['201902', '201908']
just  --- ['201902', '201908']
Go to SQl
Session--------- <SecureCookieSession {'_permanent': True, 'Intent': 'Loss ratio', 'timeperiod': 'MTD', 'Account Date': ['201902', '201908'], 'time_range': ['last'], 'combined': None, 'groupby': None, 'vizType': None, 'fileName': None, 'Region': None, 'Line of Business': None, 'Agent': None}>
Initial dictionary----- <SecureCookieSession {'_permanent': True, 'Intent': 'Loss ratio', 'timeperiod': 'MTD', 'Account Date': ['201902', '201908'], 'time_range': ['last'], 'combined': None, 'groupby': None, 'vizType': None, 'fileName': None, 'Region': None, 'Line of Business': None, 'Agent': None}>
tempColl to be inserted to mapping Info--------- {'attribute': 'Account Date', 'entityId': 'D05', 'tableName': 'DIM_MONTH', 'fieldName': 'MTH_ID', 'columnName': 'D05.MTH_ID'}
      attribute entityId  tableName fieldName  columnName
0  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
{'Account Date': 'D05.MTH_ID'}
in for loop-----------
--------ITem---- Line of Business
in for loop-----------
--------ITem---- Region
in for loop-----------
--------ITem---- Account Date
FROM MAPPING INFO DICT _________________________
not mtd and len 1 and time range in past---- D05.MTH_ID BETWEEN '201902' AND '201907' 
if where not in query---- D05.MTH_ID BETWEEN '201902' AND '201907' 
in for loop-----------
--------ITem---- Agent
Query-- SELECT D05.MTH_ID , cast(isnull(SUM(ISNULL(F02.MTD_IND_PD_AMT + F02.MTD_MED_PD_AMT + F02.MTD_ALAE_PD_AMT + F02.MTD_ULAE_PD_AMT +
F02.MTD_IND_RSRV_CHNG_AMT + F02.MTD_MED_RSRV_CHNG_AMT + 
F02.MTD_ALAE_RSRV_CHNG_AMT + F02.MTD_ULAE_RSRV_CHNG_AMT,0) )
/nullif(sum(F02.MTD_EARNED_PREM_AMT),0)*100,0) as decimal(18,2)) AS LOSS_RATIO FROM V_FACT_PREM_CAL_YR_PRODUCT F02 INNER JOIN DIM_MONTH D05 ON F02.ACCTG_PRD_ID = D05.MTH_ID WHERE D05.MTH_ID BETWEEN '201902' AND '201907' GROUP BY D05.MTH_ID 
MTH_ID
      attribute entityId  tableName fieldName  columnName
0  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
LOSS_RATIO
Empty DataFrame
Columns: [attribute, entityId, tableName, fieldName, columnName]
Index: []
{'MTH_ID': 'Account Date', 'LOSS_RATIO': 'Loss ratio'}
output from sql---
    Account Date  Loss ratio
0        201902       11.96
1        201903        5.54
2        201904       61.28
3        201905        8.77
4        201906       -1.23
5        201907        6.94
df---    Account Date  Loss ratio
0        201902       11.96
1        201903        5.54
2        201904       61.28
3        201905        8.77
4        201906       -1.23
5        201907        6.94
inside length greater than 2
multipleValueList ['Account Date']
singleValueList []
when multipleValues == 1
Account Date
inside Account Date
type---- linechart
inside loop
the temp_string is ---  for time period between August 2019 and February 2019 
the response is --- Loss ratio for time period between August 2019 and February 2019 
Before returning ----- linechart Loss ratio for time period between August 2019 and February 2019 
Loss ratio for time period between August 2019 and February 2019
Response received from viz module-------

the Loss ratio for time period between August 2019 and February 2019
***************************************************
<SecureCookieSession {'_permanent': True, 'Intent': 'Loss ratio', 'timeperiod': 'MTD', 'Account Date': ['201902', '201908'], 'time_range': ['last'], 'combined': None, 'groupby': None, 'vizType': 'linechart', 'fileName': 'visualization1565085278.2920904.csv', 'Region': None, 'Line of Business': None, 'Agent': None}>
session variables are  
file Name----->visualization1565085278.2920904.csv
intent----->Loss ratio, state---------->None
 date---------['201902', '201908'], agent---------None
 LOB---------None, groupBy----------None
timeRange----->None
***************************************************
FileName in visualizatiion-------------- linechart
in visualization code
visualization1565085278.2920904.csv
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>
 var margin = {top: 30, right: 20, bottom: 30, left: 50}, 
width = 600 - margin.left - margin.right,
height = 270 - margin.top - margin.bottom; 
var parseDate = d3.time.format("%Y%m").parse; 
var x = d3.time.scale().range([0, width]); 
var y = d3.scale.linear().range([height, 0]); 
var xAxis = d3.svg.axis().scale(x)
.orient("bottom").ticks(5)
.innerTickSize(-height)
.outerTickSize(0)
.tickPadding(10);
var yAxis = d3.svg.axis().scale(y)
.orient("left").ticks(5)
.innerTickSize(-width)
.outerTickSize(0)
.tickPadding(10);
var svg = d3.select("body")
.append("svg")
.attr("width", width + margin.left + margin.right)
.attr("height", height + margin.top + margin.bottom)
.append("g")
.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
d3.csv("/static/visualization1565085278.2920904.csv", function(error, data) {
var headers = d3.keys(data[0])
var valueline = d3.svg.line()
.x(function(d) { return x(d[headers[0]]); })
.y(function(d) { return y(d[headers[1]]); });
data.forEach(function(d) {
d[headers[0]] = parseDate(d[headers[0]]);
d[headers[1]] = +d[headers[1]];
});
x.domain(d3.extent(data, function(d) { return d[headers[0]]; }));
y.domain([0, d3.max(data, function(d) { return d[headers[1]]; })]);
svg.append("path")
.attr("class", "line")
.attr("d", valueline(data));
svg.append("g")
.attr("class", "x axis")
.attr("transform", "translate(0," + height + ")")
.call(xAxis);
svg.append("text")
.attr("x", width / 2 ) 
.attr("y",0 - (margin.top / 2))
.attr("text-anchor", "middle")
.style("text-decoration", "underline")
.text(headers[1]+" by "+ headers[0]);
svg.append("g")
.attr("class", "y axis")
.call(yAxis)
});
</script>115.160.217.130 - - [06/Aug/2019 09:54:42] "GET /visualization/linechart HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 09:54:44] "GET /static/visualization1565085278.2920904.csv HTTP/1.1" 404 -
115.160.217.130 - - [06/Aug/2019 09:54:46] "GET /visualization/table HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 09:54:47] "GET /static/visualization1565085278.2920904.csv HTTP/1.1" 404 -
115.160.217.130 - - [06/Aug/2019 09:54:51] "GET /visualization/linechart HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 09:54:52] "GET /static/visualization1565085278.2920904.csv HTTP/1.1" 404 -
115.160.217.130 - - [06/Aug/2019 09:54:55] "GET /visualization/table HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 09:54:56] "GET /static/visualization1565085278.2920904.csv HTTP/1.1" 404 -
WARNING: No match found for input: reset
115.160.217.130 - - [06/Aug/2019 10:49:04] "POST /converse HTTP/1.1" 200 -
WARNING: No match found for input: loss ratio for march
WARNING: No match found for input: loss ratio for march
115.160.217.130 - - [06/Aug/2019 10:49:18] "POST /converse HTTP/1.1" 200 -
WARNING: No match found for input: reset
115.160.217.130 - - [06/Aug/2019 10:49:23] "POST /converse HTTP/1.1" 200 -

in visualization code
visualization1565085278.2920904.csv
FileName in render-------------- Loss ratio
in visualization code
visualization1565085278.2920904.csv
FileName in visualizatiion-------------- linechart
in visualization code
visualization1565085278.2920904.csv
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>
 var margin = {top: 30, right: 20, bottom: 30, left: 50}, 
width = 600 - margin.left - margin.right,
height = 270 - margin.top - margin.bottom; 
var parseDate = d3.time.format("%Y%m").parse; 
var x = d3.time.scale().range([0, width]); 
var y = d3.scale.linear().range([height, 0]); 
var xAxis = d3.svg.axis().scale(x)
.orient("bottom").ticks(5)
.innerTickSize(-height)
.outerTickSize(0)
.tickPadding(10);
var yAxis = d3.svg.axis().scale(y)
.orient("left").ticks(5)
.innerTickSize(-width)
.outerTickSize(0)
.tickPadding(10);
var svg = d3.select("body")
.append("svg")
.attr("width", width + margin.left + margin.right)
.attr("height", height + margin.top + margin.bottom)
.append("g")
.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
d3.csv("/static/visualization1565085278.2920904.csv", function(error, data) {
var headers = d3.keys(data[0])
var valueline = d3.svg.line()
.x(function(d) { return x(d[headers[0]]); })
.y(function(d) { return y(d[headers[1]]); });
data.forEach(function(d) {
d[headers[0]] = parseDate(d[headers[0]]);
d[headers[1]] = +d[headers[1]];
});
x.domain(d3.extent(data, function(d) { return d[headers[0]]; }));
y.domain([0, d3.max(data, function(d) { return d[headers[1]]; })]);
svg.append("path")
.attr("class", "line")
.attr("d", valueline(data));
svg.append("g")
.attr("class", "x axis")
.attr("transform", "translate(0," + height + ")")
.call(xAxis);
svg.append("text")
.attr("x", width / 2 ) 
.attr("y",0 - (margin.top / 2))
.attr("text-anchor", "middle")
.style("text-decoration", "underline")
.text(headers[1]+" by "+ headers[0]);
svg.append("g")
.attr("class", "y axis")
.call(yAxis)
});
</script>
in visualization code
visualization1565085278.2920904.csv
FileName in render-------------- Loss ratio
in visualization code
visualization1565085278.2920904.csv
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: Reset
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: loss ratio for march 
['Hu Harmless Hier Partners', 'Builders Risk brokers', 'ACV Property Insurance', 'Bluto Janckowiz Independent Agent', 'November', 'Premier Insurance', 'No Fault Group', 'Drivers Choice Truckers Insurance', 'Armstrong Los Angeles', 'Lemon Growers', 'Harliquin and Daughter Insurance', 'Armstrong Cayman Captive Srvs', 'Security Group', 'Verity Bonds and Surety', 'Pennsylvania', 'Rubicon Flood Insurance', 'Alabama', 'Zealot and Zaire Insurance Partners', 'Universal Insurance', 'March', 'Personal Umbrella', 'Finalist Insurance Group', 'Armstrong Employer Srvcs', 'Internal Producer Code', 'Package Partners', 'BusinessOwners', 'Personal Auto', 'New York', 'Market Share Managing agency', 'Uninsurable brokers', 'Jillian Losttime Workers Comp', 'Georgia', 'Quick Quote Insurance', 'Garagemen Insurance brokerage', 'Derrick Crane agency', 'Killarney Creek agency', 'Zorba Przmeleski Specialty Lines', 'January', 'June', 'Manufacturers Risk', 'Kennedy Strategic Risks', 'Kennedy Mass Market', 'Hawaii', 'California', 'Dimitrios Xenopolus agency', 'August', 'Independence Insurance', 'Homeowners', 'Kennedy Premier', 'Special Form Property brokers', 'Openhand brokers', 'Armstrong Premier', 'Greatwest Bonds and Surety', 'Commercial insurers', 'Business Auto', 'Allrisk Insurance', 'Quad Cities Insurance', 'Yellowcreek Insurance', 'Effective Insurance', 'Youngblood Insurance', 'Boiler Specialists', 'Security Group Able', 'Occurrence Group', 'Monoline brokers', 'Armstrong San Diego', 'October', 'April', 'December', 'Armstrong Prof Liab Srvcs', 'February', 'May', 'Risk Management Group', 'Massachusetts', 'September', 'Thomson Jones agency', 'Nolocontendere brokers', 'Security Group Baker', 'Kearney and OShaugnessy agency', 'Unknown', 'Kentucky', 'Kennedy Group Services', 'Internal Portal Code', 'Wisconsin', 'Xoria Farm Insurance', 'Exceptional Insurance', 'Claus Workmanuberseer agency', 'July', 'Cid Vicious agency', 'Farmowners Group', 'Whiplash Bros Auto Insurance', 'Johnson and Johnson', 'Carpenters Insurance']
{'march': 'March'}
------Invoking entity and intent recognition module----
loss ratio YTD
----------OutDict {'Intent': 'Loss ratio', 'timeperiod': 'YTD', 'Account Date': ['201903'], 'time_range': None, 'Region': None, 'Agent': None, 'Line of Business': None, 'groupby': None}
Intent
in loop
setFlag----- 1
in acc date
justbn4--- ['201903']
just  --- ['201903']
Go to SQl
Session--------- <SecureCookieSession {'Account Date': ['201903'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': None, 'groupby': None, 'time_range': None, 'timeperiod': 'YTD', 'vizType': None}>
Initial dictionary----- <SecureCookieSession {'Account Date': ['201903'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': None, 'groupby': None, 'time_range': None, 'timeperiod': 'YTD', 'vizType': None}>
tempColl to be inserted to mapping Info--------- {'attribute': 'Account Date', 'entityId': 'D05', 'tableName': 'DIM_MONTH', 'fieldName': 'MTH_ID', 'columnName': 'D05.MTH_ID'}
      attribute entityId  tableName fieldName  columnName
0  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
{'Account Date': 'D05.MTH_ID'}
in for loop-----------
--------ITem---- Line of Business
in for loop-----------
--------ITem---- Region
in for loop-----------
--------ITem---- Account Date
FROM MAPPING INFO DICT _________________________
time period not mtd and len 1 D05.MTH_ID = 201903 
if where not in query---- D05.MTH_ID = 201903 
in for loop-----------
--------ITem---- Agent
Query-- SELECT D05.MTH_ID , cast(isnull(SUM(ISNULL(F02.YTD_IND_PD_AMT + F02.YTD_MED_PD_AMT + F02.YTD_ALAE_PD_AMT + F02.YTD_ULAE_PD_AMT +
F02.YTD_IND_RSRV_CHNG_AMT + F02.YTD_MED_RSRV_CHNG_AMT + 
F02.YTD_ALAE_RSRV_CHNG_AMT + F02.YTD_ULAE_RSRV_CHNG_AMT,0) )
/nullif(sum(F02.YTD_EARNED_PREM_AMT),0)*100,0) as decimal(18,2)) AS LOSS_RATIO FROM V_FACT_PREM_CAL_YR_PRODUCT F02 INNER JOIN DIM_MONTH D05 ON F02.ACCTG_PRD_ID = D05.MTH_ID WHERE D05.MTH_ID = 201903 GROUP BY D05.MTH_ID 
MTH_ID
      attribute entityId  tableName fieldName  columnName
0  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
LOSS_RATIO
Empty DataFrame
Columns: [attribute, entityId, tableName, fieldName, columnName]
Index: []
{'MTH_ID': 'Account Date', 'LOSS_RATIO': 'Loss ratio'}
output from sql---
    Account Date  Loss ratio
0        201903        9.79
df---    Account Date  Loss ratio
0        201903        9.79
length 2
IN AXES = 1
   Account Date  Loss ratio
0        201903        9.79
0    201903
Name: Account Date, dtype: int64
in acct date
201903
in else 2
YTD Loss ratio for March 2019 is 9.79%
Before returning ----- text YTD Loss ratio for March 2019 is 9.79%
YTD Loss ratio for March 2019 is 9.79%
Response received from viz module-------

the YTD Loss ratio for March 2019 is 9.79%
Inside response received -text the YTD Loss ratio for March 2019 is 9.79%
The YTD Loss ratio for March 2019 is 9.79%
***************************************************
<SecureCookieSession {'Account Date': ['201903'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': None, 'groupby': None, 'time_range': None, 'timeperiod': 'YTD', 'vizType': 'text'}>
session variables are  
file Name----->None
intent----->Loss ratio, state---------->None
 date---------['201903'], agent---------None
 LOB---------None, groupBy----------None
timeRange----->None
***************************************************
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: Reset
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: loss ratio for the last 6 months by agent
['Hu Harmless Hier Partners', 'Builders Risk brokers', 'ACV Property Insurance', 'Bluto Janckowiz Independent Agent', 'November', 'Premier Insurance', 'No Fault Group', 'Drivers Choice Truckers Insurance', 'Armstrong Los Angeles', 'Lemon Growers', 'Harliquin and Daughter Insurance', 'Armstrong Cayman Captive Srvs', 'Security Group', 'Verity Bonds and Surety', 'Pennsylvania', 'Rubicon Flood Insurance', 'Alabama', 'Zealot and Zaire Insurance Partners', 'Universal Insurance', 'March', 'Personal Umbrella', 'Finalist Insurance Group', 'Armstrong Employer Srvcs', 'Internal Producer Code', 'Package Partners', 'BusinessOwners', 'Personal Auto', 'New York', 'Market Share Managing agency', 'Uninsurable brokers', 'Jillian Losttime Workers Comp', 'Georgia', 'Quick Quote Insurance', 'Garagemen Insurance brokerage', 'Derrick Crane agency', 'Killarney Creek agency', 'Zorba Przmeleski Specialty Lines', 'January', 'June', 'Manufacturers Risk', 'Kennedy Strategic Risks', 'Kennedy Mass Market', 'Hawaii', 'California', 'Dimitrios Xenopolus agency', 'August', 'Independence Insurance', 'Homeowners', 'Kennedy Premier', 'Special Form Property brokers', 'Openhand brokers', 'Armstrong Premier', 'Greatwest Bonds and Surety', 'Commercial insurers', 'Business Auto', 'Allrisk Insurance', 'Quad Cities Insurance', 'Yellowcreek Insurance', 'Effective Insurance', 'Youngblood Insurance', 'Boiler Specialists', 'Security Group Able', 'Occurrence Group', 'Monoline brokers', 'Armstrong San Diego', 'October', 'April', 'December', 'Armstrong Prof Liab Srvcs', 'February', 'May', 'Risk Management Group', 'Massachusetts', 'September', 'Thomson Jones agency', 'Nolocontendere brokers', 'Security Group Baker', 'Kearney and OShaugnessy agency', 'Unknown', 'Kentucky', 'Kennedy Group Services', 'Internal Portal Code', 'Wisconsin', 'Xoria Farm Insurance', 'Exceptional Insurance', 'Claus Workmanuberseer agency', 'July', 'Cid Vicious agency', 'Farmowners Group', 'Whiplash Bros Auto Insurance', 'Johnson and Johnson', 'Carpenters Insurance']
{}
------Invoking entity and intent recognition module----
loss ratio MTD
hdshjdqgdg---- by agent
in agent loop
----------OutDict {'Intent': 'Loss ratio', 'timeperiod': 'MTD', 'Account Date': ['201902', '201908'], 'time_range': ['last'], 'Region': None, 'Agent': None, 'Line of Business': None, 'groupby': ['Agent']}
Intent
in loop
setFlag----- 1
in acc date
justbn4--- ['201902', '201908']
just  --- ['201902', '201908']
Go to SQl
Session--------- <SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': None, 'groupby': ['Agent'], 'time_range': ['last'], 'timeperiod': 'MTD', 'vizType': None}>
Initial dictionary----- <SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': None, 'groupby': ['Agent'], 'time_range': ['last'], 'timeperiod': 'MTD', 'vizType': None}>
tempColl to be inserted to mapping Info--------- {'attribute': 'Account Date', 'entityId': 'D05', 'tableName': 'DIM_MONTH', 'fieldName': 'MTH_ID', 'columnName': 'D05.MTH_ID'}
tempColl to be inserted to mapping Info--------- {'attribute': 'Agent', 'entityId': 'D02', 'tableName': 'DIM_AGENT', 'fieldName': 'AGNT_NAME', 'columnName': 'D02.AGNT_NAME'}
      attribute entityId  tableName  fieldName     columnName
0  Account Date      D05  DIM_MONTH     MTH_ID     D05.MTH_ID
1         Agent      D02  DIM_AGENT  AGNT_NAME  D02.AGNT_NAME
{'Account Date': 'D05.MTH_ID', 'Agent': 'D02.AGNT_NAME'}
in for loop-----------
--------ITem---- Line of Business
in for loop-----------
--------ITem---- Region
in for loop-----------
--------ITem---- Account Date
FROM MAPPING INFO DICT _________________________
not mtd and len 1 and time range in past---- D05.MTH_ID BETWEEN '201902' AND '201907' 
if where not in query---- D05.MTH_ID BETWEEN '201902' AND '201907' 
in for loop-----------
--------ITem---- Agent
Query-- SELECT D05.MTH_ID ,D02.AGNT_NAME , cast(isnull(SUM(ISNULL(F01.MTD_IND_PD_AMT + F01.MTD_MED_PD_AMT + F01.MTD_ALAE_PD_AMT + F01.MTD_ULAE_PD_AMT +
F01.MTD_IND_RSRV_CHNG_AMT + F01.MTD_MED_RSRV_CHNG_AMT + 
F01.MTD_ALAE_RSRV_CHNG_AMT + F01.MTD_ULAE_RSRV_CHNG_AMT,0) )
/nullif(sum(F01.MTD_EARNED_PREM_AMT),0)*100,0) as decimal(18,2)) AS LOSS_RATIO FROM V_FACT_PREM_CAL_YR F01 INNER JOIN DIM_MONTH D05 ON F01.ACCTG_PRD_ID = D05.MTH_ID INNER JOIN DIM_AGENT D02 ON F01.AGNT_ID = D02.AGNT_ID WHERE D05.MTH_ID BETWEEN '201902' AND '201907' GROUP BY D05.MTH_ID ,D02.AGNT_NAME 
MTH_ID
      attribute entityId  tableName fieldName  columnName
0  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
AGNT_NAME
  attribute entityId  tableName  fieldName     columnName
1     Agent      D02  DIM_AGENT  AGNT_NAME  D02.AGNT_NAME
LOSS_RATIO
Empty DataFrame
Columns: [attribute, entityId, tableName, fieldName, columnName]
Index: []
{'MTH_ID': 'Account Date', 'AGNT_NAME': 'Agent', 'LOSS_RATIO': 'Loss ratio'}
output from sql---
     Account Date                       Agent  Loss ratio
0         201903      ACV Property Insurance        0.00
1         201904      ACV Property Insurance      907.30
2         201905      ACV Property Insurance        0.00
3         201906      ACV Property Insurance        0.00
4         201907      ACV Property Insurance        0.00
5         201903           Allrisk Insurance        0.00
6         201904           Allrisk Insurance      986.84
7         201905           Allrisk Insurance        0.00
8         201906           Allrisk Insurance        0.00
9         201907           Allrisk Insurance        0.00
10        201902         Armstrong (Premier)        8.40
11        201903         Armstrong (Premier)        2.74
12        201904         Armstrong (Premier)      -53.29
13        201905         Armstrong (Premier)        1.63
14        201906         Armstrong (Premier)       -6.48
15        201907         Armstrong (Premier)        5.85
16        201902     Armstrong - Los Angeles       60.00
17        201903     Armstrong - Los Angeles       80.11
18        201904     Armstrong - Los Angeles       34.59
19        201905     Armstrong - Los Angeles       48.23
20        201906     Armstrong - Los Angeles       -4.36
21        201907     Armstrong - Los Angeles       44.78
22        201903       Armstrong - San Diego        0.00
23        201904       Armstrong - San Diego        0.00
24        201905       Armstrong - San Diego        0.00
25        201906       Armstrong - San Diego        0.00
26        201904        Derrick Crane agency        0.00
27        201905        Derrick Crane agency        0.00
28        201906        Derrick Crane agency        0.00
29        201907        Derrick Crane agency        0.00
30        201903        Internal Portal Code        0.00
31        201904        Internal Portal Code        0.00
32        201905        Internal Portal Code        0.00
33        201906        Internal Portal Code        0.00
34        201907        Internal Portal Code        0.00
35        201904  Internal Producer Code - 3        0.00
36        201905  Internal Producer Code - 3        0.00
37        201906  Internal Producer Code - 3        0.00
38        201903      Kennedy Group Services        0.00
39        201904      Kennedy Group Services        0.00
40        201905      Kennedy Group Services        0.00
41        201906      Kennedy Group Services        0.00
42        201902     Verity Bonds and Surety        6.80
43        201903     Verity Bonds and Surety       17.60
44        201904     Verity Bonds and Surety        2.93
45        201905     Verity Bonds and Surety        5.05
46        201906     Verity Bonds and Surety       -0.58
47        201907     Verity Bonds and Surety        2.19
df---     Account Date                       Agent  Loss ratio
0         201903      ACV Property Insurance        0.00
1         201904      ACV Property Insurance      907.30
2         201905      ACV Property Insurance        0.00
3         201906      ACV Property Insurance        0.00
4         201907      ACV Property Insurance        0.00
5         201903           Allrisk Insurance        0.00
6         201904           Allrisk Insurance      986.84
7         201905           Allrisk Insurance        0.00
8         201906           Allrisk Insurance        0.00
9         201907           Allrisk Insurance        0.00
10        201902         Armstrong (Premier)        8.40
11        201903         Armstrong (Premier)        2.74
12        201904         Armstrong (Premier)      -53.29
13        201905         Armstrong (Premier)        1.63
14        201906         Armstrong (Premier)       -6.48
15        201907         Armstrong (Premier)        5.85
16        201902     Armstrong - Los Angeles       60.00
17        201903     Armstrong - Los Angeles       80.11
18        201904     Armstrong - Los Angeles       34.59
19        201905     Armstrong - Los Angeles       48.23
20        201906     Armstrong - Los Angeles       -4.36
21        201907     Armstrong - Los Angeles       44.78
22        201903       Armstrong - San Diego        0.00
23        201904       Armstrong - San Diego        0.00
24        201905       Armstrong - San Diego        0.00
25        201906       Armstrong - San Diego        0.00
26        201904        Derrick Crane agency        0.00
27        201905        Derrick Crane agency        0.00
28        201906        Derrick Crane agency        0.00
29        201907        Derrick Crane agency        0.00
30        201903        Internal Portal Code        0.00
31        201904        Internal Portal Code        0.00
32        201905        Internal Portal Code        0.00
33        201906        Internal Portal Code        0.00
34        201907        Internal Portal Code        0.00
35        201904  Internal Producer Code - 3        0.00
36        201905  Internal Producer Code - 3        0.00
37        201906  Internal Producer Code - 3        0.00
38        201903      Kennedy Group Services        0.00
39        201904      Kennedy Group Services        0.00
40        201905      Kennedy Group Services        0.00
41        201906      Kennedy Group Services        0.00
42        201902     Verity Bonds and Surety        6.80
43        201903     Verity Bonds and Surety       17.60
44        201904     Verity Bonds and Surety        2.93
45        201905     Verity Bonds and Surety        5.05
46        201906     Verity Bonds and Surety       -0.58
47        201907     Verity Bonds and Surety        2.19WARNING: No match found for input: loss ratio for the last 6 months by agent
WARNING: No match found for input: loss ratio for the last 6 months by agent
115.160.217.130 - - [06/Aug/2019 10:49:41] "POST /converse HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 10:49:57] "GET /visualization/table HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 10:49:58] "GET /static/visualization1565088581.6385329.csv HTTP/1.1" 200 -
WARNING: No match found for input: reset
115.160.217.130 - - [06/Aug/2019 10:50:06] "POST /converse HTTP/1.1" 200 -
WARNING: No match found for input: loss ratio for the last 6 months
WARNING: No match found for input: loss ratio for the last 6 months
115.160.217.130 - - [06/Aug/2019 10:50:44] "POST /converse HTTP/1.1" 200 -

inside length greater than 2
multipleValueList ['Account Date', 'Agent']
singleValueList []
when multipleValues != 1
inside Account Date
In multile list except for Account Date
the temp_string is ---  for time period between August 2019 and February 2019 
the response is --- Loss ratio for time period between August 2019 and February 2019 
Before returning ----- table Loss ratio for time period between August 2019 and February 2019 
Loss ratio for time period between August 2019 and February 2019
Response received from viz module-------

the Loss ratio for time period between August 2019 and February 2019 by agent
***************************************************
<SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': 'visualization1565088581.6385329.csv', 'groupby': ['Agent'], 'time_range': ['last'], 'timeperiod': 'MTD', 'vizType': 'table'}>
session variables are  
file Name----->visualization1565088581.6385329.csv
intent----->Loss ratio, state---------->None
 date---------['201902', '201908'], agent---------None
 LOB---------None, groupBy----------['Agent']
timeRange----->None
***************************************************
FileName in render-------------- Loss ratio
in visualization code
visualization1565088581.6385329.csv
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: Reset
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: loss ratio for the last 6 months
['Hu Harmless Hier Partners', 'Builders Risk brokers', 'ACV Property Insurance', 'Bluto Janckowiz Independent Agent', 'November', 'Premier Insurance', 'No Fault Group', 'Drivers Choice Truckers Insurance', 'Armstrong Los Angeles', 'Lemon Growers', 'Harliquin and Daughter Insurance', 'Armstrong Cayman Captive Srvs', 'Security Group', 'Verity Bonds and Surety', 'Pennsylvania', 'Rubicon Flood Insurance', 'Alabama', 'Zealot and Zaire Insurance Partners', 'Universal Insurance', 'March', 'Personal Umbrella', 'Finalist Insurance Group', 'Armstrong Employer Srvcs', 'Internal Producer Code', 'Package Partners', 'BusinessOwners', 'Personal Auto', 'New York', 'Market Share Managing agency', 'Uninsurable brokers', 'Jillian Losttime Workers Comp', 'Georgia', 'Quick Quote Insurance', 'Garagemen Insurance brokerage', 'Derrick Crane agency', 'Killarney Creek agency', 'Zorba Przmeleski Specialty Lines', 'January', 'June', 'Manufacturers Risk', 'Kennedy Strategic Risks', 'Kennedy Mass Market', 'Hawaii', 'California', 'Dimitrios Xenopolus agency', 'August', 'Independence Insurance', 'Homeowners', 'Kennedy Premier', 'Special Form Property brokers', 'Openhand brokers', 'Armstrong Premier', 'Greatwest Bonds and Surety', 'Commercial insurers', 'Business Auto', 'Allrisk Insurance', 'Quad Cities Insurance', 'Yellowcreek Insurance', 'Effective Insurance', 'Youngblood Insurance', 'Boiler Specialists', 'Security Group Able', 'Occurrence Group', 'Monoline brokers', 'Armstrong San Diego', 'October', 'April', 'December', 'Armstrong Prof Liab Srvcs', 'February', 'May', 'Risk Management Group', 'Massachusetts', 'September', 'Thomson Jones agency', 'Nolocontendere brokers', 'Security Group Baker', 'Kearney and OShaugnessy agency', 'Unknown', 'Kentucky', 'Kennedy Group Services', 'Internal Portal Code', 'Wisconsin', 'Xoria Farm Insurance', 'Exceptional Insurance', 'Claus Workmanuberseer agency', 'July', 'Cid Vicious agency', 'Farmowners Group', 'Whiplash Bros Auto Insurance', 'Johnson and Johnson', 'Carpenters Insurance']
{}
------Invoking entity and intent recognition module----
loss ratio MTD
----------OutDict {'Intent': 'Loss ratio', 'timeperiod': 'MTD', 'Account Date': ['201902', '201908'], 'time_range': ['last'], 'Region': None, 'Agent': None, 'Line of Business': None, 'groupby': None}
Intent
in loop
setFlag----- 1
in acc date
justbn4--- ['201902', '201908']
just  --- ['201902', '201908']
Go to SQl
Session--------- <SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': None, 'groupby': None, 'time_range': ['last'], 'timeperiod': 'MTD', 'vizType': None}>
Initial dictionary----- <SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': None, 'groupby': None, 'time_range': ['last'], 'timeperiod': 'MTD', 'vizType': None}>
tempColl to be inserted to mapping Info--------- {'attribute': 'Account Date', 'entityId': 'D05', 'tableName': 'DIM_MONTH', 'fieldName': 'MTH_ID', 'columnName': 'D05.MTH_ID'}
      attribute entityId  tableName fieldName  columnName
0  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
{'Account Date': 'D05.MTH_ID'}
in for loop-----------
--------ITem---- Line of Business
in for loop-----------
--------ITem---- Region
in for loop-----------
--------ITem---- Account Date
FROM MAPPING INFO DICT _________________________
not mtd and len 1 and time range in past---- D05.MTH_ID BETWEEN '201902' AND '201907' 
if where not in query---- D05.MTH_ID BETWEEN '201902' AND '201907' 
in for loop-----------
--------ITem---- Agent
Query-- SELECT D05.MTH_ID , cast(isnull(SUM(ISNULL(F02.MTD_IND_PD_AMT + F02.MTD_MED_PD_AMT + F02.MTD_ALAE_PD_AMT + F02.MTD_ULAE_PD_AMT +
F02.MTD_IND_RSRV_CHNG_AMT + F02.MTD_MED_RSRV_CHNG_AMT + 
F02.MTD_ALAE_RSRV_CHNG_AMT + F02.MTD_ULAE_RSRV_CHNG_AMT,0) )
/nullif(sum(F02.MTD_EARNED_PREM_AMT),0)*100,0) as decimal(18,2)) AS LOSS_RATIO FROM V_FACT_PREM_CAL_YR_PRODUCT F02 INNER JOIN DIM_MONTH D05 ON F02.ACCTG_PRD_ID = D05.MTH_ID WHERE D05.MTH_ID BETWEEN '201902' AND '201907' GROUP BY D05.MTH_ID 
MTH_ID
      attribute entityId  tableName fieldName  columnName
0  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
LOSS_RATIO
Empty DataFrame
Columns: [attribute, entityId, tableName, fieldName, columnName]
Index: []
{'MTH_ID': 'Account Date', 'LOSS_RATIO': 'Loss ratio'}
output from sql---
    Account Date  Loss ratio
0        201902       11.96
1        201903        5.54
2        201904       61.28
3        201905        8.77
4        201906       -1.23
5        201907        6.94
df---    Account Date  Loss ratio
0        201902       11.96
1        201903        5.54
2        201904       61.28
3        201905        8.77
4        201906       -1.23
5        201907        6.94
inside length greater than 2
multipleValueList ['Account Date']
singleValueList []
when multipleValues == 1
Account Date
inside Account Date
type---- linechart
inside loop
the temp_string is ---  for time period between August 2019 and February 2019 
the response is --- Loss ratio for time period between August 2019 and February 2019 
Before returning ----- linechart Loss ratio for time period between August 2019 and February 2019 
Loss ratio for time period between August 2019 and February 2019
Response received from viz module-------

the Loss ratio for time period between August 2019 and February 2019
***************************************************
<SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': 'visualization1565088644.8684785.csv', 'groupby': None, 'time_range': ['last'], 'timeperiod': 'MTD', 'vizType': 'linechart'}>
session variables are  
file Name----->visualization1565088644.8684785.csv
intent----->Loss ratio, state---------->None
 date---------['201902', '201908'], agent---------None
 LOB---------None, groupBy----------None
timeRange----->None
***************************************************
FileName in visualizatiion-------------- linechart
in visualization code
visualization1565088644.8684785.csv
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>
 var margin = {top: 30, right: 20, bottom: 30, left: 50}, 
width = 600 - margin.left - margin.right,
height = 270 - margin.top - margin.bottom; 
var parseDate = d3.time.format("%Y%m").parse; 
var x = d3.time.scale().range([0, width]); 
var y = d3.scale.linear().range([height, 0]); 
var xAxis = d3.svg.axis().scale(x)
.orient("bottom").ticks(5)
.innerTickSize(-height)
.outerTickSize(0)
.tickPadding(10);
var yAxis = d3.svg.axis().scale(y)
.orient("left").ticks(5)
.innerTickSize(-width)
.outerTickSize(0)
.tickPadding(10);
var svg = d3.select("body")
.append("svg")
.attr("width", width + margin.left + margin.right)
.attr("height", height + margin.top + margin.bottom)
.append("g")
.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
d3.csv("/static/visualization1565088644.8684785.csv", function(error, data) {
var headers = d3.keys(data[0])
var valueline = d3.svg.line()
.x(function(d) { return x(d[headers[0]]); })
.y(function(d) { return y(d[headers[1]]); });
data.forEach(function(d) {
d[headers[0]] = parseDate(d[headers[0]]);
d[headers[1]] = +d[headers[1]];
});
x.domain(d3.extent(data, function(d) { return d[headers[0]]; }));
y.domain([0, d3.max(data, function(d) { return d[headers[1]]; })]);
svg.append("path")
.attr("class", "line")
.attr("d", valueline(data));
svg.append("g")
.attr("class", "x axis")
.attr("transform", "translate(0," + height + ")")
.call(xAxis);
svg.append("text")
.attr("x", width / 2 ) 
.attr("y",0 - (margin.top / 2))
.attr("text-anchor", "middle")
.style("text-decoration", "underline")
.text(headers[1]+" by "+ headers[0]);
svg.append("g")
.attr("class", "y axis")
.call(yAxis)
});
</script>115.160.217.130 - - [06/Aug/2019 10:50:48] "GET /visualization/linechart HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 10:50:49] "GET /static/visualization1565088644.8684785.csv HTTP/1.1" 404 -
115.160.217.130 - - [06/Aug/2019 10:50:57] "GET /visualization/table HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 10:51:01] "GET /static/visualization1565088644.8684785.csv HTTP/1.1" 404 -
WARNING: No match found for input: reset
115.160.217.130 - - [06/Aug/2019 10:51:11] "POST /converse HTTP/1.1" 200 -
WARNING: No match found for input: loss ratio for the last 2 months combined
WARNING: No match found for input: loss ratio for the last 2 months combined
115.160.217.130 - - [06/Aug/2019 10:51:26] "POST /converse HTTP/1.1" 200 -
WARNING: No match found for input: reset
115.160.217.130 - - [06/Aug/2019 10:51:32] "POST /converse HTTP/1.1" 200 -

in visualization code
visualization1565088644.8684785.csv
FileName in render-------------- Loss ratio
in visualization code
visualization1565088644.8684785.csv
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: Reset
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: loss ratio for the last 2 months combined
['Hu Harmless Hier Partners', 'Builders Risk brokers', 'ACV Property Insurance', 'Bluto Janckowiz Independent Agent', 'November', 'Premier Insurance', 'No Fault Group', 'Drivers Choice Truckers Insurance', 'Armstrong Los Angeles', 'Lemon Growers', 'Harliquin and Daughter Insurance', 'Armstrong Cayman Captive Srvs', 'Security Group', 'Verity Bonds and Surety', 'Pennsylvania', 'Rubicon Flood Insurance', 'Alabama', 'Zealot and Zaire Insurance Partners', 'Universal Insurance', 'March', 'Personal Umbrella', 'Finalist Insurance Group', 'Armstrong Employer Srvcs', 'Internal Producer Code', 'Package Partners', 'BusinessOwners', 'Personal Auto', 'New York', 'Market Share Managing agency', 'Uninsurable brokers', 'Jillian Losttime Workers Comp', 'Georgia', 'Quick Quote Insurance', 'Garagemen Insurance brokerage', 'Derrick Crane agency', 'Killarney Creek agency', 'Zorba Przmeleski Specialty Lines', 'January', 'June', 'Manufacturers Risk', 'Kennedy Strategic Risks', 'Kennedy Mass Market', 'Hawaii', 'California', 'Dimitrios Xenopolus agency', 'August', 'Independence Insurance', 'Homeowners', 'Kennedy Premier', 'Special Form Property brokers', 'Openhand brokers', 'Armstrong Premier', 'Greatwest Bonds and Surety', 'Commercial insurers', 'Business Auto', 'Allrisk Insurance', 'Quad Cities Insurance', 'Yellowcreek Insurance', 'Effective Insurance', 'Youngblood Insurance', 'Boiler Specialists', 'Security Group Able', 'Occurrence Group', 'Monoline brokers', 'Armstrong San Diego', 'October', 'April', 'December', 'Armstrong Prof Liab Srvcs', 'February', 'May', 'Risk Management Group', 'Massachusetts', 'September', 'Thomson Jones agency', 'Nolocontendere brokers', 'Security Group Baker', 'Kearney and OShaugnessy agency', 'Unknown', 'Kentucky', 'Kennedy Group Services', 'Internal Portal Code', 'Wisconsin', 'Xoria Farm Insurance', 'Exceptional Insurance', 'Claus Workmanuberseer agency', 'July', 'Cid Vicious agency', 'Farmowners Group', 'Whiplash Bros Auto Insurance', 'Johnson and Johnson', 'Carpenters Insurance']
{}
------Invoking entity and intent recognition module----
loss ratio MTD
----------OutDict {'Intent': None, 'combined': 'true', 'Account Date': ['201906', '201908'], 'time_range': ['last'], 'Region': None, 'Agent': None, 'Line of Business': None, 'groupby': None}
Intent
combined
in loop
setFlag----- 1
in acc date
justbn4--- ['201906', '201908']
just  --- ['201906', '201908']
Go to SQl
Session--------- <SecureCookieSession {'Account Date': ['201906', '201908'], 'Agent': None, 'Intent': None, 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': 'true', 'fileName': None, 'groupby': None, 'time_range': ['last'], 'timeperiod': None, 'vizType': None}>
Initial dictionary----- <SecureCookieSession {'Account Date': ['201906', '201908'], 'Agent': None, 'Intent': None, 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': 'true', 'fileName': None, 'groupby': None, 'time_range': ['last'], 'timeperiod': None, 'vizType': None}>
'entityId'
local variable 'ID' referenced before assignment
in for loop-----------
--------ITem---- Line of Business
in for loop-----------
--------ITem---- Region
in for loop-----------
--------ITem---- Account Date
FROM MAPPING INFO DICT _________________________
local variable 'mappingInfodict' referenced before assignment
local variable 'Query' referenced before assignment
output from sql---
 None
df--- None
data frame none
Before returning ----- nil {'error': 0, 'message': 'No output has been generated from SQL query', 'speechOutput': 'No output has been generated from SQL query'}
Response received from viz module-------

{'error': 0, 'message': 'No output has been generated from SQL query', 'speechOutput': 'No output has been generated from SQL query'}
***************************************************
<SecureCookieSession {'Account Date': ['201906', '201908'], 'Agent': None, 'Intent': None, 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': 'true', 'fileName': None, 'groupby': None, 'time_range': ['last'], 'timeperiod': None, 'vizType': None}>
session variables are  
file Name----->None
intent----->None, state---------->None
 date---------['201906', '201908'], agent---------None
 LOB---------None, groupBy----------None
timeRange----->None
***************************************************
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: Reset
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: loss ratio for april
['Hu Harmless Hier Partners', 'Builders Risk brokers', 'ACV Property Insurance', 'Bluto Janckowiz Independent Agent', 'November', 'Premier Insurance', 'No Fault Group', 'Drivers Choice Truckers Insurance', 'Armstrong Los Angeles', 'Lemon Growers', 'Harliquin and Daughter Insurance', 'Armstrong Cayman Captive Srvs', 'Security Group', 'Verity Bonds and Surety', 'Pennsylvania', 'Rubicon Flood Insurance', 'Alabama', 'Zealot and Zaire Insurance Partners', 'Universal Insurance', 'March', 'Personal Umbrella', 'Finalist Insurance Group', 'Armstrong Employer Srvcs', 'Internal Producer Code', 'Package Partners', 'BusinessOwners', 'Personal Auto', 'New York', 'Market Share Managing agency', 'Uninsurable brokers', 'Jillian Losttime Workers Comp', 'Georgia', 'Quick Quote Insurance', 'Garagemen Insurance brokerage', 'Derrick Crane agency', 'Killarney Creek agency', 'Zorba Przmeleski Specialty Lines', 'January', 'June', 'Manufacturers Risk', 'Kennedy Strategic Risks', 'Kennedy Mass Market', 'Hawaii', 'California', 'Dimitrios Xenopolus agency', 'August', 'Independence Insurance', 'Homeowners', 'Kennedy Premier', 'Special Form Property brokers', 'Openhand brokers', 'Armstrong Premier', 'Greatwest Bonds and Surety', 'Commercial insurers', 'Business Auto', 'Allrisk Insurance', 'Quad Cities Insurance', 'Yellowcreek Insurance', 'Effective Insurance', 'Youngblood Insurance', 'Boiler Specialists', 'Security Group Able', 'Occurrence Group', 'Monoline brokers', 'Armstrong San Diego', 'October', 'April', 'December', 'Armstrong Prof Liab Srvcs', 'February', 'May', 'Risk Management Group', 'Massachusetts', 'September', 'Thomson Jones agency', 'Nolocontendere brokers', 'Security Group Baker', 'Kearney and OShaugnessy agency', 'Unknown', 'Kentucky', 'Kennedy Group Services', 'Internal Portal Code', 'Wisconsin', 'Xoria Farm Insurance', 'Exceptional Insurance', 'Claus Workmanuberseer agency', 'July', 'Cid Vicious agency', 'Farmowners Group', 'Whiplash Bros Auto Insurance', 'Johnson and Johnson', 'Carpenters Insurance']
{'april': 'April'}
------Invoking entity and intent recognition module----
loss ratio MTD
----------OutDict {'Intent': 'Loss ratio', 'timeperiod': 'MTD', 'Account Date': ['201904'], 'time_range': None, 'Region': None, 'Agent': None, 'Line of Business': None, 'groupby': None}
Intent
in loop
setFlag----- 1
in acc date
justbn4--- ['201904']
just  --- ['201904']
Go to SQl
Session--------- <SecureCookieSession {'Account Date': ['201904'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': None, 'groupby': None, 'time_range': None, 'timeperiod': 'MTD', 'vizType': None}>
Initial dictionary----- <SecureCookieSession {'Account Date': ['201904'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': None, 'groupby': None, 'time_range': None, 'timeperiod': 'MTD', 'vizType': None}>
tempColl to be inserted to mapping Info--------- {'attribute': 'Account Date', 'entityId': 'D05', 'tableName': 'DIM_MONTH', 'fieldName': 'MTH_ID', 'columnName': 'D05.MTH_ID'}WARNING: No match found for input: loss ratio for april
WARNING: No match found for input: loss ratio for april
115.160.217.130 - - [06/Aug/2019 10:51:44] "POST /converse HTTP/1.1" 200 -
WARNING: No match found for input: reset
115.160.217.130 - - [06/Aug/2019 10:51:49] "POST /converse HTTP/1.1" 200 -

      attribute entityId  tableName fieldName  columnName
0  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
{'Account Date': 'D05.MTH_ID'}
in for loop-----------
--------ITem---- Line of Business
in for loop-----------
--------ITem---- Region
in for loop-----------
--------ITem---- Account Date
FROM MAPPING INFO DICT _________________________
not mtd and len 1 and time range None---- D05.MTH_ID = 201904 
if where not in query---- D05.MTH_ID = 201904 
in for loop-----------
--------ITem---- Agent
Query-- SELECT D05.MTH_ID , cast(isnull(SUM(ISNULL(F02.MTD_IND_PD_AMT + F02.MTD_MED_PD_AMT + F02.MTD_ALAE_PD_AMT + F02.MTD_ULAE_PD_AMT +
F02.MTD_IND_RSRV_CHNG_AMT + F02.MTD_MED_RSRV_CHNG_AMT + 
F02.MTD_ALAE_RSRV_CHNG_AMT + F02.MTD_ULAE_RSRV_CHNG_AMT,0) )
/nullif(sum(F02.MTD_EARNED_PREM_AMT),0)*100,0) as decimal(18,2)) AS LOSS_RATIO FROM V_FACT_PREM_CAL_YR_PRODUCT F02 INNER JOIN DIM_MONTH D05 ON F02.ACCTG_PRD_ID = D05.MTH_ID WHERE D05.MTH_ID = 201904 GROUP BY D05.MTH_ID 
MTH_ID
      attribute entityId  tableName fieldName  columnName
0  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
LOSS_RATIO
Empty DataFrame
Columns: [attribute, entityId, tableName, fieldName, columnName]
Index: []
{'MTH_ID': 'Account Date', 'LOSS_RATIO': 'Loss ratio'}
output from sql---
    Account Date  Loss ratio
0        201904       61.28
df---    Account Date  Loss ratio
0        201904       61.28
length 2
IN AXES = 1
   Account Date  Loss ratio
0        201904       61.28
0    201904
Name: Account Date, dtype: int64
in acct date
201904
in else 2
MTD Loss ratio for April 2019 is 61.28%
Before returning ----- text MTD Loss ratio for April 2019 is 61.28%
MTD Loss ratio for April 2019 is 61.28%
Response received from viz module-------

the MTD Loss ratio for April 2019 is 61.28%
Inside response received -text the MTD Loss ratio for April 2019 is 61.28%
The MTD Loss ratio for April 2019 is 61.28%
***************************************************
<SecureCookieSession {'Account Date': ['201904'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': None, 'groupby': None, 'time_range': None, 'timeperiod': 'MTD', 'vizType': 'text'}>
session variables are  
file Name----->None
intent----->Loss ratio, state---------->None
 date---------['201904'], agent---------None
 LOB---------None, groupBy----------None
timeRange----->None
***************************************************
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: Reset
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: loss ratio for the last 6 months by agent
['Hu Harmless Hier Partners', 'Builders Risk brokers', 'ACV Property Insurance', 'Bluto Janckowiz Independent Agent', 'November', 'Premier Insurance', 'No Fault Group', 'Drivers Choice Truckers Insurance', 'Armstrong Los Angeles', 'Lemon Growers', 'Harliquin and Daughter Insurance', 'Armstrong Cayman Captive Srvs', 'Security Group', 'Verity Bonds and Surety', 'Pennsylvania', 'Rubicon Flood Insurance', 'Alabama', 'Zealot and Zaire Insurance Partners', 'Universal Insurance', 'March', 'Personal Umbrella', 'Finalist Insurance Group', 'Armstrong Employer Srvcs', 'Internal Producer Code', 'Package Partners', 'BusinessOwners', 'Personal Auto', 'New York', 'Market Share Managing agency', 'Uninsurable brokers', 'Jillian Losttime Workers Comp', 'Georgia', 'Quick Quote Insurance', 'Garagemen Insurance brokerage', 'Derrick Crane agency', 'Killarney Creek agency', 'Zorba Przmeleski Specialty Lines', 'January', 'June', 'Manufacturers Risk', 'Kennedy Strategic Risks', 'Kennedy Mass Market', 'Hawaii', 'California', 'Dimitrios Xenopolus agency', 'August', 'Independence Insurance', 'Homeowners', 'Kennedy Premier', 'Special Form Property brokers', 'Openhand brokers', 'Armstrong Premier', 'Greatwest Bonds and Surety', 'Commercial insurers', 'Business Auto', 'Allrisk Insurance', 'Quad Cities Insurance', 'Yellowcreek Insurance', 'Effective Insurance', 'Youngblood Insurance', 'Boiler Specialists', 'Security Group Able', 'Occurrence Group', 'Monoline brokers', 'Armstrong San Diego', 'October', 'April', 'December', 'Armstrong Prof Liab Srvcs', 'February', 'May', 'Risk Management Group', 'Massachusetts', 'September', 'Thomson Jones agency', 'Nolocontendere brokers', 'Security Group Baker', 'Kearney and OShaugnessy agency', 'Unknown', 'Kentucky', 'Kennedy Group Services', 'Internal Portal Code', 'Wisconsin', 'Xoria Farm Insurance', 'Exceptional Insurance', 'Claus Workmanuberseer agency', 'July', 'Cid Vicious agency', 'Farmowners Group', 'Whiplash Bros Auto Insurance', 'Johnson and Johnson', 'Carpenters Insurance']
{}
------Invoking entity and intent recognition module----
loss ratio MTD
hdshjdqgdg---- by agent
in agent loop
----------OutDict {'Intent': 'Loss ratio', 'timeperiod': 'MTD', 'Account Date': ['201902', '201908'], 'time_range': ['last'], 'Region': None, 'Agent': None, 'Line of Business': None, 'groupby': ['Agent']}
Intent
in loop
setFlag----- 1
in acc date
justbn4--- ['201902', '201908']
just  --- ['201902', '201908']
Go to SQl
Session--------- <SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': None, 'groupby': ['Agent'], 'time_range': ['last'], 'timeperiod': 'MTD', 'vizType': None}>
Initial dictionary----- <SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': None, 'groupby': ['Agent'], 'time_range': ['last'], 'timeperiod': 'MTD', 'vizType': None}>
tempColl to be inserted to mapping Info--------- {'attribute': 'Account Date', 'entityId': 'D05', 'tableName': 'DIM_MONTH', 'fieldName': 'MTH_ID', 'columnName': 'D05.MTH_ID'}
tempColl to be inserted to mapping Info--------- {'attribute': 'Agent', 'entityId': 'D02', 'tableName': 'DIM_AGENT', 'fieldName': 'AGNT_NAME', 'columnName': 'D02.AGNT_NAME'}
      attribute entityId  tableName  fieldName     columnName
0  Account Date      D05  DIM_MONTH     MTH_ID     D05.MTH_ID
1         Agent      D02  DIM_AGENT  AGNT_NAME  D02.AGNT_NAME
{'Account Date': 'D05.MTH_ID', 'Agent': 'D02.AGNT_NAME'}
in for loop-----------
--------ITem---- Line of Business
in for loop-----------
--------ITem---- Region
in for loop-----------
--------ITem---- Account Date
FROM MAPPING INFO DICT _________________________
not mtd and len 1 and time range in past---- D05.MTH_ID BETWEEN '201902' AND '201907' 
if where not in query---- D05.MTH_ID BETWEEN '201902' AND '201907' 
in for loop-----------
--------ITem---- Agent
Query-- SELECT D05.MTH_ID ,D02.AGNT_NAME , cast(isnull(SUM(ISNULL(F01.MTD_IND_PD_AMT + F01.MTD_MED_PD_AMT + F01.MTD_ALAE_PD_AMT + F01.MTD_ULAE_PD_AMT +
F01.MTD_IND_RSRV_CHNG_AMT + F01.MTD_MED_RSRV_CHNG_AMT + 
F01.MTD_ALAE_RSRV_CHNG_AMT + F01.MTD_ULAE_RSRV_CHNG_AMT,0) )
/nullif(sum(F01.MTD_EARNED_PREM_AMT),0)*100,0) as decimal(18,2)) AS LOSS_RATIO FROM V_FACT_PREM_CAL_YR F01 INNER JOIN DIM_MONTH D05 ON F01.ACCTG_PRD_ID = D05.MTH_ID INNER JOIN DIM_AGENT D02 ON F01.AGNT_ID = D02.AGNT_ID WHERE D05.MTH_ID BETWEEN '201902' AND '201907' GROUP BY D05.MTH_ID ,D02.AGNT_NAME 
MTH_ID
      attribute entityId  tableName fieldName  columnName
0  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
AGNT_NAME
  attribute entityId  tableName  fieldName     columnName
1     Agent      D02  DIM_AGENT  AGNT_NAME  D02.AGNT_NAME
LOSS_RATIO
Empty DataFrame
Columns: [attribute, entityId, tableName, fieldName, columnName]
Index: []
{'MTH_ID': 'Account Date', 'AGNT_NAME': 'Agent', 'LOSS_RATIO': 'Loss ratio'}
output from sql---
     Account Date                       Agent  Loss ratio
0         201903      ACV Property Insurance        0.00
1         201904      ACV Property Insurance      907.30
2         201905      ACV Property Insurance        0.00
3         201906      ACV Property Insurance        0.00
4         201907      ACV Property Insurance        0.00
5         201903           Allrisk Insurance        0.00
6         201904           Allrisk Insurance      986.84
7         201905           Allrisk Insurance        0.00
8         201906           Allrisk Insurance        0.00
9         201907           Allrisk Insurance        0.00
10        201902         Armstrong (Premier)        8.40
11        201903         Armstrong (Premier)        2.74
12        201904         Armstrong (Premier)      -53.29
13        201905         Armstrong (Premier)        1.63
14        201906         Armstrong (Premier)       -6.48
15        201907         Armstrong (Premier)        5.85
16        201902     Armstrong - Los Angeles       60.00
17        201903     Armstrong - Los Angeles       80.11
18        201904     Armstrong - Los Angeles       34.59
19        201905     Armstrong - Los Angeles       48.23
20        201906     Armstrong - Los Angeles       -4.36
21        201907     Armstrong - Los Angeles       44.78
22        201903       Armstrong - San Diego        0.00
23        201904       Armstrong - San Diego        0.00
24        201905       Armstrong - San Diego        0.00
25        201906       Armstrong - San Diego        0.00
26        201904        Derrick Crane agency        0.00
27        201905        Derrick Crane agency        0.00
28        201906        Derrick Crane agency        0.00
29        201907        Derrick Crane agency        0.00
30        201903        Internal Portal Code        0.00
31        201904        Internal Portal Code        0.00
32        201905        Internal Portal Code        0.00
33        201906        Internal Portal Code        0.00
34        201907        Internal Portal Code        0.00
35        201904  Internal Producer Code - 3        0.00
36        201905  Internal Producer Code - 3        0.00
37        201906  Internal Producer Code - 3        0.00
38        201903      Kennedy Group Services        0.00
39        201904      Kennedy Group Services        0.00
40        201905      Kennedy Group Services        0.00
41        201906      Kennedy Group Services        0.00
42        201902     Verity Bonds and Surety        6.80
43        201903     Verity Bonds and Surety       17.60
44        201904     Verity Bonds and Surety        2.93
45        201905     Verity Bonds and Surety        5.05
46        201906     Verity Bonds and Surety       -0.58
47        201907     Verity Bonds and Surety        2.19WARNING: No match found for input: loss ratio for the last 6 months by agent
WARNING: No match found for input: loss ratio for the last 6 months by agent
115.160.217.130 - - [06/Aug/2019 10:52:01] "POST /converse HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 10:52:03] "GET /visualization/table HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 10:52:04] "GET /static/visualization1565088721.2317796.csv HTTP/1.1" 200 -
WARNING: No match found for input: reset
115.160.217.130 - - [06/Aug/2019 10:52:09] "POST /converse HTTP/1.1" 200 -

df---     Account Date                       Agent  Loss ratio
0         201903      ACV Property Insurance        0.00
1         201904      ACV Property Insurance      907.30
2         201905      ACV Property Insurance        0.00
3         201906      ACV Property Insurance        0.00
4         201907      ACV Property Insurance        0.00
5         201903           Allrisk Insurance        0.00
6         201904           Allrisk Insurance      986.84
7         201905           Allrisk Insurance        0.00
8         201906           Allrisk Insurance        0.00
9         201907           Allrisk Insurance        0.00
10        201902         Armstrong (Premier)        8.40
11        201903         Armstrong (Premier)        2.74
12        201904         Armstrong (Premier)      -53.29
13        201905         Armstrong (Premier)        1.63
14        201906         Armstrong (Premier)       -6.48
15        201907         Armstrong (Premier)        5.85
16        201902     Armstrong - Los Angeles       60.00
17        201903     Armstrong - Los Angeles       80.11
18        201904     Armstrong - Los Angeles       34.59
19        201905     Armstrong - Los Angeles       48.23
20        201906     Armstrong - Los Angeles       -4.36
21        201907     Armstrong - Los Angeles       44.78
22        201903       Armstrong - San Diego        0.00
23        201904       Armstrong - San Diego        0.00
24        201905       Armstrong - San Diego        0.00
25        201906       Armstrong - San Diego        0.00
26        201904        Derrick Crane agency        0.00
27        201905        Derrick Crane agency        0.00
28        201906        Derrick Crane agency        0.00
29        201907        Derrick Crane agency        0.00
30        201903        Internal Portal Code        0.00
31        201904        Internal Portal Code        0.00
32        201905        Internal Portal Code        0.00
33        201906        Internal Portal Code        0.00
34        201907        Internal Portal Code        0.00
35        201904  Internal Producer Code - 3        0.00
36        201905  Internal Producer Code - 3        0.00
37        201906  Internal Producer Code - 3        0.00
38        201903      Kennedy Group Services        0.00
39        201904      Kennedy Group Services        0.00
40        201905      Kennedy Group Services        0.00
41        201906      Kennedy Group Services        0.00
42        201902     Verity Bonds and Surety        6.80
43        201903     Verity Bonds and Surety       17.60
44        201904     Verity Bonds and Surety        2.93
45        201905     Verity Bonds and Surety        5.05
46        201906     Verity Bonds and Surety       -0.58
47        201907     Verity Bonds and Surety        2.19
inside length greater than 2
multipleValueList ['Account Date', 'Agent']
singleValueList []
when multipleValues != 1
inside Account Date
In multile list except for Account Date
the temp_string is ---  for time period between August 2019 and February 2019 
the response is --- Loss ratio for time period between August 2019 and February 2019 
Before returning ----- table Loss ratio for time period between August 2019 and February 2019 
Loss ratio for time period between August 2019 and February 2019
Response received from viz module-------

the Loss ratio for time period between August 2019 and February 2019 by agent
***************************************************
<SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': 'visualization1565088721.2317796.csv', 'groupby': ['Agent'], 'time_range': ['last'], 'timeperiod': 'MTD', 'vizType': 'table'}>
session variables are  
file Name----->visualization1565088721.2317796.csv
intent----->Loss ratio, state---------->None
 date---------['201902', '201908'], agent---------None
 LOB---------None, groupBy----------['Agent']
timeRange----->None
***************************************************
FileName in render-------------- Loss ratio
in visualization code
visualization1565088721.2317796.csv
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: Reset
in converse
Loading resources/greetings.aiml... done (0.03 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: loss ratio for the last 6 months
['Hu Harmless Hier Partners', 'Builders Risk brokers', 'ACV Property Insurance', 'Bluto Janckowiz Independent Agent', 'November', 'Premier Insurance', 'No Fault Group', 'Drivers Choice Truckers Insurance', 'Armstrong Los Angeles', 'Lemon Growers', 'Harliquin and Daughter Insurance', 'Armstrong Cayman Captive Srvs', 'Security Group', 'Verity Bonds and Surety', 'Pennsylvania', 'Rubicon Flood Insurance', 'Alabama', 'Zealot and Zaire Insurance Partners', 'Universal Insurance', 'March', 'Personal Umbrella', 'Finalist Insurance Group', 'Armstrong Employer Srvcs', 'Internal Producer Code', 'Package Partners', 'BusinessOwners', 'Personal Auto', 'New York', 'Market Share Managing agency', 'Uninsurable brokers', 'Jillian Losttime Workers Comp', 'Georgia', 'Quick Quote Insurance', 'Garagemen Insurance brokerage', 'Derrick Crane agency', 'Killarney Creek agency', 'Zorba Przmeleski Specialty Lines', 'January', 'June', 'Manufacturers Risk', 'Kennedy Strategic Risks', 'Kennedy Mass Market', 'Hawaii', 'California', 'Dimitrios Xenopolus agency', 'August', 'Independence Insurance', 'Homeowners', 'Kennedy Premier', 'Special Form Property brokers', 'Openhand brokers', 'Armstrong Premier', 'Greatwest Bonds and Surety', 'Commercial insurers', 'Business Auto', 'Allrisk Insurance', 'Quad Cities Insurance', 'Yellowcreek Insurance', 'Effective Insurance', 'Youngblood Insurance', 'Boiler Specialists', 'Security Group Able', 'Occurrence Group', 'Monoline brokers', 'Armstrong San Diego', 'October', 'April', 'December', 'Armstrong Prof Liab Srvcs', 'February', 'May', 'Risk Management Group', 'Massachusetts', 'September', 'Thomson Jones agency', 'Nolocontendere brokers', 'Security Group Baker', 'Kearney and OShaugnessy agency', 'Unknown', 'Kentucky', 'Kennedy Group Services', 'Internal Portal Code', 'Wisconsin', 'Xoria Farm Insurance', 'Exceptional Insurance', 'Claus Workmanuberseer agency', 'July', 'Cid Vicious agency', 'Farmowners Group', 'Whiplash Bros Auto Insurance', 'Johnson and Johnson', 'Carpenters Insurance']
{}
------Invoking entity and intent recognition module----
loss ratio MTD
----------OutDict {'Intent': 'Loss ratio', 'timeperiod': 'MTD', 'Account Date': ['201902', '201908'], 'time_range': ['last'], 'Region': None, 'Agent': None, 'Line of Business': None, 'groupby': None}
Intent
in loop
setFlag----- 1
in acc date
justbn4--- ['201902', '201908']
just  --- ['201902', '201908']
Go to SQl
Session--------- <SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': None, 'groupby': None, 'time_range': ['last'], 'timeperiod': 'MTD', 'vizType': None}>
Initial dictionary----- <SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': None, 'groupby': None, 'time_range': ['last'], 'timeperiod': 'MTD', 'vizType': None}>
tempColl to be inserted to mapping Info--------- {'attribute': 'Account Date', 'entityId': 'D05', 'tableName': 'DIM_MONTH', 'fieldName': 'MTH_ID', 'columnName': 'D05.MTH_ID'}
      attribute entityId  tableName fieldName  columnName
0  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
{'Account Date': 'D05.MTH_ID'}
in for loop-----------
--------ITem---- Line of Business
in for loop-----------
--------ITem---- Region
in for loop-----------
--------ITem---- Account Date
FROM MAPPING INFO DICT _________________________
not mtd and len 1 and time range in past---- D05.MTH_ID BETWEEN '201902' AND '201907' 
if where not in query---- D05.MTH_ID BETWEEN '201902' AND '201907' 
in for loop-----------WARNING: No match found for input: loss ratio for the last 6 months
WARNING: No match found for input: loss ratio for the last 6 months
115.160.217.130 - - [06/Aug/2019 10:52:22] "POST /converse HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 10:52:25] "GET /visualization/table HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 10:52:26] "GET /static/visualization1565088742.2939246.csv HTTP/1.1" 404 -
115.160.217.130 - - [06/Aug/2019 10:52:31] "GET /visualization/linechart HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 10:52:32] "GET /static/visualization1565088742.2939246.csv HTTP/1.1" 404 -
115.160.217.130 - - [06/Aug/2019 10:54:11] "GET /static/visualization1565088742.2939246.csv HTTP/1.1" 404 -
 * Detected change in '/home/eyuser/iNex_v5/application.py', reloading

--------ITem---- Agent
Query-- SELECT D05.MTH_ID , cast(isnull(SUM(ISNULL(F02.MTD_IND_PD_AMT + F02.MTD_MED_PD_AMT + F02.MTD_ALAE_PD_AMT + F02.MTD_ULAE_PD_AMT +
F02.MTD_IND_RSRV_CHNG_AMT + F02.MTD_MED_RSRV_CHNG_AMT + 
F02.MTD_ALAE_RSRV_CHNG_AMT + F02.MTD_ULAE_RSRV_CHNG_AMT,0) )
/nullif(sum(F02.MTD_EARNED_PREM_AMT),0)*100,0) as decimal(18,2)) AS LOSS_RATIO FROM V_FACT_PREM_CAL_YR_PRODUCT F02 INNER JOIN DIM_MONTH D05 ON F02.ACCTG_PRD_ID = D05.MTH_ID WHERE D05.MTH_ID BETWEEN '201902' AND '201907' GROUP BY D05.MTH_ID 
MTH_ID
      attribute entityId  tableName fieldName  columnName
0  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
LOSS_RATIO
Empty DataFrame
Columns: [attribute, entityId, tableName, fieldName, columnName]
Index: []
{'MTH_ID': 'Account Date', 'LOSS_RATIO': 'Loss ratio'}
output from sql---
    Account Date  Loss ratio
0        201902       11.96
1        201903        5.54
2        201904       61.28
3        201905        8.77
4        201906       -1.23
5        201907        6.94
df---    Account Date  Loss ratio
0        201902       11.96
1        201903        5.54
2        201904       61.28
3        201905        8.77
4        201906       -1.23
5        201907        6.94
inside length greater than 2
multipleValueList ['Account Date']
singleValueList []
when multipleValues == 1
Account Date
inside Account Date
type---- linechart
inside loop
the temp_string is ---  for time period between August 2019 and February 2019 
the response is --- Loss ratio for time period between August 2019 and February 2019 
Before returning ----- linechart Loss ratio for time period between August 2019 and February 2019 
Loss ratio for time period between August 2019 and February 2019
Response received from viz module-------

the Loss ratio for time period between August 2019 and February 2019
***************************************************
<SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': 'visualization1565088742.2939246.csv', 'groupby': None, 'time_range': ['last'], 'timeperiod': 'MTD', 'vizType': 'linechart'}>
session variables are  
file Name----->visualization1565088742.2939246.csv
intent----->Loss ratio, state---------->None
 date---------['201902', '201908'], agent---------None
 LOB---------None, groupBy----------None
timeRange----->None
***************************************************
FileName in render-------------- Loss ratio
in visualization code
visualization1565088742.2939246.csv
FileName in visualizatiion-------------- linechart
in visualization code
visualization1565088742.2939246.csv
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>
 var margin = {top: 30, right: 20, bottom: 30, left: 50}, 
width = 600 - margin.left - margin.right,
height = 270 - margin.top - margin.bottom; 
var parseDate = d3.time.format("%Y%m").parse; 
var x = d3.time.scale().range([0, width]); 
var y = d3.scale.linear().range([height, 0]); 
var xAxis = d3.svg.axis().scale(x)
.orient("bottom").ticks(5)
.innerTickSize(-height)
.outerTickSize(0)
.tickPadding(10);
var yAxis = d3.svg.axis().scale(y)
.orient("left").ticks(5)
.innerTickSize(-width)
.outerTickSize(0)
.tickPadding(10);
var svg = d3.select("body")
.append("svg")
.attr("width", width + margin.left + margin.right)
.attr("height", height + margin.top + margin.bottom)
.append("g")
.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
d3.csv("/static/visualization1565088742.2939246.csv", function(error, data) {
var headers = d3.keys(data[0])
var valueline = d3.svg.line()
.x(function(d) { return x(d[headers[0]]); })
.y(function(d) { return y(d[headers[1]]); });
data.forEach(function(d) {
d[headers[0]] = parseDate(d[headers[0]]);
d[headers[1]] = +d[headers[1]];
});
x.domain(d3.extent(data, function(d) { return d[headers[0]]; }));
y.domain([0, d3.max(data, function(d) { return d[headers[1]]; })]);
svg.append("path")
.attr("class", "line")
.attr("d", valueline(data));
svg.append("g")
.attr("class", "x axis")
.attr("transform", "translate(0," + height + ")")
.call(xAxis);
svg.append("text")
.attr("x", width / 2 ) 
.attr("y",0 - (margin.top / 2))
.attr("text-anchor", "middle")
.style("text-decoration", "underline")
.text(headers[1]+" by "+ headers[0]);
svg.append("g")
.attr("class", "y axis")
.call(yAxis)
});
</script>
in visualization code
visualization1565088742.2939246.csv
 * Restarting with stat
 * Debugger is active!
 * Debugger PIN: 233-463-959
115.160.217.130 - - [06/Aug/2019 10:58:30] "GET / HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 10:58:30] "GET /static/js/framework7.min.js HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 10:58:34] "GET /mobile HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 10:58:34] "GET /static/css/framework7.ios.min.css HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 10:58:34] "GET /static/css/framework7.ios.colors.min.css HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 10:58:34] "GET /static/css/my-app.css HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 10:58:34] "GET /static/js/my-app.js HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 10:58:35] "GET /static/img/bots/inex.png HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 10:58:36] "GET /clear-session HTTP/1.1" 200 -
WARNING: No match found for input: loss ratio for the last 6 months
WARNING: No match found for input: loss ratio for the last 6 months
115.160.217.130 - - [06/Aug/2019 10:58:51] "POST /converse HTTP/1.1" 200 -
in LossRatio
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: loss ratio for the last 6 months
['Hawaii', 'Security Group Able', 'Business Auto', 'Universal Insurance', 'Armstrong Los Angeles', 'July', 'Farmowners Group', 'Kentucky', 'May', 'Finalist Insurance Group', 'Zorba Przmeleski Specialty Lines', 'No Fault Group', 'Claus Workmanuberseer agency', 'Thomson Jones agency', 'Exceptional Insurance', 'March', 'Whiplash Bros Auto Insurance', 'Cid Vicious agency', 'BusinessOwners', 'Homeowners', 'Derrick Crane agency', 'Commercial insurers', 'Zealot and Zaire Insurance Partners', 'Personal Umbrella', 'Jillian Losttime Workers Comp', 'February', 'November', 'Harliquin and Daughter Insurance', 'Armstrong Cayman Captive Srvs', 'Effective Insurance', 'Risk Management Group', 'Independence Insurance', 'October', 'Carpenters Insurance', 'Armstrong Prof Liab Srvcs', 'New York', 'Security Group Baker', 'Bluto Janckowiz Independent Agent', 'Rubicon Flood Insurance', 'Killarney Creek agency', 'Garagemen Insurance brokerage', 'Uninsurable brokers', 'Armstrong Employer Srvcs', 'Xoria Farm Insurance', 'Occurrence Group', 'Internal Producer Code', 'September', 'Hu Harmless Hier Partners', 'Market Share Managing agency', 'Builders Risk brokers', 'Premier Insurance', 'Nolocontendere brokers', 'Armstrong Premier', 'Security Group', 'Greatwest Bonds and Surety', 'Verity Bonds and Surety', 'Manufacturers Risk', 'Unknown', 'Boiler Specialists', 'Youngblood Insurance', 'Quick Quote Insurance', 'Kennedy Premier', 'Kennedy Mass Market', 'Wisconsin', 'Dimitrios Xenopolus agency', 'Alabama', 'Georgia', 'Drivers Choice Truckers Insurance', 'Personal Auto', 'ACV Property Insurance', 'Lemon Growers', 'Special Form Property brokers', 'Package Partners', 'Openhand brokers', 'Pennsylvania', 'Kennedy Group Services', 'Monoline brokers', 'Johnson and Johnson', 'Armstrong San Diego', 'Internal Portal Code', 'Allrisk Insurance', 'June', 'Massachusetts', 'April', 'December', 'Quad Cities Insurance', 'August', 'January', 'Kearney and OShaugnessy agency', 'Kennedy Strategic Risks', 'Yellowcreek Insurance', 'California']
{}
------Invoking entity and intent recognition module----
loss ratio MTD
----------OutDict {'Intent': 'Loss ratio', 'timeperiod': 'MTD', 'Account Date': ['201902', '201908'], 'time_range': ['last'], 'Region': None, 'Agent': None, 'Line of Business': None, 'groupby': None}
Intent
in loop
setFlag----- 1
in acc date
justbn4--- ['201902', '201908']
just  --- ['201902', '201908']
Go to SQl
Session--------- <SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': None, 'groupby': None, 'level': None, 'time_range': ['last'], 'timeperiod': 'MTD', 'vizType': None}>
Initial dictionary----- <SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': None, 'groupby': None, 'level': None, 'time_range': ['last'], 'timeperiod': 'MTD', 'vizType': None}>
tempColl to be inserted to mapping Info--------- {'attribute': 'Account Date', 'entityId': 'D05', 'tableName': 'DIM_MONTH', 'fieldName': 'MTH_ID', 'columnName': 'D05.MTH_ID'}
      attribute entityId  tableName fieldName  columnName
0  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
{'Account Date': 'D05.MTH_ID'}
in for loop-----------
--------ITem---- Line of Business
in for loop-----------
--------ITem---- Region
in for loop-----------
--------ITem---- Account Date
FROM MAPPING INFO DICT _________________________
not mtd and len 1 and time range in past---- D05.MTH_ID BETWEEN '201902' AND '201907' 
if where not in query---- D05.MTH_ID BETWEEN '201902' AND '201907' 
in for loop-----------
--------ITem---- Agent
Query-- SELECT D05.MTH_ID , cast(isnull(SUM(ISNULL(F02.MTD_IND_PD_AMT + F02.MTD_MED_PD_AMT + F02.MTD_ALAE_PD_AMT + F02.MTD_ULAE_PD_AMT +
F02.MTD_IND_RSRV_CHNG_AMT + F02.MTD_MED_RSRV_CHNG_AMT + 
F02.MTD_ALAE_RSRV_CHNG_AMT + F02.MTD_ULAE_RSRV_CHNG_AMT,0) )
/nullif(sum(F02.MTD_EARNED_PREM_AMT),0)*100,0) as decimal(18,2)) AS LOSS_RATIO FROM V_FACT_PREM_CAL_YR_PRODUCT F02 INNER JOIN DIM_MONTH D05 ON F02.ACCTG_PRD_ID = D05.MTH_ID WHERE D05.MTH_ID BETWEEN '201902' AND '201907' GROUP BY D05.MTH_ID 
MTH_ID
      attribute entityId  tableName fieldName  columnName
0  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
LOSS_RATIO
Empty DataFrame
Columns: [attribute, entityId, tableName, fieldName, columnName]
Index: []
{'MTH_ID': 'Account Date', 'LOSS_RATIO': 'Loss ratio'}
output from sql---
    Account Date  Loss ratio
0        201902       11.96
1        201903        5.54
2        201904       61.28
3        201905        8.77
4        201906       -1.23
5        201907        6.94
df---    Account Date  Loss ratio
0        201902       11.96
1        201903        5.54
2        201904       61.28
3        201905        8.77
4        201906       -1.23
5        201907        6.94
inside length greater than 2
multipleValueList ['Account Date']
singleValueList []
when multipleValues == 1
Account Date
inside Account Date
type---- linechart
inside loop
the temp_string is ---  for time period between August 2019 and February 2019 
the response is --- Loss ratio for time period between August 2019 and February 2019 
Before returning ----- linechart Loss ratio for time period between August 2019 and February 2019 
Loss ratio for time period between August 2019 and February 2019
Response received from viz module-------

the Loss ratio for time period between August 2019 and February 2019
***************************************************
<SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': 'visualization1565089131.0284812.csv', 'groupby': None, 'level': None, 'time_range': ['last'], 'timeperiod': 'MTD', 'vizType': 'linechart'}>
session variables are  
file Name----->visualization1565089131.0284812.csv
intent----->Loss ratio, state---------->None
 date---------['201902', '201908'], agent---------None
 LOB---------None, groupBy----------None
timeRange----->None
***************************************************
FileName in visualizatiion-------------- linechart
in visualization code
visualization1565089131.0284812.csv
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>
 var margin = {top: 30, right: 20, bottom: 30, left: 50}, 
width = 600 - margin.left - margin.right,
height = 270 - margin.top - margin.bottom; 
var parseDate = d3.time.format("%Y%m").parse; 
var x = d3.time.scale().range([0, width]); 
var y = d3.scale.linear().range([height, 0]); 
var xAxis = d3.svg.axis().scale(x)
.orient("bottom").ticks(5)
.innerTickSize(-height)
.outerTickSize(0)
.tickPadding(10);
var yAxis = d3.svg.axis().scale(y)
.orient("left").ticks(5)
.innerTickSize(-width)
.outerTickSize(0)
.tickPadding(10);
var svg = d3.select("body")
.append("svg")
.attr("width", width + margin.left + margin.right)
.attr("height", height + margin.top + margin.bottom)
.append("g")
.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
d3.csv("/static/visualization1565089131.0284812.csv", function(error, data) {
var headers = d3.keys(data[0])
var valueline = d3.svg.line()
.x(function(d) { return x(d[headers[0]]); })
.y(function(d) { return y(d[headers[1]]); });
data.forEach(function(d) {
d[headers[0]] = parseDate(d[headers[0]]);
d[headers[1]] = +d[headers[1]];
});
x.domain(d3.extent(data, function(d) { return d[headers[0]]; }));
y.domain([0, d3.max(data, function(d) { return d[headers[1]]; })]);
svg.append("path")
.attr("class", "line")
.attr("d", valueline(data));
svg.append("g")
.attr("class", "x axis")
.attr("transform", "translate(0," + height + ")")
.call(xAxis);
svg.append("text")
.attr("x", width / 2 ) 
.attr("y",0 - (margin.top / 2))
.attr("text-anchor", "middle")
.style("text-decoration", "underline")
.text(headers[1]+" by "+ headers[0]);
svg.append("g")
.attr("class", "y axis")
.call(yAxis)
});
</script>115.160.217.130 - - [06/Aug/2019 10:58:53] "GET /visualization/linechart HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 10:58:54] "GET /static/visualization1565089131.0284812.csv HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 10:59:07] "GET /visualization/table HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 10:59:07] "GET /static/visualization1565089131.0284812.csv HTTP/1.1" 200 -
137.97.108.46 - - [06/Aug/2019 11:08:25] "GET / HTTP/1.1" 200 -
137.97.108.46 - - [06/Aug/2019 11:08:25] "GET /static/js/framework7.min.js HTTP/1.1" 200 -
137.97.108.46 - - [06/Aug/2019 11:08:26] "GET / HTTP/1.1" 200 -
137.97.108.46 - - [06/Aug/2019 11:08:27] "GET /static/js/framework7.min.js HTTP/1.1" 200 -
137.97.108.46 - - [06/Aug/2019 11:08:29] "GET /mobile HTTP/1.1" 200 -
137.97.108.46 - - [06/Aug/2019 11:08:30] "GET /static/css/framework7.ios.min.css HTTP/1.1" 200 -
137.97.108.46 - - [06/Aug/2019 11:08:30] "GET /static/css/framework7.ios.colors.min.css HTTP/1.1" 200 -
137.97.108.46 - - [06/Aug/2019 11:08:30] "GET /static/css/my-app.css HTTP/1.1" 200 -
137.97.108.46 - - [06/Aug/2019 11:08:30] "GET /static/js/my-app.js HTTP/1.1" 200 -
137.97.108.46 - - [06/Aug/2019 11:08:32] "GET /clear-session HTTP/1.1" 200 -
137.97.108.46 - - [06/Aug/2019 11:08:32] "GET /static/img/bots/inex.png HTTP/1.1" 200 -
137.97.108.46 - - [06/Aug/2019 11:08:33] "GET /favicon.ico HTTP/1.1" 404 -
137.97.108.46 - - [06/Aug/2019 11:09:55] "POST /converse HTTP/1.1" 200 -
137.97.108.46 - - [06/Aug/2019 11:09:58] "POST /text-to-speech HTTP/1.1" 200 -
110.249.212.46 - - [06/Aug/2019 11:24:34] "GET http://110.249.212.46/testget?q=23333&port=8080 HTTP/1.1" 404 -
110.249.212.46 - - [06/Aug/2019 11:24:34] "GET http://110.249.212.46/testget?q=23333&port=8080 HTTP/1.1" 404 -
110.249.212.46 - - [06/Aug/2019 11:24:35] "GET http://110.249.212.46/testget?q=23333&port=8080 HTTP/1.1" 404 -
110.249.212.46 - - [06/Aug/2019 11:24:49] "GET http://110.249.212.46/testget?q=23333&port=8080 HTTP/1.1" 404 -
110.249.212.46 - - [06/Aug/2019 11:24:49] "GET http://110.249.212.46/testget?q=23333&port=8080 HTTP/1.1" 404 -
137.97.108.46 - - [06/Aug/2019 11:30:23] "GET / HTTP/1.1" 200 -
137.97.108.46 - - [06/Aug/2019 11:30:24] "GET /static/js/framework7.min.js HTTP/1.1" 200 -
137.97.108.46 - - [06/Aug/2019 11:30:26] "GET / HTTP/1.1" 200 -
137.97.108.46 - - [06/Aug/2019 11:30:26] "GET /static/js/framework7.min.js HTTP/1.1" 200 -
137.97.108.46 - - [06/Aug/2019 11:30:30] "GET /mobile HTTP/1.1" 200 -
137.97.108.46 - - [06/Aug/2019 11:30:30] "GET /static/css/framework7.ios.colors.min.css HTTP/1.1" 200 -
137.97.108.46 - - [06/Aug/2019 11:30:30] "GET /static/css/framework7.ios.min.css HTTP/1.1" 200 -
137.97.108.46 - - [06/Aug/2019 11:30:30] "GET /static/css/my-app.css HTTP/1.1" 200 -
137.97.108.46 - - [06/Aug/2019 11:30:30] "GET /static/js/my-app.js HTTP/1.1" 200 -
137.97.108.46 - - [06/Aug/2019 11:30:32] "GET /clear-session HTTP/1.1" 200 -
137.97.108.46 - - [06/Aug/2019 11:30:32] "GET /static/img/bots/inex.png HTTP/1.1" 200 -
137.97.108.46 - - [06/Aug/2019 11:30:33] "GET /favicon.ico HTTP/1.1" 404 -
137.97.108.46 - - [06/Aug/2019 11:30:48] "POST /converse HTTP/1.1" 200 -
137.97.108.46 - - [06/Aug/2019 11:30:51] "POST /text-to-speech HTTP/1.1" 200 -
103.75.203.4 - - [06/Aug/2019 11:39:49] "GET /mobile HTTP/1.1" 200 -
103.75.203.4 - - [06/Aug/2019 11:39:50] "GET /static/css/framework7.ios.min.css HTTP/1.1" 200 -
103.75.203.4 - - [06/Aug/2019 11:39:50] "GET /static/css/framework7.ios.colors.min.css HTTP/1.1" 200 -
103.75.203.4 - - [06/Aug/2019 11:39:50] "GET /static/css/my-app.css HTTP/1.1" 200 -
103.75.203.4 - - [06/Aug/2019 11:39:50] "GET /static/js/my-app.js HTTP/1.1" 200 -
103.75.203.4 - - [06/Aug/2019 11:39:50] "GET /static/js/framework7.min.js HTTP/1.1" 200 -
103.75.203.4 - - [06/Aug/2019 11:39:52] "GET /static/img/bots/inex.png HTTP/1.1" 200 -
103.75.203.4 - - [06/Aug/2019 11:39:53] "GET /clear-session HTTP/1.1" 200 -
103.75.203.4 - - [06/Aug/2019 11:39:54] "GET /favicon.ico HTTP/1.1" 404 -
WARNING: No match found for input: reset
115.160.217.130 - - [06/Aug/2019 11:46:49] "POST /converse HTTP/1.1" 200 -

in visualization code
visualization1565089131.0284812.csv
FileName in render-------------- Loss ratio
in visualization code
visualization1565089131.0284812.csv
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: Hello
Hello to you! What can I do for you?
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: Hi
Hi there, what can I do for you?
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: Reset
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: loss ratio for the last 6 months by agent and line of location
['Hawaii', 'Security Group Able', 'Business Auto', 'Universal Insurance', 'Armstrong Los Angeles', 'July', 'Farmowners Group', 'Kentucky', 'May', 'Finalist Insurance Group', 'Zorba Przmeleski Specialty Lines', 'No Fault Group', 'Claus Workmanuberseer agency', 'Thomson Jones agency', 'Exceptional Insurance', 'March', 'Whiplash Bros Auto Insurance', 'Cid Vicious agency', 'BusinessOwners', 'Homeowners', 'Derrick Crane agency', 'Commercial insurers', 'Zealot and Zaire Insurance Partners', 'Personal Umbrella', 'Jillian Losttime Workers Comp', 'February', 'November', 'Harliquin and Daughter Insurance', 'Armstrong Cayman Captive Srvs', 'Effective Insurance', 'Risk Management Group', 'Independence Insurance', 'October', 'Carpenters Insurance', 'Armstrong Prof Liab Srvcs', 'New York', 'Security Group Baker', 'Bluto Janckowiz Independent Agent', 'Rubicon Flood Insurance', 'Killarney Creek agency', 'Garagemen Insurance brokerage', 'Uninsurable brokers', 'Armstrong Employer Srvcs', 'Xoria Farm Insurance', 'Occurrence Group', 'Internal Producer Code', 'September', 'Hu Harmless Hier Partners', 'Market Share Managing agency', 'Builders Risk brokers', 'Premier Insurance', 'Nolocontendere brokers', 'Armstrong Premier', 'Security Group', 'Greatwest Bonds and Surety', 'Verity Bonds and Surety', 'Manufacturers Risk', 'Unknown', 'Boiler Specialists', 'Youngblood Insurance', 'Quick Quote Insurance', 'Kennedy Premier', 'Kennedy Mass Market', 'Wisconsin', 'Dimitrios Xenopolus agency', 'Alabama', 'Georgia', 'Drivers Choice Truckers Insurance', 'Personal Auto', 'ACV Property Insurance', 'Lemon Growers', 'Special Form Property brokers', 'Package Partners', 'Openhand brokers', 'Pennsylvania', 'Kennedy Group Services', 'Monoline brokers', 'Johnson and Johnson', 'Armstrong San Diego', 'Internal Portal Code', 'Allrisk Insurance', 'June', 'Massachusetts', 'April', 'December', 'Quad Cities Insurance', 'August', 'January', 'Kearney and OShaugnessy agency', 'Kennedy Strategic Risks', 'Yellowcreek Insurance', 'California']
{}
------Invoking entity and intent recognition module----
loss ratio MTD
hdshjdqgdg---- by agent and line of location
in agent loop
----------OutDict {'Intent': 'Loss ratio', 'timeperiod': 'MTD', 'Account Date': ['201902', '201908'], 'time_range': ['last'], 'Region': None, 'Agent': None, 'Line of Business': None, 'groupby': ['Agent', 'Region']}
Intent
in loop
setFlag----- 1
in acc date
justbn4--- ['201902', '201908']
just  --- ['201902', '201908']
Go to SQl
Session--------- <SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': None, 'groupby': ['Agent', 'Region'], 'time_range': ['last'], 'timeperiod': 'MTD', 'vizType': None}>
Initial dictionary----- <SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': None, 'groupby': ['Agent', 'Region'], 'time_range': ['last'], 'timeperiod': 'MTD', 'vizType': None}>
tempColl to be inserted to mapping Info--------- {'attribute': 'Region', 'entityId': 'D04', 'tableName': 'DIM_LOC', 'fieldName': 'REGION_CST', 'columnName': 'D04.REGION_CST'}
tempColl to be inserted to mapping Info--------- {'attribute': 'Account Date', 'entityId': 'D05', 'tableName': 'DIM_MONTH', 'fieldName': 'MTH_ID', 'columnName': 'D05.MTH_ID'}
tempColl to be inserted to mapping Info--------- {'attribute': 'Agent', 'entityId': 'D02', 'tableName': 'DIM_AGENT', 'fieldName': 'AGNT_NAME', 'columnName': 'D02.AGNT_NAME'}
      attribute entityId  tableName   fieldName      columnName
0        Region      D04    DIM_LOC  REGION_CST  D04.REGION_CST
1  Account Date      D05  DIM_MONTH      MTH_ID      D05.MTH_ID
2         Agent      D02  DIM_AGENT   AGNT_NAME   D02.AGNT_NAME
{'Region': 'D04.REGION_CST', 'Account Date': 'D05.MTH_ID', 'Agent': 'D02.AGNT_NAME'}
in for loop-----------
--------ITem---- Line of Business
in for loop-----------
--------ITem---- Region
in for loop-----------
--------ITem---- Account Date
FROM MAPPING INFO DICT _________________________
not mtd and len 1 and time range in past---- D05.MTH_ID BETWEEN '201902' AND '201907' 
if where not in query---- D05.MTH_ID BETWEEN '201902' AND '201907' 
in for loop-----------
--------ITem---- Agent
Query-- SELECT D04.REGION_CST ,D05.MTH_ID ,D02.AGNT_NAME , cast(isnull(SUM(ISNULL(F03.MTD_IND_PD_AMT + F03.MTD_MED_PD_AMT + F03.MTD_ALAE_PD_AMT + F03.MTD_ULAE_PD_AMT +
F03.MTD_IND_RSRV_CHNG_AMT + F03.MTD_MED_RSRV_CHNG_AMT + 
F03.MTD_ALAE_RSRV_CHNG_AMT + F03.MTD_ULAE_RSRV_CHNG_AMT,0) )
/nullif(sum(F03.MTD_EARNED_PREM_AMT),0)*100,0) as decimal(18,2)) AS LOSS_RATIO FROM V_FACT_PREM_CAL_YR_BASE F03 INNER JOIN DIM_LOC D04 ON F03.LOC_ID = D04.LOC_ID INNER JOIN DIM_MONTH D05 ON F03.ACCTG_PRD_ID = D05.MTH_ID INNER JOIN DIM_AGENT D02 ON F03.AGNT_ID = D02.AGNT_ID WHERE D05.MTH_ID BETWEEN '201902' AND '201907' GROUP BY D04.REGION_CST ,D05.MTH_ID ,D02.AGNT_NAME 
REGION_CST
  attribute entityId tableName   fieldName      columnName
0    Region      D04   DIM_LOC  REGION_CST  D04.REGION_CST
MTH_ID
      attribute entityId  tableName fieldName  columnName
1  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
AGNT_NAME
  attribute entityId  tableName  fieldName     columnName
2     Agent      D02  DIM_AGENT  AGNT_NAME  D02.AGNT_NAME
LOSS_RATIO
Empty DataFrame
Columns: [attribute, entityId, tableName, fieldName, columnName]
Index: []
{'REGION_CST': 'Region', 'MTH_ID': 'Account Date', 'AGNT_NAME': 'Agent', 'LOSS_RATIO': 'Loss ratio'}
output from sql---
            Region  Account Date                       Agent  Loss ratio
0      California        201902         Armstrong (Premier)        8.40
1      California        201902     Verity Bonds and Surety        0.00
2      California        201903         Armstrong (Premier)        8.38
3      California        201903      Kennedy Group Services        0.00
4      California        201903     Verity Bonds and Surety        0.00
5      California        201904         Armstrong (Premier)       10.36
6      California        201904       Armstrong - San Diego        0.00
7      California        201904      Kennedy Group Services        0.00
8      California        201904     Verity Bonds and Surety        0.00
9      California        201905         Armstrong (Premier)        2.94
10     California        201905       Armstrong - San Diego        0.00
11     California        201905        Internal Portal Code        0.00
12     California        201905      Kennedy Group Services        0.00
13     California        201905     Verity Bonds and Surety        0.00
14     California        201906         Armstrong (Premier)      -27.79
15     California        201906       Armstrong - San Diego        0.00
16     California        201906        Internal Portal Code        0.00
17     California        201906      Kennedy Group Services        0.00
18     California        201906     Verity Bonds and Surety        0.00
19     California        201907         Armstrong (Premier)        6.79
20     California        201907     Verity Bonds and Surety        0.00
21        Georgia        201902     Armstrong - Los Angeles        0.00
22        Georgia        201902     Verity Bonds and Surety        5.00
23        Georgia        201903           Allrisk Insurance        0.00
24        Georgia        201903     Armstrong - Los Angeles        0.00
25        Georgia        201903       Armstrong - San Diego        0.00
26        Georgia        201903     Verity Bonds and Surety       16.00
27        Georgia        201904           Allrisk Insurance      986.84
28        Georgia        201904         Armstrong (Premier)        0.00
29        Georgia        201904     Armstrong - Los Angeles        0.00
..            ...           ...                         ...         ...
70         Hawaii        201907      ACV Property Insurance        0.00
71         Hawaii        201907         Armstrong (Premier)        0.00
72         Hawaii        201907     Armstrong - Los Angeles       44.78
73         Hawaii        201907        Derrick Crane agency        0.00
74         Hawaii        201907        Internal Portal Code        0.00
75         Hawaii        201907     Verity Bonds and Surety        0.00
76       Kentucky        201903         Armstrong (Premier)        0.00
77       Kentucky        201904         Armstrong (Premier)        0.00
78       Kentucky        201905         Armstrong (Premier)        0.00
79       Kentucky        201906         Armstrong (Premier)        0.00
80       Kentucky        201907         Armstrong (Premier)        0.00
81  Massachusetts        201904  Internal Producer Code - 3        0.00
82  Massachusetts        201905  Internal Producer Code - 3        0.00
83  Massachusetts        201906  Internal Producer Code - 3        0.00
84       New York        201905      ACV Property Insurance        0.00
85       New York        201906      ACV Property Insurance        0.00
86        Unknown        201903      ACV Property Insurance        0.00
87        Unknown        201904      ACV Property Insurance     1850.67
88        Unknown        201904         Armstrong (Premier)        0.00
89        Unknown        201905      ACV Property Insurance        0.00
90        Unknown        201905         Armstrong (Premier)        0.00
91        Unknown        201906      ACV Property Insurance        0.00
92        Unknown        201906         Armstrong (Premier)        0.00
93        Unknown        201907      ACV Property Insurance        0.00
94        Unknown        201907         Armstrong (Premier)        0.00
95      Wisconsin        201903         Armstrong (Premier)        0.00
96      Wisconsin        201904         Armstrong (Premier)    -1563.44
97      Wisconsin        201905         Armstrong (Premier)        0.00
98      Wisconsin        201906         Armstrong (Premier)        0.00
99      Wisconsin        201907         Armstrong (Premier)        0.00

[100 rows x 4 columns]WARNING: No match found for input: loss ratio for the last 6 months by agent and line of location
WARNING: No match found for input: loss ratio for the last 6 months by agent and line of location
115.160.217.130 - - [06/Aug/2019 11:47:07] "POST /converse HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 11:47:12] "GET /visualization/table HTTP/1.1" 200 -
115.160.217.130 - - [06/Aug/2019 11:47:13] "GET /static/visualization1565092027.9476862.csv HTTP/1.1" 200 -
31.135.99.160 - - [06/Aug/2019 11:51:52] "GET / HTTP/1.1" 200 -
36.69.111.197 - - [06/Aug/2019 12:01:39] "GET / HTTP/1.1" 200 -
172.104.142.105 - - [06/Aug/2019 13:34:38] "GET /admin/connection/ HTTP/1.1" 404 -
185.176.27.114 - - [06/Aug/2019 13:44:38] "GET / HTTP/1.1" 200 -
181.129.210.244 - - [06/Aug/2019 13:55:24] "GET / HTTP/1.1" 200 -
137.97.76.130 - - [06/Aug/2019 15:43:59] "GET /mobile HTTP/1.1" 200 -
137.97.76.130 - - [06/Aug/2019 15:44:00] "GET /static/css/framework7.ios.min.css HTTP/1.1" 200 -
137.97.76.130 - - [06/Aug/2019 15:44:00] "GET /static/css/framework7.ios.colors.min.css HTTP/1.1" 200 -
137.97.76.130 - - [06/Aug/2019 15:44:00] "GET /static/css/my-app.css HTTP/1.1" 200 -
137.97.76.130 - - [06/Aug/2019 15:44:00] "GET /static/js/framework7.min.js HTTP/1.1" 200 -
137.97.76.130 - - [06/Aug/2019 15:44:00] "GET /static/js/my-app.js HTTP/1.1" 200 -
137.97.76.130 - - [06/Aug/2019 15:44:02] "GET /static/img/bots/inex.png HTTP/1.1" 200 -
137.97.76.130 - - [06/Aug/2019 15:44:03] "GET /clear-session HTTP/1.1" 200 -
137.97.76.130 - - [06/Aug/2019 15:44:03] "GET /favicon.ico HTTP/1.1" 404 -
128.64.129.13 - - [06/Aug/2019 16:36:18] "GET /mobile HTTP/1.1" 200 -
128.64.129.13 - - [06/Aug/2019 16:36:18] "GET /static/css/framework7.ios.min.css HTTP/1.1" 200 -
128.64.129.13 - - [06/Aug/2019 16:36:18] "GET /static/js/framework7.min.js HTTP/1.1" 200 -
128.64.129.13 - - [06/Aug/2019 16:36:18] "GET /static/css/framework7.ios.colors.min.css HTTP/1.1" 200 -
128.64.129.13 - - [06/Aug/2019 16:36:18] "GET /static/css/my-app.css HTTP/1.1" 200 -
128.64.129.13 - - [06/Aug/2019 16:36:18] "GET /static/js/my-app.js HTTP/1.1" 200 -
128.64.129.13 - - [06/Aug/2019 16:36:19] "GET /static/img/bots/inex.png HTTP/1.1" 200 -
128.64.129.13 - - [06/Aug/2019 16:36:19] "GET /clear-session HTTP/1.1" 200 -
128.64.129.13 - - [06/Aug/2019 16:36:19] "GET /favicon.ico HTTP/1.1" 404 -
128.64.129.13 - - [06/Aug/2019 16:36:35] "POST /converse HTTP/1.1" 200 -

df---            Region  Account Date                       Agent  Loss ratio
0      California        201902         Armstrong (Premier)        8.40
1      California        201902     Verity Bonds and Surety        0.00
2      California        201903         Armstrong (Premier)        8.38
3      California        201903      Kennedy Group Services        0.00
4      California        201903     Verity Bonds and Surety        0.00
5      California        201904         Armstrong (Premier)       10.36
6      California        201904       Armstrong - San Diego        0.00
7      California        201904      Kennedy Group Services        0.00
8      California        201904     Verity Bonds and Surety        0.00
9      California        201905         Armstrong (Premier)        2.94
10     California        201905       Armstrong - San Diego        0.00
11     California        201905        Internal Portal Code        0.00
12     California        201905      Kennedy Group Services        0.00
13     California        201905     Verity Bonds and Surety        0.00
14     California        201906         Armstrong (Premier)      -27.79
15     California        201906       Armstrong - San Diego        0.00
16     California        201906        Internal Portal Code        0.00
17     California        201906      Kennedy Group Services        0.00
18     California        201906     Verity Bonds and Surety        0.00
19     California        201907         Armstrong (Premier)        6.79
20     California        201907     Verity Bonds and Surety        0.00
21        Georgia        201902     Armstrong - Los Angeles        0.00
22        Georgia        201902     Verity Bonds and Surety        5.00
23        Georgia        201903           Allrisk Insurance        0.00
24        Georgia        201903     Armstrong - Los Angeles        0.00
25        Georgia        201903       Armstrong - San Diego        0.00
26        Georgia        201903     Verity Bonds and Surety       16.00
27        Georgia        201904           Allrisk Insurance      986.84
28        Georgia        201904         Armstrong (Premier)        0.00
29        Georgia        201904     Armstrong - Los Angeles        0.00
..            ...           ...                         ...         ...
70         Hawaii        201907      ACV Property Insurance        0.00
71         Hawaii        201907         Armstrong (Premier)        0.00
72         Hawaii        201907     Armstrong - Los Angeles       44.78
73         Hawaii        201907        Derrick Crane agency        0.00
74         Hawaii        201907        Internal Portal Code        0.00
75         Hawaii        201907     Verity Bonds and Surety        0.00
76       Kentucky        201903         Armstrong (Premier)        0.00
77       Kentucky        201904         Armstrong (Premier)        0.00
78       Kentucky        201905         Armstrong (Premier)        0.00
79       Kentucky        201906         Armstrong (Premier)        0.00
80       Kentucky        201907         Armstrong (Premier)        0.00
81  Massachusetts        201904  Internal Producer Code - 3        0.00
82  Massachusetts        201905  Internal Producer Code - 3        0.00
83  Massachusetts        201906  Internal Producer Code - 3        0.00
84       New York        201905      ACV Property Insurance        0.00
85       New York        201906      ACV Property Insurance        0.00
86        Unknown        201903      ACV Property Insurance        0.00
87        Unknown        201904      ACV Property Insurance     1850.67
88        Unknown        201904         Armstrong (Premier)        0.00
89        Unknown        201905      ACV Property Insurance        0.00
90        Unknown        201905         Armstrong (Premier)        0.00
91        Unknown        201906      ACV Property Insurance        0.00
92        Unknown        201906         Armstrong (Premier)        0.00
93        Unknown        201907      ACV Property Insurance        0.00
94        Unknown        201907         Armstrong (Premier)        0.00
95      Wisconsin        201903         Armstrong (Premier)        0.00
96      Wisconsin        201904         Armstrong (Premier)    -1563.44
97      Wisconsin        201905         Armstrong (Premier)        0.00
98      Wisconsin        201906         Armstrong (Premier)        0.00
99      Wisconsin        201907         Armstrong (Premier)        0.00

[100 rows x 4 columns]
inside length greater than 2
multipleValueList ['Region', 'Account Date', 'Agent']
singleValueList []
when multipleValues != 1
In multile list except for Account Date
inside Account Date
In multile list except for Account Date
the temp_string is ---  for time period between August 2019 and February 2019 
the response is --- Loss ratio for time period between August 2019 and February 2019 
Before returning ----- table Loss ratio for time period between August 2019 and February 2019 
Loss ratio for time period between August 2019 and February 2019
Response received from viz module-------

the Loss ratio for time period between August 2019 and February 2019 by region,agent
***************************************************
<SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': 'visualization1565092027.9476862.csv', 'groupby': ['Agent', 'Region'], 'time_range': ['last'], 'timeperiod': 'MTD', 'vizType': 'table'}>
session variables are  
file Name----->visualization1565092027.9476862.csv
intent----->Loss ratio, state---------->None
 date---------['201902', '201908'], agent---------None
 LOB---------None, groupBy----------['Agent', 'Region']
timeRange----->None
***************************************************
FileName in render-------------- Loss ratio
in visualization code
visualization1565092027.9476862.csv
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: Samples
Sample
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: Loss ratio for this year so far
['Hawaii', 'Security Group Able', 'Business Auto', 'Universal Insurance', 'Armstrong Los Angeles', 'July', 'Farmowners Group', 'Kentucky', 'May', 'Finalist Insurance Group', 'Zorba Przmeleski Specialty Lines', 'No Fault Group', 'Claus Workmanuberseer agency', 'Thomson Jones agency', 'Exceptional Insurance', 'March', 'Whiplash Bros Auto Insurance', 'Cid Vicious agency', 'BusinessOwners', 'Homeowners', 'Derrick Crane agency', 'Commercial insurers', 'Zealot and Zaire Insurance Partners', 'Personal Umbrella', 'Jillian Losttime Workers Comp', 'February', 'November', 'Harliquin and Daughter Insurance', 'Armstrong Cayman Captive Srvs', 'Effective Insurance', 'Risk Management Group', 'Independence Insurance', 'October', 'Carpenters Insurance', 'Armstrong Prof Liab Srvcs', 'New York', 'Security Group Baker', 'Bluto Janckowiz Independent Agent', 'Rubicon Flood Insurance', 'Killarney Creek agency', 'Garagemen Insurance brokerage', 'Uninsurable brokers', 'Armstrong Employer Srvcs', 'Xoria Farm Insurance', 'Occurrence Group', 'Internal Producer Code', 'September', 'Hu Harmless Hier Partners', 'Market Share Managing agency', 'Builders Risk brokers', 'Premier Insurance', 'Nolocontendere brokers', 'Armstrong Premier', 'Security Group', 'Greatwest Bonds and Surety', 'Verity Bonds and Surety', 'Manufacturers Risk', 'Unknown', 'Boiler Specialists', 'Youngblood Insurance', 'Quick Quote Insurance', 'Kennedy Premier', 'Kennedy Mass Market', 'Wisconsin', 'Dimitrios Xenopolus agency', 'Alabama', 'Georgia', 'Drivers Choice Truckers Insurance', 'Personal Auto', 'ACV Property Insurance', 'Lemon Growers', 'Special Form Property brokers', 'Package Partners', 'Openhand brokers', 'Pennsylvania', 'Kennedy Group Services', 'Monoline brokers', 'Johnson and Johnson', 'Armstrong San Diego', 'Internal Portal Code', 'Allrisk Insurance', 'June', 'Massachusetts', 'April', 'December', 'Quad Cities Insurance', 'August', 'January', 'Kearney and OShaugnessy agency', 'Kennedy Strategic Risks', 'Yellowcreek Insurance', 'California']WARNING: No match found for input: loss ratio for this year so far
WARNING: No match found for input: Loss ratio for this year so far
128.64.129.13 - - [06/Aug/2019 16:36:58] "POST /converse HTTP/1.1" 200 -

{}
------Invoking entity and intent recognition module----
loss ratio YTD
----------OutDict {'Intent': 'Loss ratio', 'timeperiod': 'YTD', 'Account Date': ['201908'], 'time_range': ['this'], 'Region': None, 'Agent': None, 'Line of Business': None, 'groupby': None}
Intent
in loop
setFlag----- 1
in acc date
justbn4--- ['201908']
just  --- ['201908']
Go to SQl
Session--------- <SecureCookieSession {'_permanent': True, 'Intent': 'Loss ratio', 'timeperiod': 'YTD', 'Account Date': ['201908'], 'time_range': ['this'], 'combined': None, 'groupby': None, 'vizType': None, 'fileName': None, 'Region': None, 'Line of Business': None, 'Agent': None}>
Initial dictionary----- <SecureCookieSession {'_permanent': True, 'Intent': 'Loss ratio', 'timeperiod': 'YTD', 'Account Date': ['201908'], 'time_range': ['this'], 'combined': None, 'groupby': None, 'vizType': None, 'fileName': None, 'Region': None, 'Line of Business': None, 'Agent': None}>
tempColl to be inserted to mapping Info--------- {'attribute': 'Account Date', 'entityId': 'D05', 'tableName': 'DIM_MONTH', 'fieldName': 'MTH_ID', 'columnName': 'D05.MTH_ID'}
      attribute entityId  tableName fieldName  columnName
0  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
{'Account Date': 'D05.MTH_ID'}
in for loop-----------
--------ITem---- Line of Business
in for loop-----------
--------ITem---- Region
in for loop-----------
--------ITem---- Account Date
FROM MAPPING INFO DICT _________________________
time period not mtd and len 1 D05.MTH_ID = 201908 
if where not in query---- D05.MTH_ID = 201908 
in for loop-----------
--------ITem---- Agent
Query-- SELECT D05.MTH_ID , cast(isnull(SUM(ISNULL(F02.YTD_IND_PD_AMT + F02.YTD_MED_PD_AMT + F02.YTD_ALAE_PD_AMT + F02.YTD_ULAE_PD_AMT +
F02.YTD_IND_RSRV_CHNG_AMT + F02.YTD_MED_RSRV_CHNG_AMT + 
F02.YTD_ALAE_RSRV_CHNG_AMT + F02.YTD_ULAE_RSRV_CHNG_AMT,0) )
/nullif(sum(F02.YTD_EARNED_PREM_AMT),0)*100,0) as decimal(18,2)) AS LOSS_RATIO FROM V_FACT_PREM_CAL_YR_PRODUCT F02 INNER JOIN DIM_MONTH D05 ON F02.ACCTG_PRD_ID = D05.MTH_ID WHERE D05.MTH_ID = 201908 GROUP BY D05.MTH_ID 
MTH_ID
      attribute entityId  tableName fieldName  columnName
0  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
LOSS_RATIO
Empty DataFrame
Columns: [attribute, entityId, tableName, fieldName, columnName]
Index: []
{'MTH_ID': 'Account Date', 'LOSS_RATIO': 'Loss ratio'}
output from sql---
 Empty DataFrame
Columns: [Account Date, Loss ratio]
Index: []
df--- Empty DataFrame
Columns: [Account Date, Loss ratio]
Index: []
data empty
Before returning ----- nil {'error': 0, 'message': 'No output has been generated from SQL query', 'speechOutput': 'No output has been generated from SQL query'}
Response received from viz module-------

{'error': 0, 'message': 'No output has been generated from SQL query', 'speechOutput': 'No output has been generated from SQL query'}
***************************************************
<SecureCookieSession {'_permanent': True, 'Intent': 'Loss ratio', 'timeperiod': 'YTD', 'Account Date': ['201908'], 'time_range': ['this'], 'combined': None, 'groupby': None, 'vizType': None, 'fileName': None, 'Region': None, 'Line of Business': None, 'Agent': None}>
session variables are  
file Name----->None
intent----->Loss ratio, state---------->None
 date---------['201908'], agent---------None
 LOB---------None, groupBy----------None
timeRange----->None
***************************************************
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: Loss ratio for chicago
['Hawaii', 'Security Group Able', 'Business Auto', 'Universal Insurance', 'Armstrong Los Angeles', 'July', 'Farmowners Group', 'Kentucky', 'May', 'Finalist Insurance Group', 'Zorba Przmeleski Specialty Lines', 'No Fault Group', 'Claus Workmanuberseer agency', 'Thomson Jones agency', 'Exceptional Insurance', 'March', 'Whiplash Bros Auto Insurance', 'Cid Vicious agency', 'BusinessOwners', 'Homeowners', 'Derrick Crane agency', 'Commercial insurers', 'Zealot and Zaire Insurance Partners', 'Personal Umbrella', 'Jillian Losttime Workers Comp', 'February', 'November', 'Harliquin and Daughter Insurance', 'Armstrong Cayman Captive Srvs', 'Effective Insurance', 'Risk Management Group', 'Independence Insurance', 'October', 'Carpenters Insurance', 'Armstrong Prof Liab Srvcs', 'New York', 'Security Group Baker', 'Bluto Janckowiz Independent Agent', 'Rubicon Flood Insurance', 'Killarney Creek agency', 'Garagemen Insurance brokerage', 'Uninsurable brokers', 'Armstrong Employer Srvcs', 'Xoria Farm Insurance', 'Occurrence Group', 'Internal Producer Code', 'September', 'Hu Harmless Hier Partners', 'Market Share Managing agency', 'Builders Risk brokers', 'Premier Insurance', 'Nolocontendere brokers', 'Armstrong Premier', 'Security Group', 'Greatwest Bonds and Surety', 'Verity Bonds and Surety', 'Manufacturers Risk', 'Unknown', 'Boiler Specialists', 'Youngblood Insurance', 'Quick Quote Insurance', 'Kennedy Premier', 'Kennedy Mass Market', 'Wisconsin', 'Dimitrios Xenopolus agency', 'Alabama', 'Georgia', 'Drivers Choice Truckers Insurance', 'Personal Auto', 'ACV Property Insurance', 'Lemon Growers', 'Special Form Property brokers', 'Package Partners', 'Openhand brokers', 'Pennsylvania', 'Kennedy Group Services', 'Monoline brokers', 'Johnson and Johnson', 'Armstrong San Diego', 'Internal Portal Code', 'Allrisk Insurance', 'June', 'Massachusetts', 'April', 'December', 'Quad Cities Insurance', 'August', 'January', 'Kearney and OShaugnessy agency', 'Kennedy Strategic Risks', 'Yellowcreek Insurance', 'California']
{}
------Invoking entity and intent recognition module----
loss ratio YTD
----------OutDict {'Intent': 'Loss ratio', 'timeperiod': 'YTD', 'Account Date': None, 'time_range': None, 'Region': ['chicago'], 'Agent': None, 'Line of Business': None, 'groupby': None}
Intent
in loop
setFlag----- 1
justbn4--- ['201908']
just  --- None
Go to SQl
Session--------- <SecureCookieSession {'Account Date': ['201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': ['chicago'], '_permanent': True, 'combined': None, 'fileName': None, 'groupby': None, 'time_range': ['this'], 'timeperiod': 'YTD', 'vizType': None}>
Initial dictionary----- <SecureCookieSession {'Account Date': ['201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': ['chicago'], '_permanent': True, 'combined': None, 'fileName': None, 'groupby': None, 'time_range': ['this'], 'timeperiod': 'YTD', 'vizType': None}>
tempColl to be inserted to mapping Info--------- {'attribute': 'Region', 'entityId': 'D04', 'tableName': 'DIM_LOC', 'fieldName': 'REGION_CST', 'columnName': 'D04.REGION_CST'}
tempColl to be inserted to mapping Info--------- {'attribute': 'Account Date', 'entityId': 'D05', 'tableName': 'DIM_MONTH', 'fieldName': 'MTH_ID', 'columnName': 'D05.MTH_ID'}
      attribute entityId  tableName   fieldName      columnName
0        Region      D04    DIM_LOC  REGION_CST  D04.REGION_CST
1  Account Date      D05  DIM_MONTH      MTH_ID      D05.MTH_ID
{'Region': 'D04.REGION_CST', 'Account Date': 'D05.MTH_ID'}
in for loop-----------
--------ITem---- Line of Business
in for loop-----------
--------ITem---- Region
FROM MAPPING INFO DICT _________________________
tempstring in item not AccountDtae & len of item 1-- D04.REGION_CST = 'chicago' 
if where not in query---- D04.REGION_CST = 'chicago' 
in for loop-----------
--------ITem---- Account Date
FROM MAPPING INFO DICT _________________________
time period not mtd and len 1 D05.MTH_ID = 201908 
if where in query---- D05.MTH_ID = 201908 
in for loop-----------
--------ITem---- Agent
Query-- SELECT D04.REGION_CST ,D05.MTH_ID , cast(isnull(SUM(ISNULL(F03.YTD_IND_PD_AMT + F03.YTD_MED_PD_AMT + F03.YTD_ALAE_PD_AMT + F03.YTD_ULAE_PD_AMT +
F03.YTD_IND_RSRV_CHNG_AMT + F03.YTD_MED_RSRV_CHNG_AMT + 
F03.YTD_ALAE_RSRV_CHNG_AMT + F03.YTD_ULAE_RSRV_CHNG_AMT,0) )
/nullif(sum(F03.YTD_EARNED_PREM_AMT),0)*100,0) as decimal(18,2)) AS LOSS_RATIO FROM V_FACT_PREM_CAL_YR_BASE F03 INNER JOIN DIM_LOC D04 ON F03.LOC_ID = D04.LOC_ID INNER JOIN DIM_MONTH D05 ON F03.ACCTG_PRD_ID = D05.MTH_ID WHERE D04.REGION_CST = 'chicago' AND D05.MTH_ID = 201908 GROUP BY D04.REGION_CST ,D05.MTH_ID WARNING: No match found for input: loss ratio for chicago
WARNING: No match found for input: Loss ratio for chicago
128.64.129.13 - - [06/Aug/2019 16:37:49] "POST /converse HTTP/1.1" 200 -
176.197.243.52 - - [06/Aug/2019 17:00:33] "GET / HTTP/1.1" 200 -
5.232.223.129 - - [06/Aug/2019 20:14:51] "GET / HTTP/1.1" 200 -
170.84.135.33 - - [06/Aug/2019 23:22:51] "GET / HTTP/1.1" 200 -
209.17.96.154 - - [06/Aug/2019 23:46:22] "GET / HTTP/1.0" 200 -
172.58.200.168 - - [06/Aug/2019 23:48:01] "GET /mobile HTTP/1.1" 200 -
172.58.200.168 - - [06/Aug/2019 23:48:01] "GET /static/css/framework7.ios.colors.min.css HTTP/1.1" 200 -
172.58.200.168 - - [06/Aug/2019 23:48:02] "GET /static/css/framework7.ios.min.css HTTP/1.1" 200 -
172.58.200.168 - - [06/Aug/2019 23:48:02] "GET /static/js/my-app.js HTTP/1.1" 200 -
172.58.200.168 - - [06/Aug/2019 23:48:02] "GET /static/css/my-app.css HTTP/1.1" 200 -
172.58.200.168 - - [06/Aug/2019 23:48:02] "GET /static/js/framework7.min.js HTTP/1.1" 200 -
172.58.200.168 - - [06/Aug/2019 23:48:02] "GET /static/img/bots/inex.png HTTP/1.1" 200 -
172.58.200.168 - - [06/Aug/2019 23:48:02] "GET /clear-session HTTP/1.1" 200 -
172.58.200.168 - - [06/Aug/2019 23:48:02] "GET /favicon.ico HTTP/1.1" 404 -
172.58.200.168 - - [06/Aug/2019 23:48:13] "POST /converse HTTP/1.1" 200 -
172.58.200.168 - - [06/Aug/2019 23:48:25] "POST /converse HTTP/1.1" 200 -
172.58.200.168 - - [06/Aug/2019 23:48:50] "POST /converse HTTP/1.1" 200 -

REGION_CST
  attribute entityId tableName   fieldName      columnName
0    Region      D04   DIM_LOC  REGION_CST  D04.REGION_CST
MTH_ID
      attribute entityId  tableName fieldName  columnName
1  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
LOSS_RATIO
Empty DataFrame
Columns: [attribute, entityId, tableName, fieldName, columnName]
Index: []
{'REGION_CST': 'Region', 'MTH_ID': 'Account Date', 'LOSS_RATIO': 'Loss ratio'}
output from sql---
 Empty DataFrame
Columns: [Region, Account Date, Loss ratio]
Index: []
df--- Empty DataFrame
Columns: [Region, Account Date, Loss ratio]
Index: []
data empty
Before returning ----- nil {'error': 0, 'message': 'No output has been generated from SQL query', 'speechOutput': 'No output has been generated from SQL query'}
Response received from viz module-------

{'error': 0, 'message': 'No output has been generated from SQL query', 'speechOutput': 'No output has been generated from SQL query'}
***************************************************
<SecureCookieSession {'Account Date': ['201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': ['chicago'], '_permanent': True, 'combined': None, 'fileName': None, 'groupby': None, 'time_range': ['this'], 'timeperiod': 'YTD', 'vizType': None}>
session variables are  
file Name----->None
intent----->Loss ratio, state---------->['chicago']
 date---------['201908'], agent---------None
 LOB---------None, groupBy----------None
timeRange----->None
***************************************************
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: Hi
Hi there, what can I do for you?
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: What can you do for me
Sample
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: What is loss ratio
Loss ratio is the total amount of insurance claims paid out to policyholders plus any loss adjustment expenses (LAE) divided by total premium earned over the same period of time, as a percentage. Loss Ratio = (Total Incurred Amount /Earned Premium Amount) * 100
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: What is loss ratio for georgia
['Hawaii', 'Security Group Able', 'Business Auto', 'Universal Insurance', 'Armstrong Los Angeles', 'July', 'Farmowners Group', 'Kentucky', 'May', 'Finalist Insurance Group', 'Zorba Przmeleski Specialty Lines', 'No Fault Group', 'Claus Workmanuberseer agency', 'Thomson Jones agency', 'Exceptional Insurance', 'March', 'Whiplash Bros Auto Insurance', 'Cid Vicious agency', 'BusinessOwners', 'Homeowners', 'Derrick Crane agency', 'Commercial insurers', 'Zealot and Zaire Insurance Partners', 'Personal Umbrella', 'Jillian Losttime Workers Comp', 'February', 'November', 'Harliquin and Daughter Insurance', 'Armstrong Cayman Captive Srvs', 'Effective Insurance', 'Risk Management Group', 'Independence Insurance', 'October', 'Carpenters Insurance', 'Armstrong Prof Liab Srvcs', 'New York', 'Security Group Baker', 'Bluto Janckowiz Independent Agent', 'Rubicon Flood Insurance', 'Killarney Creek agency', 'Garagemen Insurance brokerage', 'Uninsurable brokers', 'Armstrong Employer Srvcs', 'Xoria Farm Insurance', 'Occurrence Group', 'Internal Producer Code', 'September', 'Hu Harmless Hier Partners', 'Market Share Managing agency', 'Builders Risk brokers', 'Premier Insurance', 'Nolocontendere brokers', 'Armstrong Premier', 'Security Group', 'Greatwest Bonds and Surety', 'Verity Bonds and Surety', 'Manufacturers Risk', 'Unknown', 'Boiler Specialists', 'Youngblood Insurance', 'Quick Quote Insurance', 'Kennedy Premier', 'Kennedy Mass Market', 'Wisconsin', 'Dimitrios Xenopolus agency', 'Alabama', 'Georgia', 'Drivers Choice Truckers Insurance', 'Personal Auto', 'ACV Property Insurance', 'Lemon Growers', 'Special Form Property brokers', 'Package Partners', 'Openhand brokers', 'Pennsylvania', 'Kennedy Group Services', 'Monoline brokers', 'Johnson and Johnson', 'Armstrong San Diego', 'Internal Portal Code', 'Allrisk Insurance', 'June', 'Massachusetts', 'April', 'December', 'Quad Cities Insurance', 'August', 'January', 'Kearney and OShaugnessy agency', 'Kennedy Strategic Risks', 'Yellowcreek Insurance', 'California']
{'georgia': 'Georgia'}
------Invoking entity and intent recognition module----
loss ratio YTD
----------OutDict {'Intent': 'Loss ratio', 'timeperiod': 'YTD', 'Account Date': None, 'time_range': None, 'Region': ['georgia'], 'Agent': None, 'Line of Business': None, 'groupby': None}
Intent
in loop
setFlag----- 1
justbn4--- None
just  --- None
in None
last month 2019-07-31
list-- ['201907']
Go to SQl
Session--------- <SecureCookieSession {'_permanent': True, 'level': None, 'Intent': 'Loss ratio', 'Region': ['georgia'], 'combined': None, 'groupby': None, 'vizType': None, 'fileName': None, 'timeperiod': 'YTD', 'Account Date': ['201907'], 'Line of Business': None, 'Agent': None, 'time_range': None}>
Initial dictionary----- <SecureCookieSession {'_permanent': True, 'level': None, 'Intent': 'Loss ratio', 'Region': ['georgia'], 'combined': None, 'groupby': None, 'vizType': None, 'fileName': None, 'timeperiod': 'YTD', 'Account Date': ['201907'], 'Line of Business': None, 'Agent': None, 'time_range': None}>
tempColl to be inserted to mapping Info--------- {'attribute': 'Region', 'entityId': 'D04', 'tableName': 'DIM_LOC', 'fieldName': 'REGION_CST', 'columnName': 'D04.REGION_CST'}
tempColl to be inserted to mapping Info--------- {'attribute': 'Account Date', 'entityId': 'D05', 'tableName': 'DIM_MONTH', 'fieldName': 'MTH_ID', 'columnName': 'D05.MTH_ID'}
      attribute entityId  tableName   fieldName      columnName
0        Region      D04    DIM_LOC  REGION_CST  D04.REGION_CST
1  Account Date      D05  DIM_MONTH      MTH_ID      D05.MTH_ID
{'Region': 'D04.REGION_CST', 'Account Date': 'D05.MTH_ID'}
in for loop-----------
--------ITem---- Line of Business
in for loop-----------
--------ITem---- Region
FROM MAPPING INFO DICT _________________________
tempstring in item not AccountDtae & len of item 1-- D04.REGION_CST = 'georgia' 
if where not in query---- D04.REGION_CST = 'georgia' 
in for loop-----------
--------ITem---- Account Date
FROM MAPPING INFO DICT _________________________
time period not mtd and len 1 D05.MTH_ID = 201907 
if where in query---- D05.MTH_ID = 201907 
in for loop-----------
--------ITem---- Agent
Query-- SELECT D04.REGION_CST ,D05.MTH_ID , cast(isnull(SUM(ISNULL(F03.YTD_IND_PD_AMT + F03.YTD_MED_PD_AMT + F03.YTD_ALAE_PD_AMT + F03.YTD_ULAE_PD_AMT +
F03.YTD_IND_RSRV_CHNG_AMT + F03.YTD_MED_RSRV_CHNG_AMT + 
F03.YTD_ALAE_RSRV_CHNG_AMT + F03.YTD_ULAE_RSRV_CHNG_AMT,0) )
/nullif(sum(F03.YTD_EARNED_PREM_AMT),0)*100,0) as decimal(18,2)) AS LOSS_RATIO FROM V_FACT_PREM_CAL_YR_BASE F03 INNER JOIN DIM_LOC D04 ON F03.LOC_ID = D04.LOC_ID INNER JOIN DIM_MONTH D05 ON F03.ACCTG_PRD_ID = D05.MTH_ID WHERE D04.REGION_CST = 'georgia' AND D05.MTH_ID = 201907 GROUP BY D04.REGION_CST ,D05.MTH_ID 
REGION_CST
  attribute entityId tableName   fieldName      columnName
0    Region      D04   DIM_LOC  REGION_CST  D04.REGION_CST
MTH_ID
      attribute entityId  tableName fieldName  columnName
1  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
LOSS_RATIO
Empty DataFrame
Columns: [attribute, entityId, tableName, fieldName, columnName]
Index: []
{'REGION_CST': 'Region', 'MTH_ID': 'Account Date', 'LOSS_RATIO': 'Loss ratio'}
output from sql---
     Region  Account Date  Loss ratio
0  Georgia        201907       17.23
df---     Region  Account Date  Loss ratio
0  Georgia        201907       17.23
length 3
IN AXES = 1
    Region  Account Date  Loss ratio
0  Georgia        201907       17.23
0    201907
Name: Account Date, dtype: int64
in acct date
201907
in else 2
YTD Loss ratio for Georgia for July 2019 is 17.23%
Before returning ----- text YTD Loss ratio for Georgia for July 2019 is 17.23%
YTD Loss ratio for Georgia for July 2019 is 17.23%
Response received from viz module-------

the YTD Loss ratio for Georgia for July 2019 is 17.23%WARNING: No match found for input: what is loss ratio for georgia
WARNING: No match found for input: What is loss ratio for georgia
172.58.200.168 - - [06/Aug/2019 23:49:21] "POST /converse HTTP/1.1" 200 -
197.157.21.82 - - [07/Aug/2019 00:21:31] "GET / HTTP/1.0" 200 -
185.143.223.8 - - [07/Aug/2019 01:02:07] "GET / HTTP/1.1" 200 -
119.96.168.95 - - [07/Aug/2019 01:51:25] "GET /manager/html HTTP/1.1" 404 -
4.71.145.140 - - [07/Aug/2019 02:32:11] "GET /mobile HTTP/1.1" 200 -
4.71.145.140 - - [07/Aug/2019 02:32:12] "GET /static/css/my-app.css HTTP/1.1" 200 -
4.71.145.140 - - [07/Aug/2019 02:32:12] "GET /static/css/framework7.ios.min.css HTTP/1.1" 200 -
4.71.145.140 - - [07/Aug/2019 02:32:12] "GET /static/css/framework7.ios.colors.min.css HTTP/1.1" 200 -
4.71.145.140 - - [07/Aug/2019 02:32:12] "GET /static/js/framework7.min.js HTTP/1.1" 200 -
4.71.145.140 - - [07/Aug/2019 02:32:12] "GET /static/js/my-app.js HTTP/1.1" 200 -
4.71.145.140 - - [07/Aug/2019 02:32:12] "GET /static/img/bots/inex.png HTTP/1.1" 200 -
4.71.145.140 - - [07/Aug/2019 02:32:12] "GET /clear-session HTTP/1.1" 200 -
WARNING: No match found for input: reset
4.71.145.140 - - [07/Aug/2019 02:32:29] "POST /converse HTTP/1.1" 200 -
4.71.145.140 - - [07/Aug/2019 02:32:54] "POST /converse HTTP/1.1" 200 -
WARNING: No match found for input: loss ratio for hawaii
WARNING: No match found for input: Loss ratio for Hawaii
4.71.145.140 - - [07/Aug/2019 02:33:02] "POST /converse HTTP/1.1" 200 -

Inside response received -text the YTD Loss ratio for Georgia for July 2019 is 17.23%
The YTD Loss ratio for Georgia for July 2019 is 17.23%
***************************************************
<SecureCookieSession {'_permanent': True, 'level': None, 'Intent': 'Loss ratio', 'Region': ['georgia'], 'combined': None, 'groupby': None, 'vizType': 'text', 'fileName': None, 'timeperiod': 'YTD', 'Account Date': ['201907'], 'Line of Business': None, 'Agent': None, 'time_range': None}>
session variables are  
file Name----->None
intent----->Loss ratio, state---------->['georgia']
 date---------['201907'], agent---------None
 LOB---------None, groupBy----------None
timeRange----->None
***************************************************
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: Reset
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: Samples
Sample
in converse
Loading resources/greetings.aiml... done (0.04 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: Loss ratio for Hawaii
['Hawaii', 'Security Group Able', 'Business Auto', 'Universal Insurance', 'Armstrong Los Angeles', 'July', 'Farmowners Group', 'Kentucky', 'May', 'Finalist Insurance Group', 'Zorba Przmeleski Specialty Lines', 'No Fault Group', 'Claus Workmanuberseer agency', 'Thomson Jones agency', 'Exceptional Insurance', 'March', 'Whiplash Bros Auto Insurance', 'Cid Vicious agency', 'BusinessOwners', 'Homeowners', 'Derrick Crane agency', 'Commercial insurers', 'Zealot and Zaire Insurance Partners', 'Personal Umbrella', 'Jillian Losttime Workers Comp', 'February', 'November', 'Harliquin and Daughter Insurance', 'Armstrong Cayman Captive Srvs', 'Effective Insurance', 'Risk Management Group', 'Independence Insurance', 'October', 'Carpenters Insurance', 'Armstrong Prof Liab Srvcs', 'New York', 'Security Group Baker', 'Bluto Janckowiz Independent Agent', 'Rubicon Flood Insurance', 'Killarney Creek agency', 'Garagemen Insurance brokerage', 'Uninsurable brokers', 'Armstrong Employer Srvcs', 'Xoria Farm Insurance', 'Occurrence Group', 'Internal Producer Code', 'September', 'Hu Harmless Hier Partners', 'Market Share Managing agency', 'Builders Risk brokers', 'Premier Insurance', 'Nolocontendere brokers', 'Armstrong Premier', 'Security Group', 'Greatwest Bonds and Surety', 'Verity Bonds and Surety', 'Manufacturers Risk', 'Unknown', 'Boiler Specialists', 'Youngblood Insurance', 'Quick Quote Insurance', 'Kennedy Premier', 'Kennedy Mass Market', 'Wisconsin', 'Dimitrios Xenopolus agency', 'Alabama', 'Georgia', 'Drivers Choice Truckers Insurance', 'Personal Auto', 'ACV Property Insurance', 'Lemon Growers', 'Special Form Property brokers', 'Package Partners', 'Openhand brokers', 'Pennsylvania', 'Kennedy Group Services', 'Monoline brokers', 'Johnson and Johnson', 'Armstrong San Diego', 'Internal Portal Code', 'Allrisk Insurance', 'June', 'Massachusetts', 'April', 'December', 'Quad Cities Insurance', 'August', 'January', 'Kearney and OShaugnessy agency', 'Kennedy Strategic Risks', 'Yellowcreek Insurance', 'California']
{'Hawaii': 'Hawaii'}
------Invoking entity and intent recognition module----
loss ratio YTD
----------OutDict {'Intent': 'Loss ratio', 'timeperiod': 'YTD', 'Account Date': None, 'time_range': None, 'Region': ['hawaii'], 'Agent': None, 'Line of Business': None, 'groupby': None}
Intent
in loop
setFlag----- 1
justbn4--- None
just  --- None
in None
last month 2019-07-31
list-- ['201907']
Go to SQl
Session--------- <SecureCookieSession {'Account Date': ['201907'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': ['hawaii'], '_permanent': True, 'combined': None, 'fileName': None, 'groupby': None, 'level': None, 'time_range': None, 'timeperiod': 'YTD', 'vizType': None}>
Initial dictionary----- <SecureCookieSession {'Account Date': ['201907'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': ['hawaii'], '_permanent': True, 'combined': None, 'fileName': None, 'groupby': None, 'level': None, 'time_range': None, 'timeperiod': 'YTD', 'vizType': None}>
tempColl to be inserted to mapping Info--------- {'attribute': 'Region', 'entityId': 'D04', 'tableName': 'DIM_LOC', 'fieldName': 'REGION_CST', 'columnName': 'D04.REGION_CST'}
tempColl to be inserted to mapping Info--------- {'attribute': 'Account Date', 'entityId': 'D05', 'tableName': 'DIM_MONTH', 'fieldName': 'MTH_ID', 'columnName': 'D05.MTH_ID'}
      attribute entityId  tableName   fieldName      columnName
0        Region      D04    DIM_LOC  REGION_CST  D04.REGION_CST
1  Account Date      D05  DIM_MONTH      MTH_ID      D05.MTH_ID
{'Region': 'D04.REGION_CST', 'Account Date': 'D05.MTH_ID'}
in for loop-----------
--------ITem---- Line of Business
in for loop-----------
--------ITem---- Region
FROM MAPPING INFO DICT _________________________
tempstring in item not AccountDtae & len of item 1-- D04.REGION_CST = 'hawaii' 
if where not in query---- D04.REGION_CST = 'hawaii' 
in for loop-----------
--------ITem---- Account Date
FROM MAPPING INFO DICT _________________________
time period not mtd and len 1 D05.MTH_ID = 201907 
if where in query---- D05.MTH_ID = 201907 
in for loop-----------
--------ITem---- Agent
Query-- SELECT D04.REGION_CST ,D05.MTH_ID , cast(isnull(SUM(ISNULL(F03.YTD_IND_PD_AMT + F03.YTD_MED_PD_AMT + F03.YTD_ALAE_PD_AMT + F03.YTD_ULAE_PD_AMT +
F03.YTD_IND_RSRV_CHNG_AMT + F03.YTD_MED_RSRV_CHNG_AMT + 
F03.YTD_ALAE_RSRV_CHNG_AMT + F03.YTD_ULAE_RSRV_CHNG_AMT,0) )
/nullif(sum(F03.YTD_EARNED_PREM_AMT),0)*100,0) as decimal(18,2)) AS LOSS_RATIO FROM V_FACT_PREM_CAL_YR_BASE F03 INNER JOIN DIM_LOC D04 ON F03.LOC_ID = D04.LOC_ID INNER JOIN DIM_MONTH D05 ON F03.ACCTG_PRD_ID = D05.MTH_ID WHERE D04.REGION_CST = 'hawaii' AND D05.MTH_ID = 201907 GROUP BY D04.REGION_CST ,D05.MTH_ID 
REGION_CST
  attribute entityId tableName   fieldName      columnName
0    Region      D04   DIM_LOC  REGION_CST  D04.REGION_CST
MTH_ID
      attribute entityId  tableName fieldName  columnName
1  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
LOSS_RATIO
Empty DataFrame
Columns: [attribute, entityId, tableName, fieldName, columnName]
Index: []
{'REGION_CST': 'Region', 'MTH_ID': 'Account Date', 'LOSS_RATIO': 'Loss ratio'}
output from sql---
    Region  Account Date  Loss ratio
0  Hawaii        201907      105.03
df---    Region  Account Date  Loss ratio
0  Hawaii        201907      105.03
length 3
IN AXES = 1
   Region  Account Date  Loss ratio
0  Hawaii        201907      105.03
0    201907
Name: Account Date, dtype: int64
in acct date
201907
in else 2
YTD Loss ratio for Hawaii for July 2019 is 105.03%
Before returning ----- text YTD Loss ratio for Hawaii for July 2019 is 105.03%
YTD Loss ratio for Hawaii for July 2019 is 105.03%
Response received from viz module-------

the YTD Loss ratio for Hawaii for July 2019 is 105.03%
Inside response received -text the YTD Loss ratio for Hawaii for July 2019 is 105.03%
The YTD Loss ratio for Hawaii for July 2019 is 105.03%
***************************************************
<SecureCookieSession {'Account Date': ['201907'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': ['hawaii'], '_permanent': True, 'combined': None, 'fileName': None, 'groupby': None, 'level': None, 'time_range': None, 'timeperiod': 'YTD', 'vizType': 'text'}>
session variables are  
file Name----->None
intent----->Loss ratio, state---------->['hawaii']
 date---------['201907'], agent---------None
 LOB---------None, groupBy----------None
timeRange----->None
***************************************************
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: Loss ratio by line if business
['Hawaii', 'Security Group Able', 'Business Auto', 'Universal Insurance', 'Armstrong Los Angeles', 'July', 'Farmowners Group', 'Kentucky', 'May', 'Finalist Insurance Group', 'Zorba Przmeleski Specialty Lines', 'No Fault Group', 'Claus Workmanuberseer agency', 'Thomson Jones agency', 'Exceptional Insurance', 'March', 'Whiplash Bros Auto Insurance', 'Cid Vicious agency', 'BusinessOwners', 'Homeowners', 'Derrick Crane agency', 'Commercial insurers', 'Zealot and Zaire Insurance Partners', 'Personal Umbrella', 'Jillian Losttime Workers Comp', 'February', 'November', 'Harliquin and Daughter Insurance', 'Armstrong Cayman Captive Srvs', 'Effective Insurance', 'Risk Management Group', 'Independence Insurance', 'October', 'Carpenters Insurance', 'Armstrong Prof Liab Srvcs', 'New York', 'Security Group Baker', 'Bluto Janckowiz Independent Agent', 'Rubicon Flood Insurance', 'Killarney Creek agency', 'Garagemen Insurance brokerage', 'Uninsurable brokers', 'Armstrong Employer Srvcs', 'Xoria Farm Insurance', 'Occurrence Group', 'Internal Producer Code', 'September', 'Hu Harmless Hier Partners', 'Market Share Managing agency', 'Builders Risk brokers', 'Premier Insurance', 'Nolocontendere brokers', 'Armstrong Premier', 'Security Group', 'Greatwest Bonds and Surety', 'Verity Bonds and Surety', 'Manufacturers Risk', 'Unknown', 'Boiler Specialists', 'Youngblood Insurance', 'Quick Quote Insurance', 'Kennedy Premier', 'Kennedy Mass Market', 'Wisconsin', 'Dimitrios Xenopolus agency', 'Alabama', 'Georgia', 'Drivers Choice Truckers Insurance', 'Personal Auto', 'ACV Property Insurance', 'Lemon Growers', 'Special Form Property brokers', 'Package Partners', 'Openhand brokers', 'Pennsylvania', 'Kennedy Group Services', 'Monoline brokers', 'Johnson and Johnson', 'Armstrong San Diego', 'Internal Portal Code', 'Allrisk Insurance', 'June', 'Massachusetts', 'April', 'December', 'Quad Cities Insurance', 'August', 'January', 'Kearney and OShaugnessy agency', 'Kennedy Strategic Risks', 'Yellowcreek Insurance', 'California']WARNING: No match found for input: loss ratio by line if business
WARNING: No match found for input: Loss ratio by line if business
4.71.145.140 - - [07/Aug/2019 02:33:24] "POST /converse HTTP/1.1" 200 -

{}
------Invoking entity and intent recognition module----
loss ratio YTD
hdshjdqgdg---- by line if business
----------OutDict {'Intent': 'Loss ratio', 'timeperiod': 'YTD', 'Account Date': None, 'time_range': None, 'Region': None, 'Agent': None, 'Line of Business': None, 'groupby': None}
Intent
in loop
setFlag----- 1
justbn4--- ['201907']
just  --- None
Go to SQl
Session--------- <SecureCookieSession {'Account Date': ['201907'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': ['hawaii'], '_permanent': True, 'combined': None, 'fileName': None, 'groupby': None, 'level': None, 'time_range': None, 'timeperiod': 'YTD', 'vizType': None}>
Initial dictionary----- <SecureCookieSession {'Account Date': ['201907'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': ['hawaii'], '_permanent': True, 'combined': None, 'fileName': None, 'groupby': None, 'level': None, 'time_range': None, 'timeperiod': 'YTD', 'vizType': None}>
tempColl to be inserted to mapping Info--------- {'attribute': 'Region', 'entityId': 'D04', 'tableName': 'DIM_LOC', 'fieldName': 'REGION_CST', 'columnName': 'D04.REGION_CST'}
tempColl to be inserted to mapping Info--------- {'attribute': 'Account Date', 'entityId': 'D05', 'tableName': 'DIM_MONTH', 'fieldName': 'MTH_ID', 'columnName': 'D05.MTH_ID'}
      attribute entityId  tableName   fieldName      columnName
0        Region      D04    DIM_LOC  REGION_CST  D04.REGION_CST
1  Account Date      D05  DIM_MONTH      MTH_ID      D05.MTH_ID
{'Region': 'D04.REGION_CST', 'Account Date': 'D05.MTH_ID'}
in for loop-----------
--------ITem---- Line of Business
in for loop-----------
--------ITem---- Region
FROM MAPPING INFO DICT _________________________
tempstring in item not AccountDtae & len of item 1-- D04.REGION_CST = 'hawaii' 
if where not in query---- D04.REGION_CST = 'hawaii' 
in for loop-----------
--------ITem---- Account Date
FROM MAPPING INFO DICT _________________________
time period not mtd and len 1 D05.MTH_ID = 201907 
if where in query---- D05.MTH_ID = 201907 
in for loop-----------
--------ITem---- Agent
Query-- SELECT D04.REGION_CST ,D05.MTH_ID , cast(isnull(SUM(ISNULL(F03.YTD_IND_PD_AMT + F03.YTD_MED_PD_AMT + F03.YTD_ALAE_PD_AMT + F03.YTD_ULAE_PD_AMT +
F03.YTD_IND_RSRV_CHNG_AMT + F03.YTD_MED_RSRV_CHNG_AMT + 
F03.YTD_ALAE_RSRV_CHNG_AMT + F03.YTD_ULAE_RSRV_CHNG_AMT,0) )
/nullif(sum(F03.YTD_EARNED_PREM_AMT),0)*100,0) as decimal(18,2)) AS LOSS_RATIO FROM V_FACT_PREM_CAL_YR_BASE F03 INNER JOIN DIM_LOC D04 ON F03.LOC_ID = D04.LOC_ID INNER JOIN DIM_MONTH D05 ON F03.ACCTG_PRD_ID = D05.MTH_ID WHERE D04.REGION_CST = 'hawaii' AND D05.MTH_ID = 201907 GROUP BY D04.REGION_CST ,D05.MTH_ID 
REGION_CST
  attribute entityId tableName   fieldName      columnName
0    Region      D04   DIM_LOC  REGION_CST  D04.REGION_CST
MTH_ID
      attribute entityId  tableName fieldName  columnName
1  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
LOSS_RATIO
Empty DataFrame
Columns: [attribute, entityId, tableName, fieldName, columnName]
Index: []
{'REGION_CST': 'Region', 'MTH_ID': 'Account Date', 'LOSS_RATIO': 'Loss ratio'}
output from sql---
    Region  Account Date  Loss ratio
0  Hawaii        201907      105.03
df---    Region  Account Date  Loss ratio
0  Hawaii        201907      105.03
length 3
IN AXES = 1
   Region  Account Date  Loss ratio
0  Hawaii        201907      105.03
0    201907
Name: Account Date, dtype: int64
in acct date
201907
in else 2
YTD Loss ratio for Hawaii for July 2019 is 105.03%
Before returning ----- text YTD Loss ratio for Hawaii for July 2019 is 105.03%
YTD Loss ratio for Hawaii for July 2019 is 105.03%
Response received from viz module-------

the YTD Loss ratio for Hawaii for July 2019 is 105.03%
Inside response received -text the YTD Loss ratio for Hawaii for July 2019 is 105.03%
The YTD Loss ratio for Hawaii for July 2019 is 105.03%
***************************************************
<SecureCookieSession {'Account Date': ['201907'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': ['hawaii'], '_permanent': True, 'combined': None, 'fileName': None, 'groupby': None, 'level': None, 'time_range': None, 'timeperiod': 'YTD', 'vizType': 'text'}>
session variables are  
file Name----->None
intent----->Loss ratio, state---------->['hawaii']
 date---------['201907'], agent---------None
 LOB---------None, groupBy----------None
timeRange----->None
***************************************************
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: Loss ratio by line of business
['Hawaii', 'Security Group Able', 'Business Auto', 'Universal Insurance', 'Armstrong Los Angeles', 'July', 'Farmowners Group', 'Kentucky', 'May', 'Finalist Insurance Group', 'Zorba Przmeleski Specialty Lines', 'No Fault Group', 'Claus Workmanuberseer agency', 'Thomson Jones agency', 'Exceptional Insurance', 'March', 'Whiplash Bros Auto Insurance', 'Cid Vicious agency', 'BusinessOwners', 'Homeowners', 'Derrick Crane agency', 'Commercial insurers', 'Zealot and Zaire Insurance Partners', 'Personal Umbrella', 'Jillian Losttime Workers Comp', 'February', 'November', 'Harliquin and Daughter Insurance', 'Armstrong Cayman Captive Srvs', 'Effective Insurance', 'Risk Management Group', 'Independence Insurance', 'October', 'Carpenters Insurance', 'Armstrong Prof Liab Srvcs', 'New York', 'Security Group Baker', 'Bluto Janckowiz Independent Agent', 'Rubicon Flood Insurance', 'Killarney Creek agency', 'Garagemen Insurance brokerage', 'Uninsurable brokers', 'Armstrong Employer Srvcs', 'Xoria Farm Insurance', 'Occurrence Group', 'Internal Producer Code', 'September', 'Hu Harmless Hier Partners', 'Market Share Managing agency', 'Builders Risk brokers', 'Premier Insurance', 'Nolocontendere brokers', 'Armstrong Premier', 'Security Group', 'Greatwest Bonds and Surety', 'Verity Bonds and Surety', 'Manufacturers Risk', 'Unknown', 'Boiler Specialists', 'Youngblood Insurance', 'Quick Quote Insurance', 'Kennedy Premier', 'Kennedy Mass Market', 'Wisconsin', 'Dimitrios Xenopolus agency', 'Alabama', 'Georgia', 'Drivers Choice Truckers Insurance', 'Personal Auto', 'ACV Property Insurance', 'Lemon Growers', 'Special Form Property brokers', 'Package Partners', 'Openhand brokers', 'Pennsylvania', 'Kennedy Group Services', 'Monoline brokers', 'Johnson and Johnson', 'Armstrong San Diego', 'Internal Portal Code', 'Allrisk Insurance', 'June', 'Massachusetts', 'April', 'December', 'Quad Cities Insurance', 'August', 'January', 'Kearney and OShaugnessy agency', 'Kennedy Strategic Risks', 'Yellowcreek Insurance', 'California']
{}
------Invoking entity and intent recognition module----
loss ratio YTD
hdshjdqgdg---- by line of business
----------OutDict {'Intent': 'Loss ratio', 'timeperiod': 'YTD', 'Account Date': None, 'time_range': None, 'Region': None, 'Agent': None, 'Line of Business': None, 'groupby': ['Line of Business']}
Intent
in loop
setFlag----- 1
justbn4--- ['201907']
just  --- None
Go to SQl
Session--------- <SecureCookieSession {'Account Date': ['201907'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': ['hawaii'], '_permanent': True, 'combined': None, 'fileName': None, 'groupby': ['Line of Business'], 'level': None, 'time_range': None, 'timeperiod': 'YTD', 'vizType': None}>
Initial dictionary----- <SecureCookieSession {'Account Date': ['201907'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': ['hawaii'], '_permanent': True, 'combined': None, 'fileName': None, 'groupby': ['Line of Business'], 'level': None, 'time_range': None, 'timeperiod': 'YTD', 'vizType': None}>
tempColl to be inserted to mapping Info--------- {'attribute': 'Line of Business', 'entityId': 'D01', 'tableName': 'DIM_PRODUCT', 'fieldName': 'CONF_LOB_SHORT_TEXT', 'columnName': 'D01.CONF_LOB_SHORT_TEXT'}
tempColl to be inserted to mapping Info--------- {'attribute': 'Region', 'entityId': 'D04', 'tableName': 'DIM_LOC', 'fieldName': 'REGION_CST', 'columnName': 'D04.REGION_CST'}
tempColl to be inserted to mapping Info--------- {'attribute': 'Account Date', 'entityId': 'D05', 'tableName': 'DIM_MONTH', 'fieldName': 'MTH_ID', 'columnName': 'D05.MTH_ID'}WARNING: No match found for input: loss ratio by line of business
WARNING: No match found for input: Loss ratio by line of business
4.71.145.140 - - [07/Aug/2019 02:33:41] "POST /converse HTTP/1.1" 200 -
4.71.145.140 - - [07/Aug/2019 02:33:43] "GET /visualization/table HTTP/1.1" 200 -
4.71.145.140 - - [07/Aug/2019 02:33:46] "GET /visualization/table HTTP/1.1" 200 -
4.71.145.140 - - [07/Aug/2019 02:33:47] "GET /static/visualization1565145221.768376.csv HTTP/1.1" 200 -
WARNING: No match found for input: reset
4.71.145.140 - - [07/Aug/2019 02:37:14] "POST /converse HTTP/1.1" 200 -
WARNING: No match found for input: reset
4.71.145.140 - - [07/Aug/2019 02:40:28] "POST /converse HTTP/1.1" 200 -
200.73.127.8 - - [07/Aug/2019 02:57:25] "GET / HTTP/1.1" 200 -
WARNING: No match found for input: reset
4.71.145.140 - - [07/Aug/2019 03:32:44] "POST /converse HTTP/1.1" 200 -
4.71.145.140 - - [07/Aug/2019 03:33:02] "POST /converse HTTP/1.1" 200 -

          attribute entityId  ...            fieldName               columnName
0  Line of Business      D01  ...  CONF_LOB_SHORT_TEXT  D01.CONF_LOB_SHORT_TEXT
1            Region      D04  ...           REGION_CST           D04.REGION_CST
2      Account Date      D05  ...               MTH_ID               D05.MTH_ID

[3 rows x 5 columns]
{'Line of Business': 'D01.CONF_LOB_SHORT_TEXT', 'Region': 'D04.REGION_CST', 'Account Date': 'D05.MTH_ID'}
in for loop-----------
--------ITem---- Line of Business
in for loop-----------
--------ITem---- Region
FROM MAPPING INFO DICT _________________________
tempstring in item not AccountDtae & len of item 1-- D04.REGION_CST = 'hawaii' 
if where not in query---- D04.REGION_CST = 'hawaii' 
in for loop-----------
--------ITem---- Account Date
FROM MAPPING INFO DICT _________________________
time period not mtd and len 1 D05.MTH_ID = 201907 
if where in query---- D05.MTH_ID = 201907 
in for loop-----------
--------ITem---- Agent
Query-- SELECT D01.CONF_LOB_SHORT_TEXT ,D04.REGION_CST ,D05.MTH_ID , cast(isnull(SUM(ISNULL(F03.YTD_IND_PD_AMT + F03.YTD_MED_PD_AMT + F03.YTD_ALAE_PD_AMT + F03.YTD_ULAE_PD_AMT +
F03.YTD_IND_RSRV_CHNG_AMT + F03.YTD_MED_RSRV_CHNG_AMT + 
F03.YTD_ALAE_RSRV_CHNG_AMT + F03.YTD_ULAE_RSRV_CHNG_AMT,0) )
/nullif(sum(F03.YTD_EARNED_PREM_AMT),0)*100,0) as decimal(18,2)) AS LOSS_RATIO FROM V_FACT_PREM_CAL_YR_BASE F03 INNER JOIN DIM_PRODUCT D01 ON F03.PRODUCT_ID = D01.PRODUCT_ID INNER JOIN DIM_LOC D04 ON F03.LOC_ID = D04.LOC_ID INNER JOIN DIM_MONTH D05 ON F03.ACCTG_PRD_ID = D05.MTH_ID WHERE D04.REGION_CST = 'hawaii' AND D05.MTH_ID = 201907 GROUP BY D01.CONF_LOB_SHORT_TEXT ,D04.REGION_CST ,D05.MTH_ID 
CONF_LOB_SHORT_TEXT
          attribute entityId  ...            fieldName               columnName
0  Line of Business      D01  ...  CONF_LOB_SHORT_TEXT  D01.CONF_LOB_SHORT_TEXT

[1 rows x 5 columns]
REGION_CST
  attribute entityId tableName   fieldName      columnName
1    Region      D04   DIM_LOC  REGION_CST  D04.REGION_CST
MTH_ID
      attribute entityId  tableName fieldName  columnName
2  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
LOSS_RATIO
Empty DataFrame
Columns: [attribute, entityId, tableName, fieldName, columnName]
Index: []
{'CONF_LOB_SHORT_TEXT': 'Line of Business', 'REGION_CST': 'Region', 'MTH_ID': 'Account Date', 'LOSS_RATIO': 'Loss ratio'}
output from sql---
   Line of Business  Region  Account Date  Loss ratio
0       Homeowners  Hawaii        201907        0.00
1    Personal Auto  Hawaii        201907       91.59
df---   Line of Business  Region  Account Date  Loss ratio
0       Homeowners  Hawaii        201907        0.00
1    Personal Auto  Hawaii        201907       91.59
length of df axes == 2
inside singleValue loop
In multile list except for Account Date
the temp_string is ---  in Hawaii ,  in July 2019 , 
the response is --- Loss ratio in Hawaii ,  in July 2019 , 
Before returning ----- table Loss ratio in Hawaii ,  in July 2019 , 
Loss ratio in Hawaii ,  in July 2019 
Response received from viz module-------

the Loss ratio in Hawaii ,  in July 2019  by line of business
***************************************************
<SecureCookieSession {'Account Date': ['201907'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': ['hawaii'], '_permanent': True, 'combined': None, 'fileName': 'visualization1565145221.768376.csv', 'groupby': ['Line of Business'], 'level': None, 'time_range': None, 'timeperiod': 'YTD', 'vizType': 'table'}>
session variables are  
file Name----->visualization1565145221.768376.csv
intent----->Loss ratio, state---------->['hawaii']
 date---------['201907'], agent---------None
 LOB---------None, groupBy----------['Line of Business']
timeRange----->None
***************************************************
FileName in render-------------- Loss ratio
in visualization code
visualization1565145221.768376.csv
FileName in render-------------- Loss ratio
in visualization code
visualization1565145221.768376.csv
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: Reset
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: Reset
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: Reset
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: Samples
Sample
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: Loss ratio for Hawaii
['Hawaii', 'Security Group Able', 'Business Auto', 'Universal Insurance', 'Armstrong Los Angeles', 'July', 'Farmowners Group', 'Kentucky', 'May', 'Finalist Insurance Group', 'Zorba Przmeleski Specialty Lines', 'No Fault Group', 'Claus Workmanuberseer agency', 'Thomson Jones agency', 'Exceptional Insurance', 'March', 'Whiplash Bros Auto Insurance', 'Cid Vicious agency', 'BusinessOwners', 'Homeowners', 'Derrick Crane agency', 'Commercial insurers', 'Zealot and Zaire Insurance Partners', 'Personal Umbrella', 'Jillian Losttime Workers Comp', 'February', 'November', 'Harliquin and Daughter Insurance', 'Armstrong Cayman Captive Srvs', 'Effective Insurance', 'Risk Management Group', 'Independence Insurance', 'October', 'Carpenters Insurance', 'Armstrong Prof Liab Srvcs', 'New York', 'Security Group Baker', 'Bluto Janckowiz Independent Agent', 'Rubicon Flood Insurance', 'Killarney Creek agency', 'Garagemen Insurance brokerage', 'Uninsurable brokers', 'Armstrong Employer Srvcs', 'Xoria Farm Insurance', 'Occurrence Group', 'Internal Producer Code', 'September', 'Hu Harmless Hier Partners', 'Market Share Managing agency', 'Builders Risk brokers', 'Premier Insurance', 'Nolocontendere brokers', 'Armstrong Premier', 'Security Group', 'Greatwest Bonds and Surety', 'Verity Bonds and Surety', 'Manufacturers Risk', 'Unknown', 'Boiler Specialists', 'Youngblood Insurance', 'Quick Quote Insurance', 'Kennedy Premier', 'Kennedy Mass Market', 'Wisconsin', 'Dimitrios Xenopolus agency', 'Alabama', 'Georgia', 'Drivers Choice Truckers Insurance', 'Personal Auto', 'ACV Property Insurance', 'Lemon Growers', 'Special Form Property brokers', 'Package Partners', 'Openhand brokers', 'Pennsylvania', 'Kennedy Group Services', 'Monoline brokers', 'Johnson and Johnson', 'Armstrong San Diego', 'Internal Portal Code', 'Allrisk Insurance', 'June', 'Massachusetts', 'April', 'December', 'Quad Cities Insurance', 'August', 'January', 'Kearney and OShaugnessy agency', 'Kennedy Strategic Risks', 'Yellowcreek Insurance', 'California']
{'Hawaii': 'Hawaii'}
------Invoking entity and intent recognition module----
loss ratio YTD
----------OutDict {'Intent': 'Loss ratio', 'timeperiod': 'YTD', 'Account Date': None, 'time_range': None, 'Region': ['hawaii'], 'Agent': None, 'Line of Business': None, 'groupby': None}
Intent
in loop
setFlag----- 1
justbn4--- None
just  --- None
in None
last month 2019-07-31
list-- ['201907']
Go to SQl
Session--------- <SecureCookieSession {'Account Date': ['201907'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': ['hawaii'], '_permanent': True, 'combined': None, 'fileName': None, 'groupby': None, 'time_range': None, 'timeperiod': 'YTD', 'vizType': None}>
Initial dictionary----- <SecureCookieSession {'Account Date': ['201907'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': ['hawaii'], '_permanent': True, 'combined': None, 'fileName': None, 'groupby': None, 'time_range': None, 'timeperiod': 'YTD', 'vizType': None}>
tempColl to be inserted to mapping Info--------- {'attribute': 'Region', 'entityId': 'D04', 'tableName': 'DIM_LOC', 'fieldName': 'REGION_CST', 'columnName': 'D04.REGION_CST'}
tempColl to be inserted to mapping Info--------- {'attribute': 'Account Date', 'entityId': 'D05', 'tableName': 'DIM_MONTH', 'fieldName': 'MTH_ID', 'columnName': 'D05.MTH_ID'}
      attribute entityId  tableName   fieldName      columnName
0        Region      D04    DIM_LOC  REGION_CST  D04.REGION_CST
1  Account Date      D05  DIM_MONTH      MTH_ID      D05.MTH_IDWARNING: No match found for input: loss ratio for hawaii
WARNING: No match found for input: Loss ratio for Hawaii
4.71.145.140 - - [07/Aug/2019 03:33:18] "POST /converse HTTP/1.1" 200 -

{'Region': 'D04.REGION_CST', 'Account Date': 'D05.MTH_ID'}
in for loop-----------
--------ITem---- Line of Business
in for loop-----------
--------ITem---- Region
FROM MAPPING INFO DICT _________________________
tempstring in item not AccountDtae & len of item 1-- D04.REGION_CST = 'hawaii' 
if where not in query---- D04.REGION_CST = 'hawaii' 
in for loop-----------
--------ITem---- Account Date
FROM MAPPING INFO DICT _________________________
time period not mtd and len 1 D05.MTH_ID = 201907 
if where in query---- D05.MTH_ID = 201907 
in for loop-----------
--------ITem---- Agent
Query-- SELECT D04.REGION_CST ,D05.MTH_ID , cast(isnull(SUM(ISNULL(F03.YTD_IND_PD_AMT + F03.YTD_MED_PD_AMT + F03.YTD_ALAE_PD_AMT + F03.YTD_ULAE_PD_AMT +
F03.YTD_IND_RSRV_CHNG_AMT + F03.YTD_MED_RSRV_CHNG_AMT + 
F03.YTD_ALAE_RSRV_CHNG_AMT + F03.YTD_ULAE_RSRV_CHNG_AMT,0) )
/nullif(sum(F03.YTD_EARNED_PREM_AMT),0)*100,0) as decimal(18,2)) AS LOSS_RATIO FROM V_FACT_PREM_CAL_YR_BASE F03 INNER JOIN DIM_LOC D04 ON F03.LOC_ID = D04.LOC_ID INNER JOIN DIM_MONTH D05 ON F03.ACCTG_PRD_ID = D05.MTH_ID WHERE D04.REGION_CST = 'hawaii' AND D05.MTH_ID = 201907 GROUP BY D04.REGION_CST ,D05.MTH_ID 
REGION_CST
  attribute entityId tableName   fieldName      columnName
0    Region      D04   DIM_LOC  REGION_CST  D04.REGION_CST
MTH_ID
      attribute entityId  tableName fieldName  columnName
1  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
LOSS_RATIO
Empty DataFrame
Columns: [attribute, entityId, tableName, fieldName, columnName]
Index: []
{'REGION_CST': 'Region', 'MTH_ID': 'Account Date', 'LOSS_RATIO': 'Loss ratio'}
output from sql---
    Region  Account Date  Loss ratio
0  Hawaii        201907      105.03
df---    Region  Account Date  Loss ratio
0  Hawaii        201907      105.03
length 3
IN AXES = 1
   Region  Account Date  Loss ratio
0  Hawaii        201907      105.03
0    201907
Name: Account Date, dtype: int64
in acct date
201907
in else 2
YTD Loss ratio for Hawaii for July 2019 is 105.03%
Before returning ----- text YTD Loss ratio for Hawaii for July 2019 is 105.03%
YTD Loss ratio for Hawaii for July 2019 is 105.03%
Response received from viz module-------

the YTD Loss ratio for Hawaii for July 2019 is 105.03%
Inside response received -text the YTD Loss ratio for Hawaii for July 2019 is 105.03%
The YTD Loss ratio for Hawaii for July 2019 is 105.03%
***************************************************
<SecureCookieSession {'Account Date': ['201907'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': ['hawaii'], '_permanent': True, 'combined': None, 'fileName': None, 'groupby': None, 'time_range': None, 'timeperiod': 'YTD', 'vizType': 'text'}>
session variables are  
file Name----->None
intent----->Loss ratio, state---------->['hawaii']
 date---------['201907'], agent---------None
 LOB---------None, groupBy----------None
timeRange----->None
***************************************************
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: Loss ratio by agent
['Hawaii', 'Security Group Able', 'Business Auto', 'Universal Insurance', 'Armstrong Los Angeles', 'July', 'Farmowners Group', 'Kentucky', 'May', 'Finalist Insurance Group', 'Zorba Przmeleski Specialty Lines', 'No Fault Group', 'Claus Workmanuberseer agency', 'Thomson Jones agency', 'Exceptional Insurance', 'March', 'Whiplash Bros Auto Insurance', 'Cid Vicious agency', 'BusinessOwners', 'Homeowners', 'Derrick Crane agency', 'Commercial insurers', 'Zealot and Zaire Insurance Partners', 'Personal Umbrella', 'Jillian Losttime Workers Comp', 'February', 'November', 'Harliquin and Daughter Insurance', 'Armstrong Cayman Captive Srvs', 'Effective Insurance', 'Risk Management Group', 'Independence Insurance', 'October', 'Carpenters Insurance', 'Armstrong Prof Liab Srvcs', 'New York', 'Security Group Baker', 'Bluto Janckowiz Independent Agent', 'Rubicon Flood Insurance', 'Killarney Creek agency', 'Garagemen Insurance brokerage', 'Uninsurable brokers', 'Armstrong Employer Srvcs', 'Xoria Farm Insurance', 'Occurrence Group', 'Internal Producer Code', 'September', 'Hu Harmless Hier Partners', 'Market Share Managing agency', 'Builders Risk brokers', 'Premier Insurance', 'Nolocontendere brokers', 'Armstrong Premier', 'Security Group', 'Greatwest Bonds and Surety', 'Verity Bonds and Surety', 'Manufacturers Risk', 'Unknown', 'Boiler Specialists', 'Youngblood Insurance', 'Quick Quote Insurance', 'Kennedy Premier', 'Kennedy Mass Market', 'Wisconsin', 'Dimitrios Xenopolus agency', 'Alabama', 'Georgia', 'Drivers Choice Truckers Insurance', 'Personal Auto', 'ACV Property Insurance', 'Lemon Growers', 'Special Form Property brokers', 'Package Partners', 'Openhand brokers', 'Pennsylvania', 'Kennedy Group Services', 'Monoline brokers', 'Johnson and Johnson', 'Armstrong San Diego', 'Internal Portal Code', 'Allrisk Insurance', 'June', 'Massachusetts', 'April', 'December', 'Quad Cities Insurance', 'August', 'January', 'Kearney and OShaugnessy agency', 'Kennedy Strategic Risks', 'Yellowcreek Insurance', 'California']
{}
------Invoking entity and intent recognition module----
loss ratio YTD
hdshjdqgdg---- by agent
in agent loop
----------OutDict {'Intent': 'Loss ratio', 'timeperiod': 'YTD', 'Account Date': None, 'time_range': None, 'Region': None, 'Agent': None, 'Line of Business': None, 'groupby': ['Agent']}
Intent
in loop
setFlag----- 1
justbn4--- ['201907']
just  --- None
Go to SQl
Session--------- <SecureCookieSession {'Account Date': ['201907'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': ['hawaii'], '_permanent': True, 'combined': None, 'fileName': None, 'groupby': ['Agent'], 'time_range': None, 'timeperiod': 'YTD', 'vizType': None}>
Initial dictionary----- <SecureCookieSession {'Account Date': ['201907'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': ['hawaii'], '_permanent': True, 'combined': None, 'fileName': None, 'groupby': ['Agent'], 'time_range': None, 'timeperiod': 'YTD', 'vizType': None}>
tempColl to be inserted to mapping Info--------- {'attribute': 'Region', 'entityId': 'D04', 'tableName': 'DIM_LOC', 'fieldName': 'REGION_CST', 'columnName': 'D04.REGION_CST'}
tempColl to be inserted to mapping Info--------- {'attribute': 'Account Date', 'entityId': 'D05', 'tableName': 'DIM_MONTH', 'fieldName': 'MTH_ID', 'columnName': 'D05.MTH_ID'}
tempColl to be inserted to mapping Info--------- {'attribute': 'Agent', 'entityId': 'D02', 'tableName': 'DIM_AGENT', 'fieldName': 'AGNT_NAME', 'columnName': 'D02.AGNT_NAME'}
      attribute entityId  tableName   fieldName      columnName
0        Region      D04    DIM_LOC  REGION_CST  D04.REGION_CST
1  Account Date      D05  DIM_MONTH      MTH_ID      D05.MTH_ID
2         Agent      D02  DIM_AGENT   AGNT_NAME   D02.AGNT_NAME
{'Region': 'D04.REGION_CST', 'Account Date': 'D05.MTH_ID', 'Agent': 'D02.AGNT_NAME'}
in for loop-----------
--------ITem---- Line of Business
in for loop-----------
--------ITem---- Region
FROM MAPPING INFO DICT _________________________
tempstring in item not AccountDtae & len of item 1-- D04.REGION_CST = 'hawaii' 
if where not in query---- D04.REGION_CST = 'hawaii' 
in for loop-----------
--------ITem---- Account Date
FROM MAPPING INFO DICT _________________________
time period not mtd and len 1 D05.MTH_ID = 201907 
if where in query---- D05.MTH_ID = 201907 
in for loop-----------
--------ITem---- Agent
Query-- SELECT D04.REGION_CST ,D05.MTH_ID ,D02.AGNT_NAME , cast(isnull(SUM(ISNULL(F03.YTD_IND_PD_AMT + F03.YTD_MED_PD_AMT + F03.YTD_ALAE_PD_AMT + F03.YTD_ULAE_PD_AMT +
F03.YTD_IND_RSRV_CHNG_AMT + F03.YTD_MED_RSRV_CHNG_AMT + 
F03.YTD_ALAE_RSRV_CHNG_AMT + F03.YTD_ULAE_RSRV_CHNG_AMT,0) )
/nullif(sum(F03.YTD_EARNED_PREM_AMT),0)*100,0) as decimal(18,2)) AS LOSS_RATIO FROM V_FACT_PREM_CAL_YR_BASE F03 INNER JOIN DIM_LOC D04 ON F03.LOC_ID = D04.LOC_ID INNER JOIN DIM_MONTH D05 ON F03.ACCTG_PRD_ID = D05.MTH_ID INNER JOIN DIM_AGENT D02 ON F03.AGNT_ID = D02.AGNT_ID WHERE D04.REGION_CST = 'hawaii' AND D05.MTH_ID = 201907 GROUP BY D04.REGION_CST ,D05.MTH_ID ,D02.AGNT_NAME 
REGION_CST
  attribute entityId tableName   fieldName      columnName
0    Region      D04   DIM_LOC  REGION_CST  D04.REGION_CSTWARNING: No match found for input: loss ratio by agent
WARNING: No match found for input: Loss ratio by agent
4.71.145.140 - - [07/Aug/2019 03:33:52] "POST /converse HTTP/1.1" 200 -
4.71.145.140 - - [07/Aug/2019 03:33:55] "GET /visualization/barchart HTTP/1.1" 200 -
4.71.145.140 - - [07/Aug/2019 03:33:56] "GET /static/visualization1565148832.050143.csv HTTP/1.1" 200 -
4.71.145.140 - - [07/Aug/2019 03:34:27] "GET /visualization/table HTTP/1.1" 200 -
4.71.145.140 - - [07/Aug/2019 03:34:28] "GET /static/visualization1565148832.050143.csv HTTP/1.1" 200 -
185.41.248.172 - - [07/Aug/2019 04:43:37] "GET / HTTP/1.1" 200 -
218.61.16.142 - - [07/Aug/2019 04:45:08] "GET /manager/html HTTP/1.1" 404 -
 * Detected change in '/home/eyuser/iNex_v5/visualizations_module.py', reloading

MTH_ID
      attribute entityId  tableName fieldName  columnName
1  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
AGNT_NAME
  attribute entityId  tableName  fieldName     columnName
2     Agent      D02  DIM_AGENT  AGNT_NAME  D02.AGNT_NAME
LOSS_RATIO
Empty DataFrame
Columns: [attribute, entityId, tableName, fieldName, columnName]
Index: []
{'REGION_CST': 'Region', 'MTH_ID': 'Account Date', 'AGNT_NAME': 'Agent', 'LOSS_RATIO': 'Loss ratio'}
output from sql---
    Region  Account Date                    Agent  Loss ratio
0  Hawaii        201907   ACV Property Insurance      305.57
1  Hawaii        201907      Armstrong (Premier)        0.00
2  Hawaii        201907  Armstrong - Los Angeles       19.47
3  Hawaii        201907     Derrick Crane agency        0.00
4  Hawaii        201907     Internal Portal Code        0.00
5  Hawaii        201907  Verity Bonds and Surety       30.55
df---    Region  Account Date                    Agent  Loss ratio
0  Hawaii        201907   ACV Property Insurance      305.57
1  Hawaii        201907      Armstrong (Premier)        0.00
2  Hawaii        201907  Armstrong - Los Angeles       19.47
3  Hawaii        201907     Derrick Crane agency        0.00
4  Hawaii        201907     Internal Portal Code        0.00
5  Hawaii        201907  Verity Bonds and Surety       30.55
inside length greater than 2
multipleValueList ['Agent']
singleValueList ['Region', 'Account Date']
inside singleValue loop
when multipleValues == 1
Agent
IN else condition except for Account date
type---- barchart
inside loop
inside Account date in multiple value list
the temp_string is ---  in Hawaii ,  in July 2019 , 
the response is --- Loss ratio in Hawaii ,  in July 2019 , 
Before returning ----- barchart Loss ratio in Hawaii ,  in July 2019 , 
Loss ratio in Hawaii ,  in July 2019 
Response received from viz module-------

the Loss ratio in Hawaii ,  in July 2019  by agent
***************************************************
<SecureCookieSession {'Account Date': ['201907'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': ['hawaii'], '_permanent': True, 'combined': None, 'fileName': 'visualization1565148832.050143.csv', 'groupby': ['Agent'], 'time_range': None, 'timeperiod': 'YTD', 'vizType': 'barchart'}>
session variables are  
file Name----->visualization1565148832.050143.csv
intent----->Loss ratio, state---------->['hawaii']
 date---------['201907'], agent---------None
 LOB---------None, groupBy----------['Agent']
timeRange----->None
***************************************************
FileName in render-------------- Loss ratio
in visualization code
visualization1565148832.050143.csv
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>
var margin = {top: 100, right: 50, bottom: 250, left: 150},
width = 1000 - margin.left - margin.right,
height = 700 - margin.top - margin.bottom;
var x = d3.scale.ordinal().rangeRoundBands([0, width], .05);
var y = d3.scale.linear().range([height, 0]);
var xAxis = d3.svg.axis().scale(x)
.orient("bottom");
var yAxis = d3.svg.axis().scale(y)
.orient("left")
.innerTickSize(-width)
.outerTickSize(0)
.tickPadding(10);
var svg = d3.select("body").append("svg")
.attr("width", width + margin.left + margin.right)
.attr("height", height + margin.top + margin.bottom)
.append("g")
.attr("transform",
"translate(" + margin.left + "," + margin.top + ")");
d3.csv("/static/visualization1565148832.050143.csv", function(error, data) {
var headers = d3.keys(data[0])
if (error) {
throw error;
}
data.forEach(function(d)
{
d[headers[1]] = +d[headers[1]];
});
x.domain(data.map(function(d)
{
return d[headers[0]];
}));
y.domain([0, d3.max(data, function(d) {
return d[headers[1]];
})]);
svg.append("g")
.attr("class", "x axis")
.attr("transform", "translate(0," + height + ")")
.call(xAxis)
.selectAll("text")
.style("text-anchor", "end")
.attr("dx", "-.8em")
.attr("dy", ".15em")
.attr("transform", "rotate(-45)")
;
svg.append("g")
.attr("class", "y axis")
.call(yAxis)
.append("text")
.attr("transform", "rotate(-360)")
.attr("y", 10)
.attr("dy", "-1em")
.style("text-anchor", "end")
.text(headers[1]);
svg.append("text")
.attr("x", width / 2 ) 
.attr("y",0 - (margin.top / 2))
.attr("text-anchor", "middle")
.style("text-decoration", "underline")
.text(headers[1]+" by "+ headers[0]);
svg.selectAll(".bar")
.data(data)
.enter()
.append("rect")
.style("fill", "#ffe600")
.attr("class", "bar")
.attr("x", function(d)
{
return x(d[headers[0]]);
})
.attr("width", x.rangeBand())
.attr("y", function(d)
{
return y(d[headers[1]]);
})
.attr("height", function(d)
{
return height - y(d[headers[1]]); });
svg.selectAll("text.bar")
.data(data)
.enter().append("text")
.attr("class", "bar")
.attr("text-anchor", "middle")
.attr("x", function(d)
{
return x(d[headers[0]]) + x.rangeBand() / 2;})
.attr("y", function(d)
{
return y(d[headers[1]]) ;})
.text(function(d)
{
return d[headers[1]];});
function type(d)
{
y(d[headers[1]]) = +y(d[headers[1]]);
return d;
}
});
</script>
in visualization code
visualization1565148832.050143.csv
FileName in render-------------- Loss ratio
in visualization code
visualization1565148832.050143.csv
 * Restarting with stat
 * Debugger is active!
 * Debugger PIN: 233-463-959
115.160.217.130 - - [07/Aug/2019 05:36:42] "GET / HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:36:43] "GET /static/js/framework7.min.js HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:36:43] "GET / HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:36:44] "GET /static/js/framework7.min.js HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:36:47] "GET /mobile HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:36:47] "GET /static/css/framework7.ios.min.css HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:36:48] "GET /static/css/framework7.ios.colors.min.css HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:36:48] "GET /static/css/my-app.css HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:36:48] "GET /static/js/my-app.js HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:36:48] "GET /static/img/bots/inex.png HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:36:49] "GET /clear-session HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:36:49] "GET /favicon.ico HTTP/1.1" 404 -
WARNING: No match found for input: loss ratio trend for past 6 months
WARNING: No match found for input: loss ratio trend for past 6 months
115.160.217.130 - - [07/Aug/2019 05:37:07] "POST /converse HTTP/1.1" 200 -
in LossRatio
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: loss ratio trend for past 6 months
['Hu Harmless Hier Partners', 'Personal Umbrella', 'Johnson and Johnson', 'Unknown', 'October', 'June', 'Thomson Jones agency', 'Killarney Creek agency', 'Effective Insurance', 'January', 'September', 'Claus Workmanuberseer agency', 'Carpenters Insurance', 'Garagemen Insurance brokerage', 'Uninsurable brokers', 'Georgia', 'Armstrong Premier', 'Security Group Able', 'Premier Insurance', 'Drivers Choice Truckers Insurance', 'Armstrong Cayman Captive Srvs', 'Finalist Insurance Group', 'Kennedy Mass Market', 'Kentucky', 'Rubicon Flood Insurance', 'Dimitrios Xenopolus agency', 'BusinessOwners', 'Bluto Janckowiz Independent Agent', 'ACV Property Insurance', 'Manufacturers Risk', 'Boiler Specialists', 'August', 'Package Partners', 'Wisconsin', 'Kennedy Premier', 'Harliquin and Daughter Insurance', 'Armstrong Employer Srvcs', 'Hawaii', 'Monoline brokers', 'Security Group', 'Quad Cities Insurance', 'Occurrence Group', 'Whiplash Bros Auto Insurance', 'Builders Risk brokers', 'Verity Bonds and Surety', 'Armstrong Los Angeles', 'Quick Quote Insurance', 'Farmowners Group', 'Nolocontendere brokers', 'Internal Producer Code', 'December', 'Personal Auto', 'No Fault Group', 'April', 'February', 'New York', 'Commercial insurers', 'Derrick Crane agency', 'Openhand brokers', 'Pennsylvania', 'Armstrong San Diego', 'Massachusetts', 'Universal Insurance', 'Business Auto', 'Independence Insurance', 'Xoria Farm Insurance', 'July', 'Lemon Growers', 'May', 'Homeowners', 'November', 'Risk Management Group', 'Kennedy Group Services', 'Security Group Baker', 'Armstrong Prof Liab Srvcs', 'Kennedy Strategic Risks', 'Jillian Losttime Workers Comp', 'March', 'California', 'Alabama', 'Yellowcreek Insurance', 'Zealot and Zaire Insurance Partners', 'Cid Vicious agency', 'Greatwest Bonds and Surety', 'Market Share Managing agency', 'Internal Portal Code', 'Allrisk Insurance', 'Kearney and OShaugnessy agency', 'Special Form Property brokers', 'Youngblood Insurance', 'Zorba Przmeleski Specialty Lines', 'Exceptional Insurance']
{}
------Invoking entity and intent recognition module----
loss ratio MTD
----------OutDict {'Intent': 'Loss ratio', 'timeperiod': 'MTD', 'Account Date': ['201902', '201908'], 'time_range': ['past'], 'Region': None, 'Agent': None, 'Line of Business': None, 'groupby': None}
Intent
in loop
setFlag----- 1
in acc date
justbn4--- ['201902', '201908']
just  --- ['201902', '201908']
Go to SQl
Session--------- <SecureCookieSession {'_permanent': True, 'Intent': 'Loss ratio', 'timeperiod': 'MTD', 'Account Date': ['201902', '201908'], 'time_range': ['past'], 'combined': None, 'groupby': None, 'vizType': None, 'fileName': None, 'Region': None, 'Line of Business': None, 'Agent': None}>
Initial dictionary----- <SecureCookieSession {'_permanent': True, 'Intent': 'Loss ratio', 'timeperiod': 'MTD', 'Account Date': ['201902', '201908'], 'time_range': ['past'], 'combined': None, 'groupby': None, 'vizType': None, 'fileName': None, 'Region': None, 'Line of Business': None, 'Agent': None}>
tempColl to be inserted to mapping Info--------- {'attribute': 'Account Date', 'entityId': 'D05', 'tableName': 'DIM_MONTH', 'fieldName': 'MTH_ID', 'columnName': 'D05.MTH_ID'}
      attribute entityId  tableName fieldName  columnName
0  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
{'Account Date': 'D05.MTH_ID'}
in for loop-----------
--------ITem---- Line of Business
in for loop-----------
--------ITem---- Region
in for loop-----------
--------ITem---- Account Date
FROM MAPPING INFO DICT _________________________
not mtd and len 1 and time range in past---- D05.MTH_ID BETWEEN '201902' AND '201907' 
if where not in query---- D05.MTH_ID BETWEEN '201902' AND '201907' 
in for loop-----------
--------ITem---- Agent
Query-- SELECT D05.MTH_ID , cast(isnull(SUM(ISNULL(F02.MTD_IND_PD_AMT + F02.MTD_MED_PD_AMT + F02.MTD_ALAE_PD_AMT + F02.MTD_ULAE_PD_AMT +
F02.MTD_IND_RSRV_CHNG_AMT + F02.MTD_MED_RSRV_CHNG_AMT + 
F02.MTD_ALAE_RSRV_CHNG_AMT + F02.MTD_ULAE_RSRV_CHNG_AMT,0) )
/nullif(sum(F02.MTD_EARNED_PREM_AMT),0)*100,0) as decimal(18,2)) AS LOSS_RATIO FROM V_FACT_PREM_CAL_YR_PRODUCT F02 INNER JOIN DIM_MONTH D05 ON F02.ACCTG_PRD_ID = D05.MTH_ID WHERE D05.MTH_ID BETWEEN '201902' AND '201907' GROUP BY D05.MTH_ID 
MTH_ID
      attribute entityId  tableName fieldName  columnName
0  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
LOSS_RATIO
Empty DataFrame
Columns: [attribute, entityId, tableName, fieldName, columnName]
Index: []
{'MTH_ID': 'Account Date', 'LOSS_RATIO': 'Loss ratio'}
output from sql---
    Account Date  Loss ratio
0        201902       11.96
1        201903        5.54
2        201904       61.28
3        201905        8.77
4        201906       -1.23
5        201907        6.94
df---    Account Date  Loss ratio
0        201902       11.96
1        201903        5.54
2        201904       61.28
3        201905        8.77
4        201906       -1.23
5        201907        6.94
inside length greater than 2
multipleValueList ['Account Date']
singleValueList []
when multipleValues == 1
Account Date
inside Account Date
type---- linechart
inside loop
the temp_string is ---  for time period between August 2019 and February 2019 
the response is --- Loss ratio for time period between August 2019 and February 2019 
Before returning ----- linechart Loss ratio for time period between August 2019 and February 2019 
Loss ratio for time period between August 2019 and February 2019
Response received from viz module-------

the Loss ratio for time period between August 2019 and February 2019
***************************************************
<SecureCookieSession {'_permanent': True, 'Intent': 'Loss ratio', 'timeperiod': 'MTD', 'Account Date': ['201902', '201908'], 'time_range': ['past'], 'combined': None, 'groupby': None, 'vizType': 'linechart', 'fileName': 'visualization1565156227.6537678.csv', 'Region': None, 'Line of Business': None, 'Agent': None}>
session variables are  
file Name----->visualization1565156227.6537678.csv
intent----->Loss ratio, state---------->None
 date---------['201902', '201908'], agent---------None
 LOB---------None, groupBy----------None
timeRange----->None
***************************************************
FileName in visualizatiion-------------- linechart
in visualization code
visualization1565156227.6537678.csv
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>
 var margin = {top: 50, right: 30, bottom: 30, left: 50}, 
width = 768 - margin.left - margin.right,
height = 400 - margin.top - margin.bottom; 
var parseDate = d3.time.format("%Y%m").parse; 
var x = d3.time.scale().range([0, width]); 
var y = d3.scale.linear().range([height, 0]); 
var xAxis = d3.svg.axis().scale(x)
.orient("bottom").ticks(5)
.innerTickSize(-height)
.outerTickSize(0)
.tickPadding(10);
var yAxis = d3.svg.axis().scale(y)
.orient("left").ticks(5)
.innerTickSize(-width)
.outerTickSize(0)
.tickPadding(10);
var svg = d3.select("body")
.append("svg")
.attr("width", width + margin.left + margin.right)
.attr("height", height + margin.top + margin.bottom)
.append("g")
.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
d3.csv("/static/visualization1565156227.6537678.csv", function(error, data) {
var headers = d3.keys(data[0])
var valueline = d3.svg.line()
.x(function(d) { return x(d[headers[0]]); })
.y(function(d) { return y(d[headers[1]]); });
data.forEach(function(d) {
d[headers[0]] = parseDate(d[headers[0]]);
d[headers[1]] = +d[headers[1]];
});
x.domain(d3.extent(data, function(d) { return d[headers[0]]; }));
y.domain([0, d3.max(data, function(d) { return d[headers[1]]; })]);
svg.append("path")
.attr("class", "line")
.attr("d", valueline(data));
svg.append("g")
.attr("class", "x axis")
.attr("transform", "translate(0," + height + ")")
.call(xAxis);
svg.append("text")
.attr("x", width / 2 ) 
.attr("y",0 - (margin.top / 2))
.attr("text-anchor", "middle")
.style("text-decoration", "underline")
.text(headers[1]+" by "+ headers[0]);
svg.append("g")
.attr("class", "y axis")
.call(yAxis)
.append("text")
.attr("transform", "rotate(-90)")
.attr("y", -20)
.attr("dy", "-1.5em")
.attr("font-family", "eyinterstate")
.attr("font-size", "12px")
.style("text-anchor", "end")
.text(headers[1]);
svg.append("g")
.classed("labels-group", true)
.selectAll("text")
.data(data)
.enter().append("text")
.classed("label", true)
.attr({
"x": function(d, i) {
return x(d[headers[0]]);
},
"y": function(d, i) {
return y(d[headers[1]]);
},
})
.text(function(d, i) {
return d[headers[1]];
});
svg.append("text")
.attr("transform", "translate(" + (width + 3) + "," + y(data[0][headers[1]]) + ")")
.attr("dy", ".35em")
.attr("text-anchor", "start")
.attr("font-family", "eyinterstate")
.attr("font-size", "12px")
.style("fill", "white")
.text(headers[1]);
});
</script>115.160.217.130 - - [07/Aug/2019 05:37:11] "GET /visualization/linechart HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:37:12] "GET /visualization/linechart HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:37:13] "GET /static/visualization1565156227.6537678.csv HTTP/1.1" 200 -

in visualization code
visualization1565156227.6537678.csv
FileName in visualizatiion-------------- linechart
in visualization code
visualization1565156227.6537678.csv
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>
 var margin = {top: 50, right: 30, bottom: 30, left: 50}, 
width = 768 - margin.left - margin.right,
height = 400 - margin.top - margin.bottom; 
var parseDate = d3.time.format("%Y%m").parse; 
var x = d3.time.scale().range([0, width]); 
var y = d3.scale.linear().range([height, 0]); 
var xAxis = d3.svg.axis().scale(x)
.orient("bottom").ticks(5)
.innerTickSize(-height)
.outerTickSize(0)
.tickPadding(10);
var yAxis = d3.svg.axis().scale(y)
.orient("left").ticks(5)
.innerTickSize(-width)
.outerTickSize(0)
.tickPadding(10);
var svg = d3.select("body")
.append("svg")
.attr("width", width + margin.left + margin.right)
.attr("height", height + margin.top + margin.bottom)
.append("g")
.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
d3.csv("/static/visualization1565156227.6537678.csv", function(error, data) {
var headers = d3.keys(data[0])
var valueline = d3.svg.line()
.x(function(d) { return x(d[headers[0]]); })
.y(function(d) { return y(d[headers[1]]); });
data.forEach(function(d) {
d[headers[0]] = parseDate(d[headers[0]]);
d[headers[1]] = +d[headers[1]];
});
x.domain(d3.extent(data, function(d) { return d[headers[0]]; }));
y.domain([0, d3.max(data, function(d) { return d[headers[1]]; })]);
svg.append("path")
.attr("class", "line")
.attr("d", valueline(data));
svg.append("g")
.attr("class", "x axis")
.attr("transform", "translate(0," + height + ")")
.call(xAxis);
svg.append("text")
.attr("x", width / 2 ) 
.attr("y",0 - (margin.top / 2))
.attr("text-anchor", "middle")
.style("text-decoration", "underline")
.text(headers[1]+" by "+ headers[0]);
svg.append("g")
.attr("class", "y axis")
.call(yAxis)
.append("text")
.attr("transform", "rotate(-90)")
.attr("y", -20)
.attr("dy", "-1.5em")
.attr("font-family", "eyinterstate")
.attr("font-size", "12px")
.style("text-anchor", "end")
.text(headers[1]);
svg.append("g")
.classed("labels-group", true)
.selectAll("text")
.data(data)
.enter().append("text")
.classed("label", true)
.attr({
"x": function(d, i) {
return x(d[headers[0]]);
},
"y": function(d, i) {
return y(d[headers[1]]);
},
})
.text(function(d, i) {
return d[headers[1]];
});
svg.append("text")
.attr("transform", "translate(" + (width + 3) + "," + y(data[0][headers[1]]) + ")")
.attr("dy", ".35em")
.attr("text-anchor", "start")
.attr("font-family", "eyinterstate")
.attr("font-size", "12px")
.style("fill", "white")
.text(headers[1]);
});
</script>
in visualization code
visualization1565156227.6537678.csv
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: loss ratio trend by agent
['Hu Harmless Hier Partners', 'Personal Umbrella', 'Johnson and Johnson', 'Unknown', 'October', 'June', 'Thomson Jones agency', 'Killarney Creek agency', 'Effective Insurance', 'January', 'September', 'Claus Workmanuberseer agency', 'Carpenters Insurance', 'Garagemen Insurance brokerage', 'Uninsurable brokers', 'Georgia', 'Armstrong Premier', 'Security Group Able', 'Premier Insurance', 'Drivers Choice Truckers Insurance', 'Armstrong Cayman Captive Srvs', 'Finalist Insurance Group', 'Kennedy Mass Market', 'Kentucky', 'Rubicon Flood Insurance', 'Dimitrios Xenopolus agency', 'BusinessOwners', 'Bluto Janckowiz Independent Agent', 'ACV Property Insurance', 'Manufacturers Risk', 'Boiler Specialists', 'August', 'Package Partners', 'Wisconsin', 'Kennedy Premier', 'Harliquin and Daughter Insurance', 'Armstrong Employer Srvcs', 'Hawaii', 'Monoline brokers', 'Security Group', 'Quad Cities Insurance', 'Occurrence Group', 'Whiplash Bros Auto Insurance', 'Builders Risk brokers', 'Verity Bonds and Surety', 'Armstrong Los Angeles', 'Quick Quote Insurance', 'Farmowners Group', 'Nolocontendere brokers', 'Internal Producer Code', 'December', 'Personal Auto', 'No Fault Group', 'April', 'February', 'New York', 'Commercial insurers', 'Derrick Crane agency', 'Openhand brokers', 'Pennsylvania', 'Armstrong San Diego', 'Massachusetts', 'Universal Insurance', 'Business Auto', 'Independence Insurance', 'Xoria Farm Insurance', 'July', 'Lemon Growers', 'May', 'Homeowners', 'November', 'Risk Management Group', 'Kennedy Group Services', 'Security Group Baker', 'Armstrong Prof Liab Srvcs', 'Kennedy Strategic Risks', 'Jillian Losttime Workers Comp', 'March', 'California', 'Alabama', 'Yellowcreek Insurance', 'Zealot and Zaire Insurance Partners', 'Cid Vicious agency', 'Greatwest Bonds and Surety', 'Market Share Managing agency', 'Internal Portal Code', 'Allrisk Insurance', 'Kearney and OShaugnessy agency', 'Special Form Property brokers', 'Youngblood Insurance', 'Zorba Przmeleski Specialty Lines', 'Exceptional Insurance']
{}
------Invoking entity and intent recognition module----
loss ratio MTD
hdshjdqgdg---- by agent
in agent loop
----------OutDict {'Intent': 'Loss ratio', 'timeperiod': 'MTD', 'Account Date': None, 'time_range': None, 'Region': None, 'Agent': None, 'Line of Business': None, 'groupby': ['Agent']}
Intent
in loop
setFlag----- 1
justbn4--- ['201902', '201908']
just  --- None
Go to SQl
Session--------- <SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': None, 'groupby': ['Agent'], 'time_range': ['past'], 'timeperiod': 'MTD', 'vizType': None}>
Initial dictionary----- <SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': None, 'groupby': ['Agent'], 'time_range': ['past'], 'timeperiod': 'MTD', 'vizType': None}>
tempColl to be inserted to mapping Info--------- {'attribute': 'Account Date', 'entityId': 'D05', 'tableName': 'DIM_MONTH', 'fieldName': 'MTH_ID', 'columnName': 'D05.MTH_ID'}
tempColl to be inserted to mapping Info--------- {'attribute': 'Agent', 'entityId': 'D02', 'tableName': 'DIM_AGENT', 'fieldName': 'AGNT_NAME', 'columnName': 'D02.AGNT_NAME'}
      attribute entityId  tableName  fieldName     columnName
0  Account Date      D05  DIM_MONTH     MTH_ID     D05.MTH_ID
1         Agent      D02  DIM_AGENT  AGNT_NAME  D02.AGNT_NAME
{'Account Date': 'D05.MTH_ID', 'Agent': 'D02.AGNT_NAME'}
in for loop-----------
--------ITem---- Line of Business
in for loop-----------
--------ITem---- Region
in for loop-----------
--------ITem---- Account Date
FROM MAPPING INFO DICT _________________________
not mtd and len 1 and time range in past---- D05.MTH_ID BETWEEN '201902' AND '201907' 
if where not in query---- D05.MTH_ID BETWEEN '201902' AND '201907' 
in for loop-----------
--------ITem---- Agent
Query-- SELECT D05.MTH_ID ,D02.AGNT_NAME , cast(isnull(SUM(ISNULL(F01.MTD_IND_PD_AMT + F01.MTD_MED_PD_AMT + F01.MTD_ALAE_PD_AMT + F01.MTD_ULAE_PD_AMT +
F01.MTD_IND_RSRV_CHNG_AMT + F01.MTD_MED_RSRV_CHNG_AMT + 
F01.MTD_ALAE_RSRV_CHNG_AMT + F01.MTD_ULAE_RSRV_CHNG_AMT,0) )
/nullif(sum(F01.MTD_EARNED_PREM_AMT),0)*100,0) as decimal(18,2)) AS LOSS_RATIO FROM V_FACT_PREM_CAL_YR F01 INNER JOIN DIM_MONTH D05 ON F01.ACCTG_PRD_ID = D05.MTH_ID INNER JOIN DIM_AGENT D02 ON F01.AGNT_ID = D02.AGNT_ID WHERE D05.MTH_ID BETWEEN '201902' AND '201907' GROUP BY D05.MTH_ID ,D02.AGNT_NAME 
MTH_ID
      attribute entityId  tableName fieldName  columnName
0  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
AGNT_NAME
  attribute entityId  tableName  fieldName     columnName
1     Agent      D02  DIM_AGENT  AGNT_NAME  D02.AGNT_NAME
LOSS_RATIO
Empty DataFrame
Columns: [attribute, entityId, tableName, fieldName, columnName]
Index: []
{'MTH_ID': 'Account Date', 'AGNT_NAME': 'Agent', 'LOSS_RATIO': 'Loss ratio'}
output from sql---
     Account Date                       Agent  Loss ratio
0         201903      ACV Property Insurance        0.00
1         201904      ACV Property Insurance      907.30
2         201905      ACV Property Insurance        0.00
3         201906      ACV Property Insurance        0.00
4         201907      ACV Property Insurance        0.00
5         201903           Allrisk Insurance        0.00
6         201904           Allrisk Insurance      986.84
7         201905           Allrisk Insurance        0.00
8         201906           Allrisk Insurance        0.00
9         201907           Allrisk Insurance        0.00
10        201902         Armstrong (Premier)        8.40
11        201903         Armstrong (Premier)        2.74
12        201904         Armstrong (Premier)      -53.29
13        201905         Armstrong (Premier)        1.63
14        201906         Armstrong (Premier)       -6.48
15        201907         Armstrong (Premier)        5.85
16        201902     Armstrong - Los Angeles       60.00
17        201903     Armstrong - Los Angeles       80.11
18        201904     Armstrong - Los Angeles       34.59
19        201905     Armstrong - Los Angeles       48.23
20        201906     Armstrong - Los Angeles       -4.36
21        201907     Armstrong - Los Angeles       44.78
22        201903       Armstrong - San Diego        0.00
23        201904       Armstrong - San Diego        0.00
24        201905       Armstrong - San Diego        0.00
25        201906       Armstrong - San Diego        0.00
26        201904        Derrick Crane agency        0.00
27        201905        Derrick Crane agency        0.00
28        201906        Derrick Crane agency        0.00
29        201907        Derrick Crane agency        0.00
30        201903        Internal Portal Code        0.00
31        201904        Internal Portal Code        0.00
32        201905        Internal Portal Code        0.00
33        201906        Internal Portal Code        0.00
34        201907        Internal Portal Code        0.00
35        201904  Internal Producer Code - 3        0.00
36        201905  Internal Producer Code - 3        0.00
37        201906  Internal Producer Code - 3        0.00
38        201903      Kennedy Group Services        0.00
39        201904      Kennedy Group Services        0.00
40        201905      Kennedy Group Services        0.00
41        201906      Kennedy Group Services        0.00
42        201902     Verity Bonds and Surety        6.80
43        201903     Verity Bonds and Surety       17.60
44        201904     Verity Bonds and Surety        2.93
45        201905     Verity Bonds and Surety        5.05
46        201906     Verity Bonds and Surety       -0.58
47        201907     Verity Bonds and Surety        2.19WARNING: No match found for input: loss ratio trend by agent
WARNING: No match found for input: loss ratio trend by agent
115.160.217.130 - - [07/Aug/2019 05:37:57] "POST /converse HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:43:24] "GET / HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:43:24] "GET /static/js/framework7.min.js HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:43:25] "GET / HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:43:25] "GET /static/js/framework7.min.js HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:43:28] "GET /mobile HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:43:29] "GET /static/css/framework7.ios.min.css HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:43:29] "GET /static/css/my-app.css HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:43:29] "GET /static/js/my-app.js HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:43:29] "GET /static/css/framework7.ios.colors.min.css HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:43:31] "GET /clear-session HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:43:31] "GET /static/img/bots/inex.png HTTP/1.1" 200 -

df---     Account Date                       Agent  Loss ratio
0         201903      ACV Property Insurance        0.00
1         201904      ACV Property Insurance      907.30
2         201905      ACV Property Insurance        0.00
3         201906      ACV Property Insurance        0.00
4         201907      ACV Property Insurance        0.00
5         201903           Allrisk Insurance        0.00
6         201904           Allrisk Insurance      986.84
7         201905           Allrisk Insurance        0.00
8         201906           Allrisk Insurance        0.00
9         201907           Allrisk Insurance        0.00
10        201902         Armstrong (Premier)        8.40
11        201903         Armstrong (Premier)        2.74
12        201904         Armstrong (Premier)      -53.29
13        201905         Armstrong (Premier)        1.63
14        201906         Armstrong (Premier)       -6.48
15        201907         Armstrong (Premier)        5.85
16        201902     Armstrong - Los Angeles       60.00
17        201903     Armstrong - Los Angeles       80.11
18        201904     Armstrong - Los Angeles       34.59
19        201905     Armstrong - Los Angeles       48.23
20        201906     Armstrong - Los Angeles       -4.36
21        201907     Armstrong - Los Angeles       44.78
22        201903       Armstrong - San Diego        0.00
23        201904       Armstrong - San Diego        0.00
24        201905       Armstrong - San Diego        0.00
25        201906       Armstrong - San Diego        0.00
26        201904        Derrick Crane agency        0.00
27        201905        Derrick Crane agency        0.00
28        201906        Derrick Crane agency        0.00
29        201907        Derrick Crane agency        0.00
30        201903        Internal Portal Code        0.00
31        201904        Internal Portal Code        0.00
32        201905        Internal Portal Code        0.00
33        201906        Internal Portal Code        0.00
34        201907        Internal Portal Code        0.00
35        201904  Internal Producer Code - 3        0.00
36        201905  Internal Producer Code - 3        0.00
37        201906  Internal Producer Code - 3        0.00
38        201903      Kennedy Group Services        0.00
39        201904      Kennedy Group Services        0.00
40        201905      Kennedy Group Services        0.00
41        201906      Kennedy Group Services        0.00
42        201902     Verity Bonds and Surety        6.80
43        201903     Verity Bonds and Surety       17.60
44        201904     Verity Bonds and Surety        2.93
45        201905     Verity Bonds and Surety        5.05
46        201906     Verity Bonds and Surety       -0.58
47        201907     Verity Bonds and Surety        2.19
inside length greater than 2
multipleValueList ['Account Date', 'Agent']
singleValueList []
when multipleValues != 1
inside Account Date
In multile list except for Account Date
the temp_string is ---  for time period between August 2019 and February 2019 
the response is --- Loss ratio for time period between August 2019 and February 2019 
Before returning ----- table Loss ratio for time period between August 2019 and February 2019 
Loss ratio for time period between August 2019 and February 2019
Response received from viz module-------

the Loss ratio for time period between August 2019 and February 2019 by agent
***************************************************
<SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': 'visualization1565156277.936631.csv', 'groupby': ['Agent'], 'time_range': ['past'], 'timeperiod': 'MTD', 'vizType': 'table'}>
session variables are  
file Name----->visualization1565156277.936631.csv
intent----->Loss ratio, state---------->None
 date---------['201902', '201908'], agent---------None
 LOB---------None, groupBy----------['Agent']
timeRange----->None
***************************************************
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: loss ratio trend for past 6 months
['Hu Harmless Hier Partners', 'Personal Umbrella', 'Johnson and Johnson', 'Unknown', 'October', 'June', 'Thomson Jones agency', 'Killarney Creek agency', 'Effective Insurance', 'January', 'September', 'Claus Workmanuberseer agency', 'Carpenters Insurance', 'Garagemen Insurance brokerage', 'Uninsurable brokers', 'Georgia', 'Armstrong Premier', 'Security Group Able', 'Premier Insurance', 'Drivers Choice Truckers Insurance', 'Armstrong Cayman Captive Srvs', 'Finalist Insurance Group', 'Kennedy Mass Market', 'Kentucky', 'Rubicon Flood Insurance', 'Dimitrios Xenopolus agency', 'BusinessOwners', 'Bluto Janckowiz Independent Agent', 'ACV Property Insurance', 'Manufacturers Risk', 'Boiler Specialists', 'August', 'Package Partners', 'Wisconsin', 'Kennedy Premier', 'Harliquin and Daughter Insurance', 'Armstrong Employer Srvcs', 'Hawaii', 'Monoline brokers', 'Security Group', 'Quad Cities Insurance', 'Occurrence Group', 'Whiplash Bros Auto Insurance', 'Builders Risk brokers', 'Verity Bonds and Surety', 'Armstrong Los Angeles', 'Quick Quote Insurance', 'Farmowners Group', 'Nolocontendere brokers', 'Internal Producer Code', 'December', 'Personal Auto', 'No Fault Group', 'April', 'February', 'New York', 'Commercial insurers', 'Derrick Crane agency', 'Openhand brokers', 'Pennsylvania', 'Armstrong San Diego', 'Massachusetts', 'Universal Insurance', 'Business Auto', 'Independence Insurance', 'Xoria Farm Insurance', 'July', 'Lemon Growers', 'May', 'Homeowners', 'November', 'Risk Management Group', 'Kennedy Group Services', 'Security Group Baker', 'Armstrong Prof Liab Srvcs', 'Kennedy Strategic Risks', 'Jillian Losttime Workers Comp', 'March', 'California', 'Alabama', 'Yellowcreek Insurance', 'Zealot and Zaire Insurance Partners', 'Cid Vicious agency', 'Greatwest Bonds and Surety', 'Market Share Managing agency', 'Internal Portal Code', 'Allrisk Insurance', 'Kearney and OShaugnessy agency', 'Special Form Property brokers', 'Youngblood Insurance', 'Zorba Przmeleski Specialty Lines', 'Exceptional Insurance']
{}
------Invoking entity and intent recognition module----
loss ratio MTD
----------OutDict {'Intent': 'Loss ratio', 'timeperiod': 'MTD', 'Account Date': ['201902', '201908'], 'time_range': ['past'], 'Region': None, 'Agent': None, 'Line of Business': None, 'groupby': None}
Intent
in loop
setFlag----- 1
in acc date
justbn4--- ['201902', '201908']
just  --- ['201902', '201908']
Go to SQl
Session--------- <SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': None, 'groupby': None, 'time_range': ['past'], 'timeperiod': 'MTD', 'vizType': None}>
Initial dictionary----- <SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': None, 'groupby': None, 'time_range': ['past'], 'timeperiod': 'MTD', 'vizType': None}>
tempColl to be inserted to mapping Info--------- {'attribute': 'Account Date', 'entityId': 'D05', 'tableName': 'DIM_MONTH', 'fieldName': 'MTH_ID', 'columnName': 'D05.MTH_ID'}
      attribute entityId  tableName fieldName  columnName
0  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
{'Account Date': 'D05.MTH_ID'}
in for loop-----------
--------ITem---- Line of Business
in for loop-----------
--------ITem---- Region
in for loop-----------
--------ITem---- Account Date
FROM MAPPING INFO DICT _________________________
not mtd and len 1 and time range in past---- D05.MTH_ID BETWEEN '201902' AND '201907' 
if where not in query---- D05.MTH_ID BETWEEN '201902' AND '201907' 
in for loop-----------
--------ITem---- Agent
Query-- SELECT D05.MTH_ID , cast(isnull(SUM(ISNULL(F02.MTD_IND_PD_AMT + F02.MTD_MED_PD_AMT + F02.MTD_ALAE_PD_AMT + F02.MTD_ULAE_PD_AMT +
F02.MTD_IND_RSRV_CHNG_AMT + F02.MTD_MED_RSRV_CHNG_AMT + 
F02.MTD_ALAE_RSRV_CHNG_AMT + F02.MTD_ULAE_RSRV_CHNG_AMT,0) )
/nullif(sum(F02.MTD_EARNED_PREM_AMT),0)*100,0) as decimal(18,2)) AS LOSS_RATIO FROM V_FACT_PREM_CAL_YR_PRODUCT F02 INNER JOIN DIM_MONTH D05 ON F02.ACCTG_PRD_ID = D05.MTH_ID WHERE D05.MTH_ID BETWEEN '201902' AND '201907' GROUP BY D05.MTH_ID WARNING: No match found for input: loss ratio trend for past 6 months
WARNING: No match found for input: loss ratio trend for past 6 months
115.160.217.130 - - [07/Aug/2019 05:43:49] "POST /converse HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:43:54] "GET /visualization/linechart HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:43:55] "GET /static/visualization1565156629.7205098.csv HTTP/1.1" 200 -

MTH_ID
      attribute entityId  tableName fieldName  columnName
0  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
LOSS_RATIO
Empty DataFrame
Columns: [attribute, entityId, tableName, fieldName, columnName]
Index: []
{'MTH_ID': 'Account Date', 'LOSS_RATIO': 'Loss ratio'}
output from sql---
    Account Date  Loss ratio
0        201902       11.96
1        201903        5.54
2        201904       61.28
3        201905        8.77
4        201906       -1.23
5        201907        6.94
df---    Account Date  Loss ratio
0        201902       11.96
1        201903        5.54
2        201904       61.28
3        201905        8.77
4        201906       -1.23
5        201907        6.94
inside length greater than 2
multipleValueList ['Account Date']
singleValueList []
when multipleValues == 1
Account Date
inside Account Date
type---- linechart
inside loop
the temp_string is ---  for time period between August 2019 and February 2019 
the response is --- Loss ratio for time period between August 2019 and February 2019 
Before returning ----- linechart Loss ratio for time period between August 2019 and February 2019 
Loss ratio for time period between August 2019 and February 2019
Response received from viz module-------

the Loss ratio for time period between August 2019 and February 2019
***************************************************
<SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': 'visualization1565156629.7205098.csv', 'groupby': None, 'time_range': ['past'], 'timeperiod': 'MTD', 'vizType': 'linechart'}>
session variables are  
file Name----->visualization1565156629.7205098.csv
intent----->Loss ratio, state---------->None
 date---------['201902', '201908'], agent---------None
 LOB---------None, groupBy----------None
timeRange----->None
***************************************************
FileName in visualizatiion-------------- linechart
in visualization code
visualization1565156629.7205098.csv
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>
 var margin = {top: 50, right: 30, bottom: 30, left: 50}, 
width = 768 - margin.left - margin.right,
height = 400 - margin.top - margin.bottom; 
var parseDate = d3.time.format("%Y%m").parse; 
var x = d3.time.scale().range([0, width]); 
var y = d3.scale.linear().range([height, 0]); 
var xAxis = d3.svg.axis().scale(x)
.orient("bottom").ticks(5)
.innerTickSize(-height)
.outerTickSize(0)
.tickPadding(10);
var yAxis = d3.svg.axis().scale(y)
.orient("left").ticks(5)
.innerTickSize(-width)
.outerTickSize(0)
.tickPadding(10);
var svg = d3.select("body")
.append("svg")
.attr("width", width + margin.left + margin.right)
.attr("height", height + margin.top + margin.bottom)
.append("g")
.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
d3.csv("/static/visualization1565156629.7205098.csv", function(error, data) {
var headers = d3.keys(data[0])
var valueline = d3.svg.line()
.x(function(d) { return x(d[headers[0]]); })
.y(function(d) { return y(d[headers[1]]); });
data.forEach(function(d) {
d[headers[0]] = parseDate(d[headers[0]]);
d[headers[1]] = +d[headers[1]];
});
x.domain(d3.extent(data, function(d) { return d[headers[0]]; }));
y.domain([0, d3.max(data, function(d) { return d[headers[1]]; })]);
svg.append("path")
.attr("class", "line")
.attr("d", valueline(data));
svg.append("g")
.attr("class", "x axis")
.attr("transform", "translate(0," + height + ")")
.call(xAxis);
svg.append("text")
.attr("x", width / 2 ) 
.attr("y",0 - (margin.top / 2))
.attr("text-anchor", "middle")
.style("text-decoration", "underline")
.text(headers[1]+" by "+ headers[0]);
svg.append("g")
.attr("class", "y axis")
.call(yAxis)
.append("text")
.attr("transform", "rotate(-90)")
.attr("y", -20)
.attr("dy", "-1.5em")
.attr("font-family", "eyinterstate")
.attr("font-size", "12px")
.style("text-anchor", "end")
.text(headers[1]);
svg.append("g")
.classed("labels-group", true)
.selectAll("text")
.data(data)
.enter().append("text")
.classed("label", true)
.attr({
"x": function(d, i) {
return x(d[headers[0]]);
},
"y": function(d, i) {
return y(d[headers[1]]);
},
})
.text(function(d, i) {
return d[headers[1]];
});
svg.append("text")
.attr("transform", "translate(" + (width + 3) + "," + y(data[0][headers[1]]) + ")")
.attr("dy", ".35em")
.attr("text-anchor", "start")
.attr("font-family", "eyinterstate")
.attr("font-size", "12px")
.style("fill", "white")
.text(headers[1]);
});
</script>
in visualization code
visualization1565156629.7205098.csv
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: loss ratio trend by agent
['Hu Harmless Hier Partners', 'Personal Umbrella', 'Johnson and Johnson', 'Unknown', 'October', 'June', 'Thomson Jones agency', 'Killarney Creek agency', 'Effective Insurance', 'January', 'September', 'Claus Workmanuberseer agency', 'Carpenters Insurance', 'Garagemen Insurance brokerage', 'Uninsurable brokers', 'Georgia', 'Armstrong Premier', 'Security Group Able', 'Premier Insurance', 'Drivers Choice Truckers Insurance', 'Armstrong Cayman Captive Srvs', 'Finalist Insurance Group', 'Kennedy Mass Market', 'Kentucky', 'Rubicon Flood Insurance', 'Dimitrios Xenopolus agency', 'BusinessOwners', 'Bluto Janckowiz Independent Agent', 'ACV Property Insurance', 'Manufacturers Risk', 'Boiler Specialists', 'August', 'Package Partners', 'Wisconsin', 'Kennedy Premier', 'Harliquin and Daughter Insurance', 'Armstrong Employer Srvcs', 'Hawaii', 'Monoline brokers', 'Security Group', 'Quad Cities Insurance', 'Occurrence Group', 'Whiplash Bros Auto Insurance', 'Builders Risk brokers', 'Verity Bonds and Surety', 'Armstrong Los Angeles', 'Quick Quote Insurance', 'Farmowners Group', 'Nolocontendere brokers', 'Internal Producer Code', 'December', 'Personal Auto', 'No Fault Group', 'April', 'February', 'New York', 'Commercial insurers', 'Derrick Crane agency', 'Openhand brokers', 'Pennsylvania', 'Armstrong San Diego', 'Massachusetts', 'Universal Insurance', 'Business Auto', 'Independence Insurance', 'Xoria Farm Insurance', 'July', 'Lemon Growers', 'May', 'Homeowners', 'November', 'Risk Management Group', 'Kennedy Group Services', 'Security Group Baker', 'Armstrong Prof Liab Srvcs', 'Kennedy Strategic Risks', 'Jillian Losttime Workers Comp', 'March', 'California', 'Alabama', 'Yellowcreek Insurance', 'Zealot and Zaire Insurance Partners', 'Cid Vicious agency', 'Greatwest Bonds and Surety', 'Market Share Managing agency', 'Internal Portal Code', 'Allrisk Insurance', 'Kearney and OShaugnessy agency', 'Special Form Property brokers', 'Youngblood Insurance', 'Zorba Przmeleski Specialty Lines', 'Exceptional Insurance']
{}
------Invoking entity and intent recognition module----
loss ratio MTD
hdshjdqgdg---- by agent
in agent loop
----------OutDict {'Intent': 'Loss ratio', 'timeperiod': 'MTD', 'Account Date': None, 'time_range': None, 'Region': None, 'Agent': None, 'Line of Business': None, 'groupby': ['Agent']}
Intent
in loop
setFlag----- 1
justbn4--- ['201902', '201908']
just  --- None
Go to SQl
Session--------- <SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': None, 'groupby': ['Agent'], 'time_range': ['past'], 'timeperiod': 'MTD', 'vizType': None}>
Initial dictionary----- <SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': None, 'groupby': ['Agent'], 'time_range': ['past'], 'timeperiod': 'MTD', 'vizType': None}>
tempColl to be inserted to mapping Info--------- {'attribute': 'Account Date', 'entityId': 'D05', 'tableName': 'DIM_MONTH', 'fieldName': 'MTH_ID', 'columnName': 'D05.MTH_ID'}
tempColl to be inserted to mapping Info--------- {'attribute': 'Agent', 'entityId': 'D02', 'tableName': 'DIM_AGENT', 'fieldName': 'AGNT_NAME', 'columnName': 'D02.AGNT_NAME'}
      attribute entityId  tableName  fieldName     columnName
0  Account Date      D05  DIM_MONTH     MTH_ID     D05.MTH_ID
1         Agent      D02  DIM_AGENT  AGNT_NAME  D02.AGNT_NAME
{'Account Date': 'D05.MTH_ID', 'Agent': 'D02.AGNT_NAME'}
in for loop-----------
--------ITem---- Line of Business
in for loop-----------
--------ITem---- Region
in for loop-----------
--------ITem---- Account Date
FROM MAPPING INFO DICT _________________________
not mtd and len 1 and time range in past---- D05.MTH_ID BETWEEN '201902' AND '201907' 
if where not in query---- D05.MTH_ID BETWEEN '201902' AND '201907' 
in for loop-----------
--------ITem---- Agent
Query-- SELECT D05.MTH_ID ,D02.AGNT_NAME , cast(isnull(SUM(ISNULL(F01.MTD_IND_PD_AMT + F01.MTD_MED_PD_AMT + F01.MTD_ALAE_PD_AMT + F01.MTD_ULAE_PD_AMT +
F01.MTD_IND_RSRV_CHNG_AMT + F01.MTD_MED_RSRV_CHNG_AMT + 
F01.MTD_ALAE_RSRV_CHNG_AMT + F01.MTD_ULAE_RSRV_CHNG_AMT,0) )
/nullif(sum(F01.MTD_EARNED_PREM_AMT),0)*100,0) as decimal(18,2)) AS LOSS_RATIO FROM V_FACT_PREM_CAL_YR F01 INNER JOIN DIM_MONTH D05 ON F01.ACCTG_PRD_ID = D05.MTH_ID INNER JOIN DIM_AGENT D02 ON F01.AGNT_ID = D02.AGNT_ID WHERE D05.MTH_ID BETWEEN '201902' AND '201907' GROUP BY D05.MTH_ID ,D02.AGNT_NAME 
MTH_ID
      attribute entityId  tableName fieldName  columnName
0  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
AGNT_NAME
  attribute entityId  tableName  fieldName     columnName
1     Agent      D02  DIM_AGENT  AGNT_NAME  D02.AGNT_NAME
LOSS_RATIO
Empty DataFrame
Columns: [attribute, entityId, tableName, fieldName, columnName]
Index: []
{'MTH_ID': 'Account Date', 'AGNT_NAME': 'Agent', 'LOSS_RATIO': 'Loss ratio'}
output from sql---
     Account Date                       Agent  Loss ratio
0         201903      ACV Property Insurance        0.00
1         201904      ACV Property Insurance      907.30
2         201905      ACV Property Insurance        0.00
3         201906      ACV Property Insurance        0.00
4         201907      ACV Property Insurance        0.00
5         201903           Allrisk Insurance        0.00
6         201904           Allrisk Insurance      986.84
7         201905           Allrisk Insurance        0.00
8         201906           Allrisk Insurance        0.00
9         201907           Allrisk Insurance        0.00
10        201902         Armstrong (Premier)        8.40
11        201903         Armstrong (Premier)        2.74
12        201904         Armstrong (Premier)      -53.29
13        201905         Armstrong (Premier)        1.63
14        201906         Armstrong (Premier)       -6.48
15        201907         Armstrong (Premier)        5.85
16        201902     Armstrong - Los Angeles       60.00
17        201903     Armstrong - Los Angeles       80.11
18        201904     Armstrong - Los Angeles       34.59
19        201905     Armstrong - Los Angeles       48.23
20        201906     Armstrong - Los Angeles       -4.36
21        201907     Armstrong - Los Angeles       44.78
22        201903       Armstrong - San Diego        0.00
23        201904       Armstrong - San Diego        0.00
24        201905       Armstrong - San Diego        0.00
25        201906       Armstrong - San Diego        0.00
26        201904        Derrick Crane agency        0.00
27        201905        Derrick Crane agency        0.00
28        201906        Derrick Crane agency        0.00
29        201907        Derrick Crane agency        0.00
30        201903        Internal Portal Code        0.00
31        201904        Internal Portal Code        0.00
32        201905        Internal Portal Code        0.00
33        201906        Internal Portal Code        0.00
34        201907        Internal Portal Code        0.00
35        201904  Internal Producer Code - 3        0.00
36        201905  Internal Producer Code - 3        0.00
37        201906  Internal Producer Code - 3        0.00
38        201903      Kennedy Group Services        0.00
39        201904      Kennedy Group Services        0.00
40        201905      Kennedy Group Services        0.00
41        201906      Kennedy Group Services        0.00
42        201902     Verity Bonds and Surety        6.80
43        201903     Verity Bonds and Surety       17.60
44        201904     Verity Bonds and Surety        2.93
45        201905     Verity Bonds and Surety        5.05
46        201906     Verity Bonds and Surety       -0.58
47        201907     Verity Bonds and Surety        2.19
df---     Account Date                       Agent  Loss ratio
0         201903      ACV Property Insurance        0.00
1         201904      ACV Property Insurance      907.30
2         201905      ACV Property Insurance        0.00
3         201906      ACV Property Insurance        0.00
4         201907      ACV Property Insurance        0.00
5         201903           Allrisk Insurance        0.00
6         201904           Allrisk Insurance      986.84
7         201905           Allrisk Insurance        0.00
8         201906           Allrisk Insurance        0.00
9         201907           Allrisk Insurance        0.00
10        201902         Armstrong (Premier)        8.40
11        201903         Armstrong (Premier)        2.74
12        201904         Armstrong (Premier)      -53.29
13        201905         Armstrong (Premier)        1.63
14        201906         Armstrong (Premier)       -6.48
15        201907         Armstrong (Premier)        5.85
16        201902     Armstrong - Los Angeles       60.00
17        201903     Armstrong - Los Angeles       80.11
18        201904     Armstrong - Los Angeles       34.59
19        201905     Armstrong - Los Angeles       48.23
20        201906     Armstrong - Los Angeles       -4.36
21        201907     Armstrong - Los Angeles       44.78
22        201903       Armstrong - San Diego        0.00
23        201904       Armstrong - San Diego        0.00
24        201905       Armstrong - San Diego        0.00
25        201906       Armstrong - San Diego        0.00
26        201904        Derrick Crane agency        0.00
27        201905        Derrick Crane agency        0.00
28        201906        Derrick Crane agency        0.00
29        201907        Derrick Crane agency        0.00
30        201903        Internal Portal Code        0.00
31        201904        Internal Portal Code        0.00
32        201905        Internal Portal Code        0.00
33        201906        Internal Portal Code        0.00
34        201907        Internal Portal Code        0.00
35        201904  Internal Producer Code - 3        0.00
36        201905  Internal Producer Code - 3        0.00
37        201906  Internal Producer Code - 3        0.00
38        201903      Kennedy Group Services        0.00
39        201904      Kennedy Group Services        0.00
40        201905      Kennedy Group Services        0.00
41        201906      Kennedy Group Services        0.00
42        201902     Verity Bonds and Surety        6.80
43        201903     Verity Bonds and Surety       17.60
44        201904     Verity Bonds and Surety        2.93
45        201905     Verity Bonds and Surety        5.05
46        201906     Verity Bonds and Surety       -0.58
47        201907     Verity Bonds and Surety        2.19
inside length greater than 2
multipleValueList ['Account Date', 'Agent']
singleValueList []
when multipleValues != 1
inside Account Date
In multile list except for Account Date
the temp_string is ---  for time period between August 2019 and February 2019 
the response is --- Loss ratio for time period between August 2019 and February 2019 
Before returning ----- table Loss ratio for time period between August 2019 and February 2019 
Loss ratio for time period between August 2019 and February 2019
Response received from viz module-------

the Loss ratio for time period between August 2019 and February 2019 by agent
***************************************************
<SecureCookieSession {'Account Date': ['201902', '201908'], 'Agent': None, 'Intent': 'Loss ratio', 'Line of Business': None, 'Region': None, '_permanent': True, 'combined': None, 'fileName': 'visualization1565156652.4149384.csv', 'groupby': ['Agent'], 'time_range': ['past'], 'timeperiod': 'MTD', 'vizType': 'table'}>
session variables are  
file Name----->visualization1565156652.4149384.csv
intent----->Loss ratio, state---------->None
 date---------['201902', '201908'], agent---------NoneWARNING: No match found for input: loss ratio trend by agent
WARNING: No match found for input: loss ratio trend by agent
115.160.217.130 - - [07/Aug/2019 05:44:12] "POST /converse HTTP/1.1" 200 -
WARNING: No match found for input: loss ratio trend by agent
WARNING: No match found for input: loss ratio trend by agent
115.160.217.130 - - [07/Aug/2019 05:45:58] "POST /converse HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:45:59] "GET /static/img/bots/inex.png HTTP/1.1" 200 -

 LOB---------None, groupBy----------['Agent']
timeRange----->None
***************************************************
in converse
Loading resources/greetings.aiml... done (0.00 seconds)
Loading resources/inex.aiml... done (0.00 seconds)
User input is: loss ratio trend by agent
['Hu Harmless Hier Partners', 'Personal Umbrella', 'Johnson and Johnson', 'Unknown', 'October', 'June', 'Thomson Jones agency', 'Killarney Creek agency', 'Effective Insurance', 'January', 'September', 'Claus Workmanuberseer agency', 'Carpenters Insurance', 'Garagemen Insurance brokerage', 'Uninsurable brokers', 'Georgia', 'Armstrong Premier', 'Security Group Able', 'Premier Insurance', 'Drivers Choice Truckers Insurance', 'Armstrong Cayman Captive Srvs', 'Finalist Insurance Group', 'Kennedy Mass Market', 'Kentucky', 'Rubicon Flood Insurance', 'Dimitrios Xenopolus agency', 'BusinessOwners', 'Bluto Janckowiz Independent Agent', 'ACV Property Insurance', 'Manufacturers Risk', 'Boiler Specialists', 'August', 'Package Partners', 'Wisconsin', 'Kennedy Premier', 'Harliquin and Daughter Insurance', 'Armstrong Employer Srvcs', 'Hawaii', 'Monoline brokers', 'Security Group', 'Quad Cities Insurance', 'Occurrence Group', 'Whiplash Bros Auto Insurance', 'Builders Risk brokers', 'Verity Bonds and Surety', 'Armstrong Los Angeles', 'Quick Quote Insurance', 'Farmowners Group', 'Nolocontendere brokers', 'Internal Producer Code', 'December', 'Personal Auto', 'No Fault Group', 'April', 'February', 'New York', 'Commercial insurers', 'Derrick Crane agency', 'Openhand brokers', 'Pennsylvania', 'Armstrong San Diego', 'Massachusetts', 'Universal Insurance', 'Business Auto', 'Independence Insurance', 'Xoria Farm Insurance', 'July', 'Lemon Growers', 'May', 'Homeowners', 'November', 'Risk Management Group', 'Kennedy Group Services', 'Security Group Baker', 'Armstrong Prof Liab Srvcs', 'Kennedy Strategic Risks', 'Jillian Losttime Workers Comp', 'March', 'California', 'Alabama', 'Yellowcreek Insurance', 'Zealot and Zaire Insurance Partners', 'Cid Vicious agency', 'Greatwest Bonds and Surety', 'Market Share Managing agency', 'Internal Portal Code', 'Allrisk Insurance', 'Kearney and OShaugnessy agency', 'Special Form Property brokers', 'Youngblood Insurance', 'Zorba Przmeleski Specialty Lines', 'Exceptional Insurance']
{}
------Invoking entity and intent recognition module----
loss ratio MTD
hdshjdqgdg---- by agent
in agent loop
----------OutDict {'Intent': 'Loss ratio', 'timeperiod': 'MTD', 'Account Date': None, 'time_range': None, 'Region': None, 'Agent': None, 'Line of Business': None, 'groupby': ['Agent']}
Intent
in loop
setFlag----- 1
justbn4--- None
just  --- None
in None
last month 2019-07-31
list-- ['201907']
Go to SQl
Session--------- <SecureCookieSession {'_permanent': True, 'Intent': 'Loss ratio', 'groupby': ['Agent'], 'combined': None, 'vizType': None, 'fileName': None, 'timeperiod': 'MTD', 'Account Date': ['201907'], 'Region': None, 'Line of Business': None, 'Agent': None, 'time_range': None}>
Initial dictionary----- <SecureCookieSession {'_permanent': True, 'Intent': 'Loss ratio', 'groupby': ['Agent'], 'combined': None, 'vizType': None, 'fileName': None, 'timeperiod': 'MTD', 'Account Date': ['201907'], 'Region': None, 'Line of Business': None, 'Agent': None, 'time_range': None}>
tempColl to be inserted to mapping Info--------- {'attribute': 'Account Date', 'entityId': 'D05', 'tableName': 'DIM_MONTH', 'fieldName': 'MTH_ID', 'columnName': 'D05.MTH_ID'}
tempColl to be inserted to mapping Info--------- {'attribute': 'Agent', 'entityId': 'D02', 'tableName': 'DIM_AGENT', 'fieldName': 'AGNT_NAME', 'columnName': 'D02.AGNT_NAME'}
      attribute entityId  tableName  fieldName     columnName
0  Account Date      D05  DIM_MONTH     MTH_ID     D05.MTH_ID
1         Agent      D02  DIM_AGENT  AGNT_NAME  D02.AGNT_NAME
{'Account Date': 'D05.MTH_ID', 'Agent': 'D02.AGNT_NAME'}
in for loop-----------
--------ITem---- Line of Business
in for loop-----------
--------ITem---- Region
in for loop-----------
--------ITem---- Account Date
FROM MAPPING INFO DICT _________________________
not mtd and len 1 and time range None---- D05.MTH_ID = 201907 
if where not in query---- D05.MTH_ID = 201907 
in for loop-----------
--------ITem---- Agent
Query-- SELECT D05.MTH_ID ,D02.AGNT_NAME , cast(isnull(SUM(ISNULL(F01.MTD_IND_PD_AMT + F01.MTD_MED_PD_AMT + F01.MTD_ALAE_PD_AMT + F01.MTD_ULAE_PD_AMT +
F01.MTD_IND_RSRV_CHNG_AMT + F01.MTD_MED_RSRV_CHNG_AMT + 
F01.MTD_ALAE_RSRV_CHNG_AMT + F01.MTD_ULAE_RSRV_CHNG_AMT,0) )
/nullif(sum(F01.MTD_EARNED_PREM_AMT),0)*100,0) as decimal(18,2)) AS LOSS_RATIO FROM V_FACT_PREM_CAL_YR F01 INNER JOIN DIM_MONTH D05 ON F01.ACCTG_PRD_ID = D05.MTH_ID INNER JOIN DIM_AGENT D02 ON F01.AGNT_ID = D02.AGNT_ID WHERE D05.MTH_ID = 201907 GROUP BY D05.MTH_ID ,D02.AGNT_NAME 
MTH_ID
      attribute entityId  tableName fieldName  columnName
0  Account Date      D05  DIM_MONTH    MTH_ID  D05.MTH_ID
AGNT_NAME
  attribute entityId  tableName  fieldName     columnName
1     Agent      D02  DIM_AGENT  AGNT_NAME  D02.AGNT_NAME
LOSS_RATIO
Empty DataFrame
Columns: [attribute, entityId, tableName, fieldName, columnName]
Index: []
{'MTH_ID': 'Account Date', 'AGNT_NAME': 'Agent', 'LOSS_RATIO': 'Loss ratio'}
output from sql---
    Account Date                    Agent  Loss ratio
0        201907   ACV Property Insurance        0.00
1        201907        Allrisk Insurance        0.00
2        201907      Armstrong (Premier)        5.85
3        201907  Armstrong - Los Angeles       44.78
4        201907     Derrick Crane agency        0.00
5        201907     Internal Portal Code        0.00
6        201907  Verity Bonds and Surety        2.19
df---    Account Date                    Agent  Loss ratio
0        201907   ACV Property Insurance        0.00
1        201907        Allrisk Insurance        0.00
2        201907      Armstrong (Premier)        5.85
3        201907  Armstrong - Los Angeles       44.78
4        201907     Derrick Crane agency        0.00
5        201907     Internal Portal Code        0.00
6        201907  Verity Bonds and Surety        2.19
inside length greater than 2
multipleValueList ['Agent']
singleValueList ['Account Date']
inside singleValue loop
when multipleValues == 1
Agent
IN else condition except for Account date
type---- barchart
inside loop
inside Account date in multiple value list
the temp_string is ---  in July 2019 , 
the response is --- Loss ratio in July 2019 , 
Before returning ----- barchart Loss ratio in July 2019 , 
Loss ratio in July 2019 
Response received from viz module-------

the Loss ratio in July 2019  by agent
***************************************************
<SecureCookieSession {'_permanent': True, 'Intent': 'Loss ratio', 'groupby': ['Agent'], 'combined': None, 'vizType': 'barchart', 'fileName': 'visualization1565156758.669045.csv', 'timeperiod': 'MTD', 'Account Date': ['201907'], 'Region': None, 'Line of Business': None, 'Agent': None, 'time_range': None}>
session variables are  
file Name----->visualization1565156758.669045.csv
intent----->Loss ratio, state---------->None
 date---------['201907'], agent---------None
 LOB---------None, groupBy----------['Agent']
timeRange----->None
***************************************************
FileName in render-------------- Loss ratio
in visualization code
visualization1565156758.669045.csv
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>
var margin = {top: 100, right: 50, bottom: 250, left: 150},
width = 1000 - margin.left - margin.right,
height = 700 - margin.top - margin.bottom;
var x = d3.scale.ordinal().rangeRoundBands([0, width], .05);
var y = d3.scale.linear().range([height, 0]);
var xAxis = d3.svg.axis().scale(x)
.orient("bottom");
var yAxis = d3.svg.axis().scale(y)
.orient("left")
.innerTickSize(-width)
.outerTickSize(0)
.tickPadding(10);
var svg = d3.select("body").append("svg")
.attr("width", width + margin.left + margin.right)
.attr("height", height + margin.top + margin.bottom)
.append("g")
.attr("transform",
"translate(" + margin.left + "," + margin.top + ")");
d3.csv("/static/visualization1565156758.669045.csv", function(error, data) {
var headers = d3.keys(data[0])
if (error) {
throw error;
}
data.forEach(function(d)
{
d[headers[1]] = +d[headers[1]];
});
x.domain(data.map(function(d)
{
return d[headers[0]];
}));
y.domain([0, d3.max(data, function(d) {
return d[headers[1]];
})]);
svg.append("g")
.attr("class", "x axis")
.attr("transform", "translate(0," + height + ")")
.call(xAxis)
.selectAll("text")
.style("text-anchor", "end")
.attr("dx", "-.8em")
.attr("dy", ".15em")
.attr("font-family", "eyinterstate")
.attr("font-size", "12px")
.attr("transform", "rotate(-45)")
;
svg.append("g")
.attr("class", "y axis")
.call(yAxis)
.append("text")
.attr("transform", "rotate(-90)")
.attr("y",-20 )
.attr("dy", "-1em")
.attr("font-family", "eyinterstate")
.attr("font-size", "12px")
.style("text-anchor", "end")
.text(headers[1]);
svg.append("text")
.attr("x", width / 2 ) 
.attr("y",0 - (margin.top / 2))
.attr("text-anchor", "middle")
.attr("font-family", "eyinterstate")
.attr("font-size", "12px")
.style("text-decoration", "underline")
.text(headers[1]+" by "+ headers[0]);
svg.selectAll(".bar")
.data(data)
.enter()
.append("rect")
.style("fill", "#ffe600")
.attr("class", "bar")
.attr("x", function(d)
{
return x(d[headers[0]]);
})
.attr("width", x.rangeBand()/2)
.attr("y", function(d)
{
return y(d[headers[1]]);
})
.attr("height", function(d)
{
return height - y(d[headers[1]]); });
svg.selectAll("text.bar")
.data(data)
.enter().append("text")
.attr("class", "bar")
.attr("text-anchor", "end")
.attr("font-family", "eyinterstate")
.attr("font-size", "12px")
.attr("x", function(d)
{
return x(d[headers[0]]) + x.rangeBand() / 2;})
.attr("y", function(d)
{
return y(d[headers[1]]) ;})
.text(function(d)
{
return d[headers[1]];});
function type(d)
{
y(d[headers[1]]) = +y(d[headers[1]]);
return d;
}
});
</script>115.160.217.130 - - [07/Aug/2019 05:46:04] "GET /visualization/barchart HTTP/1.1" 200 -
115.160.217.130 - - [07/Aug/2019 05:46:05] "GET /static/visualization1565156758.669045.csv HTTP/1.1" 200 -
186.226.219.126 - - [07/Aug/2019 07:04:48] "GET / HTTP/1.1" 200 -
180.101.253.161 - - [07/Aug/2019 07:18:52] "GET /TP/public/index.php HTTP/1.1" 404 -
180.101.253.161 - - [07/Aug/2019 07:18:53] "GET /TP/index.php HTTP/1.1" 404 -
180.101.253.161 - - [07/Aug/2019 07:18:53] "GET /thinkphp/html/public/index.php HTTP/1.1" 404 -
180.101.253.161 - - [07/Aug/2019 07:18:54] "GET /html/public/index.php HTTP/1.1" 404 -
180.101.253.161 - - [07/Aug/2019 07:18:54] "GET /public/index.php HTTP/1.1" 404 -
180.101.253.161 - - [07/Aug/2019 07:18:54] "GET /TP/html/public/index.php HTTP/1.1" 404 -
180.101.253.161 - - [07/Aug/2019 07:19:00] "POST /users?page=&size=5 HTTP/1.1" 404 -
180.101.253.161 - - [07/Aug/2019 07:19:00] "GET / HTTP/1.1" 200 -
196.52.43.130 - - [07/Aug/2019 08:02:21] "GET / HTTP/1.0" 200 -
78.187.38.6 - - [07/Aug/2019 08:25:15] "GET / HTTP/1.1" 200 -
118.190.102.229 - - [07/Aug/2019 09:13:52] "POST /users?page=&size=5 HTTP/1.1" 404 -
149.202.10.237 - - [07/Aug/2019 09:37:50] "CONNECT i.instagram.com:443 HTTP/1.1" 404 -
177.11.136.74 - - [07/Aug/2019 11:09:14] "GET / HTTP/1.1" 200 -
13.229.86.67 - - [07/Aug/2019 11:28:04] "GET /manager/html HTTP/1.1" 404 -
172.58.200.150 - - [07/Aug/2019 11:37:04] "GET /static/css/framework7.ios.min.css HTTP/1.1" 200 -
172.58.200.150 - - [07/Aug/2019 11:37:04] "GET /static/css/framework7.ios.colors.min.css HTTP/1.1" 200 -
172.58.200.150 - - [07/Aug/2019 11:37:04] "GET /static/css/my-app.css HTTP/1.1" 200 -
172.58.200.150 - - [07/Aug/2019 11:37:04] "GET /static/js/framework7.min.js HTTP/1.1" 200 -
172.58.200.150 - - [07/Aug/2019 11:37:04] "GET /static/js/my-app.js HTTP/1.1" 200 -
172.58.200.150 - - [07/Aug/2019 11:37:05] "GET /static/img/bots/inex.png HTTP/1.1" 200 -
172.58.200.150 - - [07/Aug/2019 11:37:06] "GET /clear-session HTTP/1.1" 200 -
194.32.117.3 - - [07/Aug/2019 12:31:49] "GET / HTTP/1.1" 200 -
103.96.51.91 - - [07/Aug/2019 13:54:50] "GET / HTTP/1.1" 200 -
128.64.129.13 - - [07/Aug/2019 15:46:07] "GET /visualization/barchart HTTP/1.1" 500 -
Traceback (most recent call last):
  File "/home/eyuser/inexbot/lib/python3.6/site-packages/flask/app.py", line 2328, in __call__
    return self.wsgi_app(environ, start_response)
  File "/home/eyuser/inexbot/lib/python3.6/site-packages/flask/app.py", line 2314, in wsgi_app
    response = self.handle_exception(e)
  File "/home/eyuser/inexbot/lib/python3.6/site-packages/flask/app.py", line 1760, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/home/eyuser/inexbot/lib/python3.6/site-packages/flask/_compat.py", line 36, in reraise
    raise value
  File "/home/eyuser/inexbot/lib/python3.6/site-packages/flask/app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/eyuser/inexbot/lib/python3.6/site-packages/flask/app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/eyuser/inexbot/lib/python3.6/site-packages/flask/app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/home/eyuser/inexbot/lib/python3.6/site-packages/flask/_compat.py", line 36, in reraise
    raise value
  File "/home/eyuser/inexbot/lib/python3.6/site-packages/flask/app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/eyuser/inexbot/lib/python3.6/site-packages/flask/app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/home/eyuser/iNex_v5/application.py", line 52, in barVisualization
    print(visualizationCode(session.get('vizType'),session.get('fileName')))
  File "/home/eyuser/iNex_v5/visualizations_module.py", line 646, in visualizationCode
    return script
UnboundLocalError: local variable 'script' referenced before assignment
128.64.129.13 - - [07/Aug/2019 15:46:07] "GET /visualization/barchart?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1" 200 -
128.64.129.13 - - [07/Aug/2019 15:46:07] "GET /visualization/barchart?__debugger__=yes&cmd=resource&f=jquery.js HTTP/1.1" 200 -
128.64.129.13 - - [07/Aug/2019 15:46:07] "GET /visualization/barchart?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1" 200 -
128.64.129.13 - - [07/Aug/2019 15:46:08] "GET /visualization/barchart?__debugger__=yes&cmd=resource&f=ubuntu.ttf HTTP/1.1" 200 -
128.64.129.13 - - [07/Aug/2019 15:46:08] "GET /visualization/barchart?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1" 200 -
128.64.129.13 - - [07/Aug/2019 15:46:08] "GET /visualization/barchart?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1" 200 -
128.64.129.13 - - [07/Aug/2019 15:46:13] "GET /mobile HTTP/1.1" 200 -
128.64.129.13 - - [07/Aug/2019 15:46:13] "GET /static/css/framework7.ios.min.css HTTP/1.1" 200 -
128.64.129.13 - - [07/Aug/2019 15:46:13] "GET /static/css/framework7.ios.colors.min.css HTTP/1.1" 200 -
128.64.129.13 - - [07/Aug/2019 15:46:13] "GET /static/js/my-app.js HTTP/1.1" 200 -
128.64.129.13 - - [07/Aug/2019 15:46:13] "GET /static/js/framework7.min.js HTTP/1.1" 200 -
128.64.129.13 - - [07/Aug/2019 15:46:13] "GET /static/css/my-app.css HTTP/1.1" 200 -
128.64.129.13 - - [07/Aug/2019 15:46:14] "GET /static/img/bots/inex.png HTTP/1.1" 200 -
128.64.129.13 - - [07/Aug/2019 15:46:14] "GET /clear-session HTTP/1.1" 200 -
128.64.129.13 - - [07/Aug/2019 15:46:14] "GET /favicon.ico HTTP/1.1" 404 -
201.68.28.15 - - [07/Aug/2019 16:07:18] "GET / HTTP/1.1" 200 -
187.110.209.53 - - [07/Aug/2019 16:11:17] "GET / HTTP/1.1" 200 -
139.162.79.87 - - [07/Aug/2019 16:12:58] "GET / HTTP/1.1" 200 -
205.185.114.149 - - [07/Aug/2019 16:21:55] code 400, message Bad request syntax ('\x05\x02\x00\x02')
205.185.114.149 - - [07/Aug/2019 16:21:55] " " HTTPStatus.BAD_REQUEST -
205.185.114.149 - - [07/Aug/2019 16:21:55] code 400, message Bad request syntax ('\x05\x02\x00\x02')
205.185.114.149 - - [07/Aug/2019 16:21:55] " " HTTPStatus.BAD_REQUEST -
162.246.211.20 - - [07/Aug/2019 17:02:29] "GET / HTTP/1.1" 200 -
184.105.247.252 - - [07/Aug/2019 18:11:34] "GET / HTTP/1.1" 200 -
66.249.84.82 - - [07/Aug/2019 18:50:15] "GET /favicon.ico HTTP/1.1" 404 -
66.249.84.36 - - [07/Aug/2019 18:50:37] "GET /mobile HTTP/1.1" 200 -
66.249.84.40 - - [07/Aug/2019 18:50:37] "GET /static/css/my-app.css HTTP/1.1" 200 -
66.249.84.38 - - [07/Aug/2019 18:50:37] "GET /static/css/framework7.ios.min.css HTTP/1.1" 200 -
66.249.84.36 - - [07/Aug/2019 18:50:37] "GET /static/css/framework7.ios.colors.min.css HTTP/1.1" 200 -
66.249.84.82 - - [07/Aug/2019 18:50:37] "GET /static/js/framework7.min.js HTTP/1.1" 200 -
66.249.84.36 - - [07/Aug/2019 18:50:37] "GET /static/js/my-app.js HTTP/1.1" 200 -
66.249.84.40 - - [07/Aug/2019 18:50:38] "GET /static/img/bots/inex.png HTTP/1.1" 200 -
66.249.84.80 - - [07/Aug/2019 18:50:38] "GET /clear-session HTTP/1.1" 200 -
139.155.110.210 - - [07/Aug/2019 19:05:54] "GET /TP/public/index.php HTTP/1.1" 404 -
139.155.110.210 - - [07/Aug/2019 19:05:54] "GET /TP/index.php HTTP/1.1" 404 -
139.155.110.210 - - [07/Aug/2019 19:06:00] "POST /users?page=&size=5 HTTP/1.1" 404 -
139.155.110.210 - - [07/Aug/2019 19:06:05] "GET /thinkphp/html/public/index.php HTTP/1.1" 404 -
139.155.110.210 - - [07/Aug/2019 19:06:08] "GET / HTTP/1.1" 200 -
80.211.9.209 - - [07/Aug/2019 20:20:34] "GET / HTTP/1.1" 200 -
172.58.200.95 - - [07/Aug/2019 20:37:31] "GET /mobile HTTP/1.1" 200 -
66.249.88.40 - - [07/Aug/2019 20:37:32] "GET /static/css/framework7.ios.colors.min.css HTTP/1.1" 304 -
66.249.88.38 - - [07/Aug/2019 20:37:32] "GET /static/js/framework7.min.js HTTP/1.1" 304 -
66.249.88.36 - - [07/Aug/2019 20:37:32] "GET /static/js/my-app.js HTTP/1.1" 304 -
66.249.88.36 - - [07/Aug/2019 20:37:32] "GET /static/css/framework7.ios.min.css HTTP/1.1" 304 -
66.249.88.36 - - [07/Aug/2019 20:37:32] "GET /static/css/my-app.css HTTP/1.1" 304 -
66.249.88.38 - - [07/Aug/2019 20:37:32] "GET /static/img/bots/inex.png HTTP/1.1" 304 -
66.249.88.36 - - [07/Aug/2019 20:37:32] "GET /clear-session HTTP/1.1" 200 -
66.249.88.36 - - [07/Aug/2019 20:37:32] "GET /favicon.ico HTTP/1.1" 404 -
201.1.178.152 - - [07/Aug/2019 20:51:23] "GET / HTTP/1.1" 200 -
201.1.178.152 - - [07/Aug/2019 20:51:23] "GET / HTTP/1.1" 200 -
46.159.3.6 - - [07/Aug/2019 21:27:23] "GET / HTTP/1.1" 200 -
116.206.253.102 - - [07/Aug/2019 23:14:21] "GET / HTTP/1.1" 200 -
46.161.27.112 - - [08/Aug/2019 00:12:39] code 400, message Bad HTTP/0.9 request type ('\x03\x00\x00+&\x00\x00\x00\x00\x00Cookie:')
46.161.27.112 - - [08/Aug/2019 00:12:39] "  +&     Cookie: mstshash=hello" HTTPStatus.BAD_REQUEST -
185.143.223.8 - - [08/Aug/2019 00:23:16] "GET / HTTP/1.1" 200 -
138.97.32.67 - - [08/Aug/2019 01:01:36] "GET / HTTP/1.1" 200 -
209.17.97.42 - - [08/Aug/2019 01:15:54] "GET / HTTP/1.0" 200 -
88.251.150.19 - - [08/Aug/2019 01:39:18] "GET / HTTP/1.1" 200 -
62.245.72.37 - - [08/Aug/2019 02:15:41] "GET / HTTP/1.1" 200 -
186.225.148.18 - - [08/Aug/2019 02:23:58] "GET / HTTP/1.1" 200 -
191.97.36.175 - - [08/Aug/2019 03:14:33] "GET / HTTP/1.1" 200 -
192.141.225.37 - - [08/Aug/2019 05:56:07] "GET / HTTP/1.1" 200 -
194.61.24.23 - - [08/Aug/2019 06:59:41] "GET / HTTP/1.1" 200 -
139.162.111.98 - - [08/Aug/2019 07:12:38] "GET / HTTP/1.1" 200 -
 * Detected change in '/home/eyuser/iNex_v5/application.py', reloading

in visualization code
visualization1565156758.669045.csv
FileName in render-------------- None
in visualization code
None
 * Restarting with stat
Traceback (most recent call last):
  File "/home/eyuser/iNex_v5/application.py", line 3, in <module>
    from LossRatio import LossRatio
ModuleNotFoundError: No module named 'LossRatio'
